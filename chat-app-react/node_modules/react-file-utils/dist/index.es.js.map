{"version":3,"file":"index.es.js","sources":["../src/components/FileIcon.js","../src/components/LoadingIndicator.js","../src/components/FilePreviewer.js","../src/components/AttachmentIcon.js","../src/components/FileUploadButton.js","../src/utils.js","../src/components/ImageDropzone.js","../src/components/IconButton.js","../src/images/placeholder-generic.png","../src/components/Thumbnail.js","../src/components/PictureIcon.js","../src/components/ImageUploadButton.js","../src/components/ThumbnailPlaceholder.js","../src/components/ImagePreviewer.js"],"sourcesContent":["// @flow\nimport * as React from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { default as BigFileIcon, defaultStyles } from 'react-file-icon';\nimport {\n  faFileWord,\n  faFileExcel,\n  faFilePowerpoint,\n  faFileArchive,\n  faFileCode,\n  faFileAudio,\n  faFileVideo,\n  faFileImage,\n  faFilePdf,\n  faFileAlt,\n  faFile,\n} from '@fortawesome/free-regular-svg-icons';\n\nexport type Props = {|\n  filename: ?string,\n  mimeType: ?string,\n  big: boolean,\n  // Size used for big icon\n  size: number,\n|};\n\n// Partially based on:\n// https://stackoverflow.com/a/4212908/2570866\n\nconst wordMimeTypes = [\n  // Microsoft Word\n  // .doc .dot\n  'application/msword',\n  // .doc .dot\n  'application/msword-template',\n  // .docx\n  'application/vnd.openxmlformats-officedocument.wordprocessingml.document',\n  // .dotx (no test)\n  'application/vnd.openxmlformats-officedocument.wordprocessingml.template',\n  // .docm\n  'application/vnd.ms-word.document.macroEnabled.12',\n  // .dotm (no test)\n  'application/vnd.ms-word.template.macroEnabled.12',\n\n  // LibreOffice/OpenOffice Writer\n  // .odt\n  'application/vnd.oasis.opendocument.text',\n  // .ott\n  'application/vnd.oasis.opendocument.text-template',\n  // .fodt\n  'application/vnd.oasis.opendocument.text-flat-xml',\n  // .uot\n  // NOTE: firefox doesn't know mimetype so maybe ignore\n];\n\nconst excelMimeTypes = [\n  // .csv\n  'text/csv',\n  // TODO: maybe more data files\n\n  // Microsoft Excel\n  // .xls .xlt .xla (no test for .xla)\n  'application/vnd.ms-excel',\n  // .xlsx\n  'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\n  // .xltx (no test)\n  'application/vnd.openxmlformats-officedocument.spreadsheetml.template',\n  // .xlsm\n  'application/vnd.ms-excel.sheet.macroEnabled.12',\n  // .xltm (no test)\n  'application/vnd.ms-excel.template.macroEnabled.12',\n  // .xlam (no test)\n  'application/vnd.ms-excel.addin.macroEnabled.12',\n  // .xlsb (no test)\n  'application/vnd.ms-excel.addin.macroEnabled.12',\n\n  // LibreOffice/OpenOffice Calc\n  // .ods\n  'application/vnd.oasis.opendocument.spreadsheet',\n  // .ots\n  'application/vnd.oasis.opendocument.spreadsheet-template',\n  // .fods\n  'application/vnd.oasis.opendocument.spreadsheet-flat-xml',\n  // .uos\n  // NOTE: firefox doesn't know mimetype so maybe ignore\n];\n\nconst powerpointMimeTypes = [\n  // Microsoft Word\n  // .ppt .pot .pps .ppa (no test for .ppa)\n  'application/vnd.ms-powerpoint',\n  // .pptx\n  'application/vnd.openxmlformats-officedocument.presentationml.presentation',\n  // .potx (no test)\n  'application/vnd.openxmlformats-officedocument.presentationml.template',\n  // .ppsx\n  'application/vnd.openxmlformats-officedocument.presentationml.slideshow',\n  // .ppam\n  'application/vnd.ms-powerpoint.addin.macroEnabled.12',\n  // .pptm\n  'application/vnd.ms-powerpoint.presentation.macroEnabled.12',\n  // .potm\n  'application/vnd.ms-powerpoint.template.macroEnabled.12',\n  // .ppsm\n  'application/vnd.ms-powerpoint.slideshow.macroEnabled.12',\n\n  // LibreOffice/OpenOffice Writer\n  // .odp\n  'application/vnd.oasis.opendocument.presentation',\n  // .otp\n  'application/vnd.oasis.opendocument.presentation-template',\n  // .fodp\n  'application/vnd.oasis.opendocument.presentation-flat-xml',\n  // .uop\n  // NOTE: firefox doesn't know mimetype so maybe ignore\n];\n\nconst archiveFileTypes = [\n  // .zip\n  'application/zip',\n  // .z7\n  'application/x-7z-compressed',\n  // .ar\n  'application/x-archive',\n  // .tar\n  'application/x-tar',\n  // .tar.gz\n  'application/gzip',\n  // .tar.Z\n  'application/x-compress',\n  // .tar.bz2\n  'application/x-bzip',\n  // .tar.lz\n  'application/x-lzip',\n  // .tar.lz4\n  'application/x-lz4',\n  // .tar.lzma\n  'application/x-lzma',\n  // .tar.lzo (no test)\n  'application/x-lzop',\n  // .tar.xz\n  'application/x-xz',\n  // .war\n  'application/x-webarchive',\n  // .rar\n  'application/vnd.rar',\n];\n\nconst codeFileTypes = [\n  // .html .htm\n  'text/html',\n  // .css\n  'text/css',\n  // .js\n  'application/x-javascript',\n  // .json\n  'application/json',\n  // .py\n  'text/x-python',\n  // .go\n  'text/x-go',\n  // .c\n  'text/x-csrc',\n  // .cpp\n  'text/x-c++src',\n  // .rb\n  'application/x-ruby',\n  // .rust\n  'text/rust',\n  // .java\n  'text/x-java',\n  // .php\n  'application/x-php',\n  // .cs\n  'text/x-csharp',\n  // .scala\n  'text/x-scala',\n  // .erl\n  'text/x-erlang',\n  // .sh\n  'application/x-shellscript',\n];\n\nconst mimeTypeToIconMap: { [string]: string } = {\n  'application/pdf': faFilePdf,\n};\n\nconst mimeTypeToFallBackStyle: { [string]: {} } = {\n  'application/pdf': defaultStyles.pdf,\n};\n\nfor (const type of wordMimeTypes) {\n  mimeTypeToIconMap[type] = faFileWord;\n  mimeTypeToFallBackStyle[type] = { type: 'document' };\n}\n\nfor (const type of excelMimeTypes) {\n  mimeTypeToIconMap[type] = faFileExcel;\n  mimeTypeToFallBackStyle[type] = { type: 'spreadsheet' };\n}\n\nfor (const type of powerpointMimeTypes) {\n  mimeTypeToIconMap[type] = faFilePowerpoint;\n  mimeTypeToFallBackStyle[type] = { type: 'presentation' };\n}\n\nfor (const type of archiveFileTypes) {\n  mimeTypeToIconMap[type] = faFileArchive;\n  mimeTypeToFallBackStyle[type] = { type: 'compressed' };\n}\n\nfor (const type of codeFileTypes) {\n  mimeTypeToIconMap[type] = faFileCode;\n  mimeTypeToFallBackStyle[type] = { type: 'code' };\n}\n\nfunction mimeTypeToIcon(mimeType: ?string) {\n  if (mimeType == null) {\n    return faFile;\n  }\n\n  const icon = mimeTypeToIconMap[mimeType];\n  if (icon) {\n    return icon;\n  }\n  if (mimeType.startsWith('audio/')) {\n    return faFileAudio;\n  }\n  if (mimeType.startsWith('video/')) {\n    return faFileVideo;\n  }\n  if (mimeType.startsWith('image/')) {\n    return faFileImage;\n  }\n  if (mimeType.startsWith('text/')) {\n    return faFileAlt;\n  }\n  return faFile;\n}\n\nfunction mimeTypeToStyle(mimeType: ?string) {\n  if (mimeType == null) {\n    return {};\n  }\n\n  const style = mimeTypeToStyle[mimeType];\n  if (style) {\n    return style;\n  }\n  if (mimeType.startsWith('audio/')) {\n    return { type: 'audio' };\n  }\n  if (mimeType.startsWith('video/')) {\n    return { type: 'video' };\n  }\n  if (mimeType.startsWith('image/')) {\n    return { type: 'image' };\n  }\n  if (mimeType.startsWith('text/')) {\n    return { type: 'document' };\n  }\n  return {};\n}\n\nfunction fileExtension(filename: ?string) {\n  const defaultReturn = {\n    full: '',\n    end: '',\n  };\n  if (filename == null) {\n    return defaultReturn;\n  }\n\n  // source: https://stackoverflow.com/a/1203361/2570866\n  const a = filename.split('.');\n  if (a.length === 1 || (a[0] === '' && a.length === 2)) {\n    return defaultReturn;\n  }\n  const lastExtension = a.pop().toLowerCase();\n  if (a.length === 1 || (a[0] === '' && a.length === 2)) {\n    return { end: lastExtension, full: lastExtension };\n  }\n  const secondToLastExtension = a.pop().toLowerCase();\n  if (secondToLastExtension !== 'tar') {\n    return { end: lastExtension, full: lastExtension };\n  }\n  return {\n    full: secondToLastExtension + '.' + lastExtension,\n    end: lastExtension,\n  };\n}\n\n/**\n * @example ./examples/FileIcon.md\n */\nexport default class FileIcon extends React.Component<Props> {\n  static defaultProps = {\n    big: false,\n    size: 50,\n  };\n  render() {\n    const { size, big, filename, mimeType } = this.props;\n    if (big) {\n      const extension = fileExtension(filename);\n      let style = defaultStyles[extension.end];\n      if (!style) {\n        style = mimeTypeToStyle(style);\n      }\n      return <BigFileIcon extension={extension.full} {...style} size={size} />;\n    }\n    return (\n      <FontAwesomeIcon\n        className=\"rfu-file-icon--small\"\n        icon={mimeTypeToIcon(mimeType)}\n      />\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\n\ntype Props = {|\n  color?: string,\n  backgroundColor?: string,\n  size: number,\n  width: number,\n|};\n\n/**\n * Component is described here.\n *\n * @example ./examples/LoadingIndicator.md\n */\nexport default class LoadingIndicator extends React.PureComponent<Props> {\n  static defaultProps = {\n    size: 20,\n    width: 2,\n  };\n  render() {\n    return (\n      <div\n        className=\"rfu-loading-indicator__spinner\"\n        style={{\n          margin: '0 auto',\n          borderColor: this.props.backgroundColor\n            ? this.props.backgroundColor\n            : '',\n          borderTopColor: this.props.color ? this.props.color : '',\n          width: this.props.size ? this.props.size : '',\n          height: this.props.size ? this.props.size : '',\n          borderWidth: this.props.width ? this.props.width : '',\n        }}\n      />\n    );\n  }\n}\n","// @flow\nimport React from 'react';\nimport FileIcon from './FileIcon';\nimport LoadingIndicator from './LoadingIndicator';\nimport type { FileUpload } from '../types';\n\ntype Props = {|\n  uploads?: FileUpload[],\n  handleRemove?: (id: string) => mixed,\n  handleRetry?: (id: string) => mixed,\n  handleFiles?: (files: File[]) => mixed,\n|};\n\n/**\n * Component that displays files which are being uploaded\n *\n * @example ./examples/FilePreviewer.md\n */\nexport default class FilePreviewer extends React.Component<Props> {\n  render() {\n    const { uploads, handleRemove, handleRetry } = this.props;\n    return (\n      <div className=\"rfu-file-previewer\">\n        <ol>\n          {uploads &&\n            uploads.map((upload) => (\n              <li\n                key={upload.id}\n                className={`rfu-file-previewer__file ${\n                  upload.state === 'uploading'\n                    ? 'rfu-file-previewer__file--uploading'\n                    : ''\n                } ${\n                  upload.state === 'failed'\n                    ? 'rfu-file-previewer__file--failed'\n                    : ''\n                }`}\n              >\n                <FileIcon\n                  mimeType={upload.file.type}\n                  filename={upload.file.name}\n                />\n\n                <a href={upload.url} download>\n                  {upload.file.name}\n                  {upload.state === 'failed' && (\n                    <React.Fragment>\n                      <div\n                        className=\"rfu-file-previewer__failed\"\n                        onClick={handleRetry && (() => handleRetry(upload.id))}\n                      >\n                        failed\n                      </div>\n                      <div\n                        className=\"rfu-file-previewer__retry\"\n                        onClick={handleRetry && (() => handleRetry(upload.id))}\n                      >\n                        retry\n                      </div>\n                    </React.Fragment>\n                  )}\n                </a>\n\n                <span\n                  className=\"rfu-file-previewer__close-button\"\n                  onClick={handleRemove && (() => handleRemove(upload.id))}\n                >\n                  âœ˜\n                </span>\n                {upload.state === 'uploading' && (\n                  <div className=\"rfu-file-previewer__loading-indicator\">\n                    <LoadingIndicator />\n                  </div>\n                )}\n              </li>\n            ))}\n        </ol>\n      </div>\n    );\n  }\n}\n","//@flow\nimport * as React from 'react';\n\n/**\n * An icon of a paperclip, which is used as the default icon for FileUploadButton\n *\n * @example ./examples/AttachmentIcon.md\n */\nexport default class AttachmentIcon extends React.PureComponent<{}> {\n  render() {\n    return (\n      <svg\n        xmlns=\"http://www.w3.org/2000/svg\"\n        width=\"24\"\n        height=\"20\"\n        viewBox=\"0 0 24 24\"\n      >\n        <path d=\"M16.5 6v11.5c0 2.21-1.79 4-4 4s-4-1.79-4-4V5a2.5 2.5 0 0 1 5 0v10.5c0 .55-.45 1-1 1s-1-.45-1-1V6H10v9.5a2.5 2.5 0 0 0 5 0V5c0-2.21-1.79-4-4-4S7 2.79 7 5v12.5c0 3.04 2.46 5.5 5.5 5.5s5.5-2.46 5.5-5.5V6h-1.5z\" />\n        <path d=\"M0 0h24v24H0z\" fill=\"none\" />\n      </svg>\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport AttachmentIcon from './AttachmentIcon';\n\ntype Props = {|\n  handleFiles: (Blob[]) => mixed,\n  multiple: boolean,\n  children: React.Node,\n  disabled: boolean,\n  accepts?: string | string[],\n|};\n\n/**\n * Component is described here.\n *\n * @example ./examples/FileUploadButton.md\n */\nexport default class FileUploadButton extends React.PureComponent<Props> {\n  static defaultProps = {\n    multiple: false,\n    children: <AttachmentIcon />,\n    disabled: false,\n  };\n\n  render() {\n    return (\n      <div className=\"rfu-file-upload-button\">\n        <label>\n          <input\n            type=\"file\"\n            className=\"rfu-file-input\"\n            onChange={(event) => {\n              this.props.handleFiles(event.currentTarget.files);\n            }}\n            multiple={this.props.multiple}\n            disabled={this.props.disabled}\n            accept={\n              this.props.accepts && typeof this.props.accepts === 'object'\n                ? this.props.accepts.join(',')\n                : this.props.accepts\n            }\n          />\n          {this.props.children}\n        </label>\n      </div>\n    );\n  }\n}\n","// @flow\nimport type { FileLike } from './types';\n// import type { UserResponse } from 'getstream';\n\n// https://stackoverflow.com/a/6860916/2570866\nexport function generateRandomId() {\n  // prettier-ignore\n  return (S4()+S4()+\"-\"+S4()+\"-\"+S4()+\"-\"+S4()+\"-\"+S4()+S4()+S4());\n}\n\nfunction S4() {\n  return (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);\n}\n\nexport function dataTransferItemsHaveFiles(\n  items: ?(DataTransferItem[]),\n): boolean {\n  if (!items || !items.length) {\n    return false;\n  }\n  for (const item of items) {\n    if (item.kind === 'file' || item.type === 'text/html') {\n      return true;\n    }\n  }\n  return false;\n}\n\nexport async function dataTransferItemsToFiles(\n  items: ?(DataTransferItem[]),\n): Promise<FileLike[]> {\n  if (!items || !items.length) {\n    return [];\n  }\n  const fileLikes = [];\n  const blobPromises = [];\n  for (const item of items) {\n    if (item.kind === 'file') {\n      const file = item.getAsFile();\n      if (file) {\n        fileLikes.push(file);\n      }\n    }\n  }\n  // If there are files inside the DataTransferItem prefer those\n  if (fileLikes.length) {\n    return fileLikes;\n  }\n\n  // Otherwise extract images from html\n  const parser = new DOMParser();\n  for (const item of items) {\n    if (item.type === 'text/html') {\n      blobPromises.push(\n        new Promise((accept) => {\n          item.getAsString(async (s) => {\n            const doc = parser.parseFromString(s, 'text/html');\n            const imageTags = doc.getElementsByTagName('img');\n\n            const imagePromises = [];\n            for (const tag of imageTags) {\n              if (!tag.src) {\n                continue;\n              }\n              imagePromises.push(\n                (async () => {\n                  let res;\n                  try {\n                    res = await fetch(tag.src);\n                  } catch (e) {\n                    return;\n                  }\n                  const contentType =\n                    res.headers.get('Content-type') ||\n                    'application/octet-stream';\n                  const buf = await res.arrayBuffer();\n                  const blob = new Blob([buf], { type: contentType });\n                  fileLikes.push(blob);\n                })(),\n              );\n            }\n            await Promise.all(imagePromises);\n            accept();\n          });\n        }),\n      );\n    }\n  }\n  await Promise.all(blobPromises);\n  return fileLikes;\n}\n","// @flow\nimport * as React from 'react';\nimport Dropzone from 'react-dropzone';\nimport { dataTransferItemsToFiles } from '../utils';\n\nimport type { FileLike } from '../types';\n\ntype Props = {|\n  children?: React.Node,\n  handleFiles?: (files: $ReadOnlyArray<FileLike>) => mixed,\n  /** Allow drag 'n' drop (or selection from the file dialog) of multiple files */\n  multiple: boolean,\n  /** Enable/disable the dropzone */\n  disabled: boolean,\n  /**\n   * Set accepted file types. See https://github.com/okonet/attr-accept for more information. Keep in mind that mime type determination is not reliable across platforms. CSV files, for example, are reported as text/plain under macOS but as application/vnd.ms-excel under Windows. In some cases there might not be a mime type set at all.\n   *\n   * One of type: `string, string[]`\n   */\n  accept?: string | string[],\n|};\n\nexport default class ImageDropzone extends React.PureComponent<Props> {\n  static defaultProps = {\n    multiple: true,\n    disabled: false,\n  };\n\n  _handleFiles = async (accepted: File[], rejected: DataTransferItem[]) => {\n    const { handleFiles } = this.props;\n    if (!handleFiles) {\n      return;\n    }\n\n    if (accepted && accepted.length) {\n      // Normal case\n      return handleFiles(accepted);\n    }\n\n    const fileLikes = await dataTransferItemsToFiles(rejected);\n\n    // Website-to-website image drag+drop\n    if (fileLikes.length) {\n      return handleFiles(fileLikes);\n    }\n  };\n  render() {\n    const { handleFiles, children } = this.props;\n    return (\n      <Dropzone\n        onDrop={handleFiles && this._handleFiles}\n        disableClick\n        disablePreview\n        //style={{position: 'absolute', height: '100%', width: '100%', zIndex: -1000000}}\n        className=\"rfu-dropzone\"\n        style={{ position: 'relative' }}\n        accept={this.props.accept}\n        multiple={this.props.multiple}\n        disabled={this.props.disabled}\n        acceptClassName=\"rfu-dropzone--accept\"\n        rejectClassName=\"rfu-dropzone--reject\"\n      >\n        <div className=\"rfu-dropzone__notifier\" style={{}}>\n          <div className=\"rfu-dropzone__inner\">\n            <svg\n              width=\"41\"\n              height=\"41\"\n              viewBox=\"0 0 41 41\"\n              xmlns=\"http://www.w3.org/2000/svg\"\n            >\n              <path\n                d=\"M40.517 28.002V3.997c0-2.197-1.808-3.992-4.005-3.992H12.507a4.004 4.004 0 0 0-3.992 3.993v24.004a4.004 4.004 0 0 0 3.992 3.993h24.005c2.197 0 4.005-1.795 4.005-3.993zm-22.002-7.997l4.062 5.42 5.937-7.423 7.998 10H12.507l6.008-7.997zM.517 8.003V36c0 2.198 1.795 4.005 3.993 4.005h27.997V36H4.51V8.002H.517z\"\n                fill=\"#000\"\n                fillRule=\"nonzero\"\n              />\n            </svg>\n            <p>Drag your files here to add to your post</p>\n          </div>\n        </div>\n        {children}\n      </Dropzone>\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\n\nexport type Props = {|\n  children?: React.Node,\n  onClick?: (e: SyntheticEvent<>) => mixed,\n|};\n\n/**\n * This is simply a button wrapper, add's a div with `role=\"button\"` and a onClick\n * @example ./examples/IconButton.md\n */\nexport default class IconButton extends React.Component<Props> {\n  render() {\n    const { onClick, children } = this.props;\n    return (\n      <div className=\"rfu-icon-button\" role=\"button\" onClick={onClick}>\n        {children}\n      </div>\n    );\n  }\n}\n","export default \"data:image/png;base64,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\"","// @flow\n\nimport React from 'react';\nimport IconButton from './IconButton';\nimport placeholder from '../images/placeholder-generic.png';\n\nexport type Props = {|\n  handleClose?: (id?: string) => mixed,\n  size: number,\n  image: string,\n  id?: string,\n|};\n\n/**\n * Component is described here.\n *\n * @example ./examples/Thumbnail.md\n */\nexport default class Thumbnail extends React.PureComponent<Props> {\n  static defaultProps = {\n    size: 100,\n    image: placeholder,\n  };\n\n  _handleClose = () => {\n    if (this.props.handleClose) {\n      this.props.handleClose(this.props.id);\n    }\n  };\n\n  render() {\n    const { image, handleClose, size } = this.props;\n    const svg =\n      '<svg width=\"28\" height=\"28\" viewBox=\"0 0 28 28\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"><defs><path d=\"M465 5c5.53 0 10 4.47 10 10s-4.47 10-10 10-10-4.47-10-10 4.47-10 10-10zm3.59 5L465 13.59 461.41 10 460 11.41l3.59 3.59-3.59 3.59 1.41 1.41 3.59-3.59 3.59 3.59 1.41-1.41-3.59-3.59 3.59-3.59-1.41-1.41z\" id=\"b\"/><filter x=\"-30%\" y=\"-30%\" width=\"160%\" height=\"160%\" filterUnits=\"objectBoundingBox\" id=\"a\"><feOffset in=\"SourceAlpha\" result=\"shadowOffsetOuter1\"/><feGaussianBlur stdDeviation=\"2\" in=\"shadowOffsetOuter1\" result=\"shadowBlurOuter1\"/><feColorMatrix values=\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.5 0\" in=\"shadowBlurOuter1\"/></filter></defs><g transform=\"translate(-451 -1)\" fill-rule=\"nonzero\" fill=\"none\"><use fill=\"#000\" filter=\"url(#a)\" xlink:href=\"#b\"/><use fill=\"#FFF\" fill-rule=\"evenodd\" xlink:href=\"#b\"/></g></svg>';\n    return (\n      <div\n        className=\"rfu-thumbnail__wrapper\"\n        style={{ width: size, height: size }}\n      >\n        <div className=\"rfu-thumbnail__overlay\">\n          {handleClose ? (\n            <IconButton onClick={this._handleClose}>\n              <div dangerouslySetInnerHTML={{ __html: svg }} />\n            </IconButton>\n          ) : null}\n        </div>\n        <img src={image} className=\"rfu-thumbnail__image\" alt=\"\" />\n      </div>\n    );\n  }\n}\n","//@flow\nimport * as React from 'react';\n\n/**\n * An icon of a picture, which is used as the default icon for ImageUploadButton\n *\n * @example ./examples/PictureIcon.md\n */\nexport default class PictureIcon extends React.PureComponent<{}> {\n  render() {\n    return (\n      <svg\n        width=\"20\"\n        height=\"20\"\n        viewBox=\"0 0 20 20\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n      >\n        <path\n          d=\"M2 0h16a2 2 0 0 1 2 2v16a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2zm3 2a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5zM2 16v2h16v-6l-3-3-6 6-3-3-4 4z\"\n          fillRule=\"nonzero\"\n        />\n      </svg>\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport PictureIcon from './PictureIcon';\n\ntype Props = {|\n  handleFiles: (File[]) => mixed,\n  multiple: boolean,\n  disabled: boolean,\n  children: React.Node,\n|};\n\n/**\n * Component is described here.\n *\n * @example ./examples/ImageUploadButton.md\n */\nexport default class ImageUploadButton extends React.PureComponent<Props> {\n  static defaultProps = {\n    multiple: false,\n    disabled: false,\n    children: <PictureIcon />,\n  };\n  render() {\n    return (\n      <div className=\"rfu-image-upload-button\">\n        <label>\n          <input\n            type=\"file\"\n            className=\"rfu-image-input\"\n            onChange={(event) => {\n              this.props.handleFiles(event.currentTarget.files);\n            }}\n            accept=\"image/*\"\n            multiple={this.props.multiple}\n            disabled={this.props.disabled}\n          />\n          {this.props.children}\n        </label>\n      </div>\n    );\n  }\n}\n","// @flow\nimport React from 'react';\nimport ImageUploadButton from './ImageUploadButton';\n\nexport type Props = {|\n  handleFiles: (files: File[]) => mixed,\n  multiple: boolean,\n|};\n\n/**\n * Component is described here.\n *\n * @example ./examples/ThumbnailPlaceholder.md\n */\nexport default class ThumbnailPlaceholder extends React.Component<Props> {\n  static defaultProps = {\n    multiple: false,\n  };\n  render() {\n    const { handleFiles, multiple } = this.props;\n    return (\n      <ImageUploadButton handleFiles={handleFiles} multiple={multiple}>\n        <div role=\"button\" className=\"rfu-thumbnail-placeholder\">\n          <svg\n            width=\"14\"\n            height=\"15\"\n            viewBox=\"0 0 14 15\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n          >\n            <path\n              d=\"M14 8.998H8v6H6v-6H0v-2h6v-6h2v6h6z\"\n              fill=\"#A0B2B8\"\n              fillRule=\"nonzero\"\n            />\n          </svg>\n        </div>\n      </ImageUploadButton>\n    );\n  }\n}\n","// @flow\nimport React from 'react';\nimport Thumbnail from './Thumbnail';\nimport LoadingIndicator from './LoadingIndicator';\nimport ThumbnailPlaceholder from './ThumbnailPlaceholder';\nimport type { ImageUpload } from '../types';\n\ntype Props = {|\n  /** The list of image uploads that should be displayed */\n  imageUploads?: ImageUpload[],\n  /** A callback to call when the remove icon is clicked */\n  handleRemove: (id: string) => mixed,\n  /** A callback to call when the retry icon is clicked */\n  handleRetry: (id: string) => mixed,\n  /** A callback to call with newly selected files. If this is not provided no\n   * `ThumbnailPlaceholder` will be displayed.\n   */\n  handleFiles?: (files: File[]) => mixed,\n  /** Allow drag 'n' drop (or selection from the file dialog) of multiple files */\n  multiple?: boolean,\n  disabled: boolean,\n|};\n\n/**\n * Component is described here.\n *\n * @example ./examples/ImagePreviewer.md\n */\nexport default class ImagePreviewer extends React.Component<Props> {\n  static defaultProps = {\n    multiple: true,\n    disabled: false,\n  };\n\n  _handleClose = (id?: string) => {\n    if (this.props.handleRemove) {\n      if (id == null) {\n        console.warn(\"id of closed image was undefined, this shouldn't happen\");\n        return;\n      }\n      this.props.handleRemove(id);\n    }\n  };\n\n  render() {\n    const { imageUploads, handleRemove, handleRetry, handleFiles } = this.props;\n    return (\n      <div className=\"rfu-image-previewer\">\n        {imageUploads &&\n          imageUploads.map((image) => (\n            <div\n              key={image.id}\n              className={`rfu-image-previewer__image${\n                image.state === 'finished'\n                  ? ' rfu-image-previewer__image--loaded'\n                  : ''\n              }`}\n            >\n              {image.state === 'failed' && (\n                <div\n                  className=\"rfu-image-previewer__retry\"\n                  dangerouslySetInnerHTML={{\n                    __html:\n                      '<svg width=\"22\" height=\"20\" viewBox=\"0 0 22 20\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M20 5.535V2a1 1 0 0 1 2 0v6a1 1 0 0 1-1 1h-6a1 1 0 0 1 0-2h3.638l-2.975-2.653a8 8 0 1 0 1.884 8.32 1 1 0 1 1 1.886.666A10 10 0 1 1 5.175 1.245c3.901-2.15 8.754-1.462 11.88 1.667L20 5.535z\" fill=\"#FFF\" fill-rule=\"nonzero\"/></svg>',\n                  }}\n                  onClick={handleRetry && (() => handleRetry(image.id))}\n                />\n              )}\n\n              <Thumbnail\n                handleClose={handleRemove && this._handleClose}\n                image={image.previewUri || image.url}\n                id={image.id}\n              />\n              {image.state === 'uploading' && (\n                <LoadingIndicator\n                  backgroundColor=\"rgba(255,255,255,0.1)\"\n                  color=\"rgba(255,255,255,0.7)\"\n                />\n              )}\n            </div>\n          ))}\n        {handleFiles && !this.props.disabled && (\n          <ThumbnailPlaceholder\n            handleFiles={handleFiles}\n            multiple={this.props.multiple}\n          />\n        )}\n      </div>\n    );\n  }\n}\n"],"names":["wordMimeTypes","excelMimeTypes","powerpointMimeTypes","archiveFileTypes","codeFileTypes","mimeTypeToIconMap","faFilePdf","mimeTypeToFallBackStyle","defaultStyles","pdf","type","faFileWord","faFileExcel","faFilePowerpoint","faFileArchive","faFileCode","mimeTypeToIcon","mimeType","faFile","icon","startsWith","faFileAudio","faFileVideo","faFileImage","faFileAlt","mimeTypeToStyle","style","fileExtension","filename","defaultReturn","full","end","a","split","length","lastExtension","pop","toLowerCase","secondToLastExtension","FileIcon","props","size","big","extension","React.createElement","React","LoadingIndicator","margin","borderColor","backgroundColor","borderTopColor","color","width","height","borderWidth","FilePreviewer","uploads","handleRemove","handleRetry","map","upload","id","state","file","name","url","Component","AttachmentIcon","FileUploadButton","event","handleFiles","currentTarget","files","multiple","disabled","accepts","join","children","dataTransferItemsHaveFiles","items","item","kind","dataTransferItemsToFiles","fileLikes","blobPromises","getAsFile","push","parser","DOMParser","Promise","accept","getAsString","s","doc","parseFromString","imageTags","getElementsByTagName","imagePromises","tag","src","fetch","res","contentType","headers","get","arrayBuffer","buf","blob","Blob","all","ImageDropzone","accepted","rejected","_handleFiles","position","IconButton","onClick","Thumbnail","handleClose","image","svg","_handleClose","__html","PureComponent","placeholder","PictureIcon","ImageUploadButton","ThumbnailPlaceholder","ImagePreviewer","console","warn","imageUploads","previewUri"],"mappings":"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"}