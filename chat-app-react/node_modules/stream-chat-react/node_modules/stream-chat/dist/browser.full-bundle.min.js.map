{"version":3,"file":"browser.full-bundle.min.js","sources":["../node_modules/@babel/runtime/helpers/extends.js","../node_modules/@babel/runtime/helpers/arrayWithHoles.js","../node_modules/@babel/runtime/helpers/iterableToArrayLimit.js","../node_modules/@babel/runtime/helpers/nonIterableRest.js","../node_modules/@babel/runtime/helpers/slicedToArray.js","../node_modules/@babel/runtime/helpers/arrayWithoutHoles.js","../node_modules/@babel/runtime/helpers/iterableToArray.js","../node_modules/@babel/runtime/helpers/nonIterableSpread.js","../node_modules/@babel/runtime/helpers/toConsumableArray.js","../node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js","../node_modules/@babel/runtime/helpers/objectWithoutProperties.js","../node_modules/@babel/runtime/helpers/defineProperty.js","../node_modules/@babel/runtime/helpers/objectSpread.js","../node_modules/regenerator-runtime/runtime.js","../node_modules/regenerator-runtime/runtime-module.js","../node_modules/@babel/runtime/regenerator/index.js","../node_modules/@babel/runtime/helpers/asyncToGenerator.js","../node_modules/@babel/runtime/helpers/classCallCheck.js","../node_modules/@babel/runtime/helpers/createClass.js","../node_modules/@babel/runtime/helpers/typeof.js","../node_modules/axios/lib/helpers/bind.js","../node_modules/axios/lib/utils.js","../node_modules/axios/node_modules/is-buffer/index.js","../node_modules/axios/lib/core/createError.js","../node_modules/axios/lib/core/enhanceError.js","../node_modules/axios/lib/helpers/buildURL.js","../node_modules/axios/lib/helpers/parseHeaders.js","../node_modules/axios/lib/helpers/isURLSameOrigin.js","../node_modules/axios/lib/helpers/cookies.js","../node_modules/axios/lib/adapters/xhr.js","../node_modules/axios/lib/core/settle.js","../node_modules/axios/lib/defaults.js","../node_modules/axios/lib/helpers/normalizeHeaderName.js","../node_modules/axios/lib/core/InterceptorManager.js","../node_modules/axios/lib/core/transformData.js","../node_modules/axios/lib/cancel/isCancel.js","../node_modules/axios/lib/core/dispatchRequest.js","../node_modules/axios/lib/helpers/combineURLs.js","../node_modules/axios/lib/helpers/isAbsoluteURL.js","../node_modules/axios/lib/core/Axios.js","../node_modules/axios/lib/cancel/Cancel.js","../node_modules/axios/lib/cancel/CancelToken.js","../node_modules/axios/lib/axios.js","../node_modules/axios/lib/helpers/spread.js","../node_modules/uuid/lib/bytesToUuid.js","../node_modules/axios/index.js","../node_modules/uuid/lib/rng-browser.js","../node_modules/uuid/v4.js","../node_modules/seamless-immutable/seamless-immutable.development.js","../src/channel_state.js","../src/events.js","../src/utils.js","../src/channel.js","../src/client_state.js","../node_modules/isomorphic-ws/browser.js","../src/connection.js","../jsonwebtoken","../crypto","../src/signing.js","../http","../https","../node_modules/cross-fetch/dist/browser-ponyfill.js","../node_modules/form-data/lib/browser.js","../src/client.js"],"sourcesContent":["function _extends() {\n  module.exports = _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nmodule.exports = _extends;","function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nmodule.exports = _arrayWithHoles;","function _iterableToArrayLimit(arr, i) {\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nmodule.exports = _iterableToArrayLimit;","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\nmodule.exports = _nonIterableRest;","var arrayWithHoles = require(\"./arrayWithHoles\");\n\nvar iterableToArrayLimit = require(\"./iterableToArrayLimit\");\n\nvar nonIterableRest = require(\"./nonIterableRest\");\n\nfunction _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || nonIterableRest();\n}\n\nmodule.exports = _slicedToArray;","function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n\nmodule.exports = _arrayWithoutHoles;","function _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nmodule.exports = _iterableToArray;","function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nmodule.exports = _nonIterableSpread;","var arrayWithoutHoles = require(\"./arrayWithoutHoles\");\n\nvar iterableToArray = require(\"./iterableToArray\");\n\nvar nonIterableSpread = require(\"./nonIterableSpread\");\n\nfunction _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || nonIterableSpread();\n}\n\nmodule.exports = _toConsumableArray;","function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nmodule.exports = _objectWithoutPropertiesLoose;","var objectWithoutPropertiesLoose = require(\"./objectWithoutPropertiesLoose\");\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nmodule.exports = _objectWithoutProperties;","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;","var defineProperty = require(\"./defineProperty\");\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    var ownKeys = Object.keys(source);\n\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n\n    ownKeys.forEach(function (key) {\n      defineProperty(target, key, source[key]);\n    });\n  }\n\n  return target;\n}\n\nmodule.exports = _objectSpread;","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n!(function(global) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  var inModule = typeof module === \"object\";\n  var runtime = global.regeneratorRuntime;\n  if (runtime) {\n    if (inModule) {\n      // If regeneratorRuntime is defined globally and we're in a module,\n      // make the exports object identical to regeneratorRuntime.\n      module.exports = runtime;\n    }\n    // Don't bother evaluating the rest of this file if the runtime was\n    // already defined globally.\n    return;\n  }\n\n  // Define the runtime globally (as expected by generated code) as either\n  // module.exports (if we're in a module) or a new, empty object.\n  runtime = global.regeneratorRuntime = inModule ? module.exports : {};\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  runtime.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunctionPrototype[toStringTagSymbol] =\n    GeneratorFunction.displayName = \"GeneratorFunction\";\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      prototype[method] = function(arg) {\n        return this._invoke(method, arg);\n      };\n    });\n  }\n\n  runtime.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  runtime.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      if (!(toStringTagSymbol in genFun)) {\n        genFun[toStringTagSymbol] = \"GeneratorFunction\";\n      }\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  runtime.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return Promise.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return Promise.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new Promise(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  runtime.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  runtime.async = function(innerFn, outerFn, self, tryLocsList) {\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList)\n    );\n\n    return runtime.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        if (delegate.iterator.return) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  Gp[toStringTagSymbol] = \"Generator\";\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  runtime.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  runtime.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n})(\n  // In sloppy mode, unbound `this` refers to the global object, fallback to\n  // Function constructor if we're in global strict mode. That is sadly a form\n  // of indirect eval which violates Content Security Policy.\n  (function() {\n    return this || (typeof self === \"object\" && self);\n  })() || Function(\"return this\")()\n);\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n// This method of obtaining a reference to the global object needs to be\n// kept identical to the way it is obtained in runtime.js\nvar g = (function() {\n  return this || (typeof self === \"object\" && self);\n})() || Function(\"return this\")();\n\n// Use `getOwnPropertyNames` because not all browsers support calling\n// `hasOwnProperty` on the global `self` object in a worker. See #183.\nvar hadRuntime = g.regeneratorRuntime &&\n  Object.getOwnPropertyNames(g).indexOf(\"regeneratorRuntime\") >= 0;\n\n// Save the old regeneratorRuntime in case it needs to be restored later.\nvar oldRuntime = hadRuntime && g.regeneratorRuntime;\n\n// Force reevalutation of runtime.js.\ng.regeneratorRuntime = undefined;\n\nmodule.exports = require(\"./runtime\");\n\nif (hadRuntime) {\n  // Restore the original runtime.\n  g.regeneratorRuntime = oldRuntime;\n} else {\n  // Remove the global property added by runtime.js.\n  try {\n    delete g.regeneratorRuntime;\n  } catch(e) {\n    g.regeneratorRuntime = undefined;\n  }\n}\n","module.exports = require(\"regenerator-runtime\");\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n\nmodule.exports = _asyncToGenerator;","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","function _typeof2(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof2(obj); }\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && _typeof2(Symbol.iterator) === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return _typeof2(obj);\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : _typeof2(obj);\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;","'use strict';\n\nmodule.exports = function bind(fn, thisArg) {\n  return function wrap() {\n    var args = new Array(arguments.length);\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i];\n    }\n    return fn.apply(thisArg, args);\n  };\n};\n","'use strict';\n\nvar bind = require('./helpers/bind');\nvar isBuffer = require('is-buffer');\n\n/*global toString:true*/\n\n// utils is a library of generic helper functions non-specific to axios\n\nvar toString = Object.prototype.toString;\n\n/**\n * Determine if a value is an Array\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an Array, otherwise false\n */\nfunction isArray(val) {\n  return toString.call(val) === '[object Array]';\n}\n\n/**\n * Determine if a value is an ArrayBuffer\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an ArrayBuffer, otherwise false\n */\nfunction isArrayBuffer(val) {\n  return toString.call(val) === '[object ArrayBuffer]';\n}\n\n/**\n * Determine if a value is a FormData\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an FormData, otherwise false\n */\nfunction isFormData(val) {\n  return (typeof FormData !== 'undefined') && (val instanceof FormData);\n}\n\n/**\n * Determine if a value is a view on an ArrayBuffer\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a view on an ArrayBuffer, otherwise false\n */\nfunction isArrayBufferView(val) {\n  var result;\n  if ((typeof ArrayBuffer !== 'undefined') && (ArrayBuffer.isView)) {\n    result = ArrayBuffer.isView(val);\n  } else {\n    result = (val) && (val.buffer) && (val.buffer instanceof ArrayBuffer);\n  }\n  return result;\n}\n\n/**\n * Determine if a value is a String\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a String, otherwise false\n */\nfunction isString(val) {\n  return typeof val === 'string';\n}\n\n/**\n * Determine if a value is a Number\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Number, otherwise false\n */\nfunction isNumber(val) {\n  return typeof val === 'number';\n}\n\n/**\n * Determine if a value is undefined\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if the value is undefined, otherwise false\n */\nfunction isUndefined(val) {\n  return typeof val === 'undefined';\n}\n\n/**\n * Determine if a value is an Object\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an Object, otherwise false\n */\nfunction isObject(val) {\n  return val !== null && typeof val === 'object';\n}\n\n/**\n * Determine if a value is a Date\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Date, otherwise false\n */\nfunction isDate(val) {\n  return toString.call(val) === '[object Date]';\n}\n\n/**\n * Determine if a value is a File\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a File, otherwise false\n */\nfunction isFile(val) {\n  return toString.call(val) === '[object File]';\n}\n\n/**\n * Determine if a value is a Blob\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Blob, otherwise false\n */\nfunction isBlob(val) {\n  return toString.call(val) === '[object Blob]';\n}\n\n/**\n * Determine if a value is a Function\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Function, otherwise false\n */\nfunction isFunction(val) {\n  return toString.call(val) === '[object Function]';\n}\n\n/**\n * Determine if a value is a Stream\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Stream, otherwise false\n */\nfunction isStream(val) {\n  return isObject(val) && isFunction(val.pipe);\n}\n\n/**\n * Determine if a value is a URLSearchParams object\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a URLSearchParams object, otherwise false\n */\nfunction isURLSearchParams(val) {\n  return typeof URLSearchParams !== 'undefined' && val instanceof URLSearchParams;\n}\n\n/**\n * Trim excess whitespace off the beginning and end of a string\n *\n * @param {String} str The String to trim\n * @returns {String} The String freed of excess whitespace\n */\nfunction trim(str) {\n  return str.replace(/^\\s*/, '').replace(/\\s*$/, '');\n}\n\n/**\n * Determine if we're running in a standard browser environment\n *\n * This allows axios to run in a web worker, and react-native.\n * Both environments support XMLHttpRequest, but not fully standard globals.\n *\n * web workers:\n *  typeof window -> undefined\n *  typeof document -> undefined\n *\n * react-native:\n *  navigator.product -> 'ReactNative'\n */\nfunction isStandardBrowserEnv() {\n  if (typeof navigator !== 'undefined' && navigator.product === 'ReactNative') {\n    return false;\n  }\n  return (\n    typeof window !== 'undefined' &&\n    typeof document !== 'undefined'\n  );\n}\n\n/**\n * Iterate over an Array or an Object invoking a function for each item.\n *\n * If `obj` is an Array callback will be called passing\n * the value, index, and complete array for each item.\n *\n * If 'obj' is an Object callback will be called passing\n * the value, key, and complete object for each property.\n *\n * @param {Object|Array} obj The object to iterate\n * @param {Function} fn The callback to invoke for each item\n */\nfunction forEach(obj, fn) {\n  // Don't bother if no value provided\n  if (obj === null || typeof obj === 'undefined') {\n    return;\n  }\n\n  // Force an array if not already something iterable\n  if (typeof obj !== 'object') {\n    /*eslint no-param-reassign:0*/\n    obj = [obj];\n  }\n\n  if (isArray(obj)) {\n    // Iterate over array values\n    for (var i = 0, l = obj.length; i < l; i++) {\n      fn.call(null, obj[i], i, obj);\n    }\n  } else {\n    // Iterate over object keys\n    for (var key in obj) {\n      if (Object.prototype.hasOwnProperty.call(obj, key)) {\n        fn.call(null, obj[key], key, obj);\n      }\n    }\n  }\n}\n\n/**\n * Accepts varargs expecting each argument to be an object, then\n * immutably merges the properties of each object and returns result.\n *\n * When multiple objects contain the same key the later object in\n * the arguments list will take precedence.\n *\n * Example:\n *\n * ```js\n * var result = merge({foo: 123}, {foo: 456});\n * console.log(result.foo); // outputs 456\n * ```\n *\n * @param {Object} obj1 Object to merge\n * @returns {Object} Result of all merge properties\n */\nfunction merge(/* obj1, obj2, obj3, ... */) {\n  var result = {};\n  function assignValue(val, key) {\n    if (typeof result[key] === 'object' && typeof val === 'object') {\n      result[key] = merge(result[key], val);\n    } else {\n      result[key] = val;\n    }\n  }\n\n  for (var i = 0, l = arguments.length; i < l; i++) {\n    forEach(arguments[i], assignValue);\n  }\n  return result;\n}\n\n/**\n * Extends object a by mutably adding to it the properties of object b.\n *\n * @param {Object} a The object to be extended\n * @param {Object} b The object to copy properties from\n * @param {Object} thisArg The object to bind function to\n * @return {Object} The resulting value of object a\n */\nfunction extend(a, b, thisArg) {\n  forEach(b, function assignValue(val, key) {\n    if (thisArg && typeof val === 'function') {\n      a[key] = bind(val, thisArg);\n    } else {\n      a[key] = val;\n    }\n  });\n  return a;\n}\n\nmodule.exports = {\n  isArray: isArray,\n  isArrayBuffer: isArrayBuffer,\n  isBuffer: isBuffer,\n  isFormData: isFormData,\n  isArrayBufferView: isArrayBufferView,\n  isString: isString,\n  isNumber: isNumber,\n  isObject: isObject,\n  isUndefined: isUndefined,\n  isDate: isDate,\n  isFile: isFile,\n  isBlob: isBlob,\n  isFunction: isFunction,\n  isStream: isStream,\n  isURLSearchParams: isURLSearchParams,\n  isStandardBrowserEnv: isStandardBrowserEnv,\n  forEach: forEach,\n  merge: merge,\n  extend: extend,\n  trim: trim\n};\n","/*!\n * Determine if an object is a Buffer\n *\n * @author   Feross Aboukhadijeh <https://feross.org>\n * @license  MIT\n */\n\nmodule.exports = function isBuffer (obj) {\n  return obj != null && obj.constructor != null &&\n    typeof obj.constructor.isBuffer === 'function' && obj.constructor.isBuffer(obj)\n}\n","'use strict';\n\nvar enhanceError = require('./enhanceError');\n\n/**\n * Create an Error with the specified message, config, error code, request and response.\n *\n * @param {string} message The error message.\n * @param {Object} config The config.\n * @param {string} [code] The error code (for example, 'ECONNABORTED').\n * @param {Object} [request] The request.\n * @param {Object} [response] The response.\n * @returns {Error} The created error.\n */\nmodule.exports = function createError(message, config, code, request, response) {\n  var error = new Error(message);\n  return enhanceError(error, config, code, request, response);\n};\n","'use strict';\n\n/**\n * Update an Error with the specified config, error code, and response.\n *\n * @param {Error} error The error to update.\n * @param {Object} config The config.\n * @param {string} [code] The error code (for example, 'ECONNABORTED').\n * @param {Object} [request] The request.\n * @param {Object} [response] The response.\n * @returns {Error} The error.\n */\nmodule.exports = function enhanceError(error, config, code, request, response) {\n  error.config = config;\n  if (code) {\n    error.code = code;\n  }\n  error.request = request;\n  error.response = response;\n  return error;\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\nfunction encode(val) {\n  return encodeURIComponent(val).\n    replace(/%40/gi, '@').\n    replace(/%3A/gi, ':').\n    replace(/%24/g, '$').\n    replace(/%2C/gi, ',').\n    replace(/%20/g, '+').\n    replace(/%5B/gi, '[').\n    replace(/%5D/gi, ']');\n}\n\n/**\n * Build a URL by appending params to the end\n *\n * @param {string} url The base of the url (e.g., http://www.google.com)\n * @param {object} [params] The params to be appended\n * @returns {string} The formatted url\n */\nmodule.exports = function buildURL(url, params, paramsSerializer) {\n  /*eslint no-param-reassign:0*/\n  if (!params) {\n    return url;\n  }\n\n  var serializedParams;\n  if (paramsSerializer) {\n    serializedParams = paramsSerializer(params);\n  } else if (utils.isURLSearchParams(params)) {\n    serializedParams = params.toString();\n  } else {\n    var parts = [];\n\n    utils.forEach(params, function serialize(val, key) {\n      if (val === null || typeof val === 'undefined') {\n        return;\n      }\n\n      if (utils.isArray(val)) {\n        key = key + '[]';\n      } else {\n        val = [val];\n      }\n\n      utils.forEach(val, function parseValue(v) {\n        if (utils.isDate(v)) {\n          v = v.toISOString();\n        } else if (utils.isObject(v)) {\n          v = JSON.stringify(v);\n        }\n        parts.push(encode(key) + '=' + encode(v));\n      });\n    });\n\n    serializedParams = parts.join('&');\n  }\n\n  if (serializedParams) {\n    url += (url.indexOf('?') === -1 ? '?' : '&') + serializedParams;\n  }\n\n  return url;\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\n// Headers whose duplicates are ignored by node\n// c.f. https://nodejs.org/api/http.html#http_message_headers\nvar ignoreDuplicateOf = [\n  'age', 'authorization', 'content-length', 'content-type', 'etag',\n  'expires', 'from', 'host', 'if-modified-since', 'if-unmodified-since',\n  'last-modified', 'location', 'max-forwards', 'proxy-authorization',\n  'referer', 'retry-after', 'user-agent'\n];\n\n/**\n * Parse headers into an object\n *\n * ```\n * Date: Wed, 27 Aug 2014 08:58:49 GMT\n * Content-Type: application/json\n * Connection: keep-alive\n * Transfer-Encoding: chunked\n * ```\n *\n * @param {String} headers Headers needing to be parsed\n * @returns {Object} Headers parsed into an object\n */\nmodule.exports = function parseHeaders(headers) {\n  var parsed = {};\n  var key;\n  var val;\n  var i;\n\n  if (!headers) { return parsed; }\n\n  utils.forEach(headers.split('\\n'), function parser(line) {\n    i = line.indexOf(':');\n    key = utils.trim(line.substr(0, i)).toLowerCase();\n    val = utils.trim(line.substr(i + 1));\n\n    if (key) {\n      if (parsed[key] && ignoreDuplicateOf.indexOf(key) >= 0) {\n        return;\n      }\n      if (key === 'set-cookie') {\n        parsed[key] = (parsed[key] ? parsed[key] : []).concat([val]);\n      } else {\n        parsed[key] = parsed[key] ? parsed[key] + ', ' + val : val;\n      }\n    }\n  });\n\n  return parsed;\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\nmodule.exports = (\n  utils.isStandardBrowserEnv() ?\n\n  // Standard browser envs have full support of the APIs needed to test\n  // whether the request URL is of the same origin as current location.\n  (function standardBrowserEnv() {\n    var msie = /(msie|trident)/i.test(navigator.userAgent);\n    var urlParsingNode = document.createElement('a');\n    var originURL;\n\n    /**\n    * Parse a URL to discover it's components\n    *\n    * @param {String} url The URL to be parsed\n    * @returns {Object}\n    */\n    function resolveURL(url) {\n      var href = url;\n\n      if (msie) {\n        // IE needs attribute set twice to normalize properties\n        urlParsingNode.setAttribute('href', href);\n        href = urlParsingNode.href;\n      }\n\n      urlParsingNode.setAttribute('href', href);\n\n      // urlParsingNode provides the UrlUtils interface - http://url.spec.whatwg.org/#urlutils\n      return {\n        href: urlParsingNode.href,\n        protocol: urlParsingNode.protocol ? urlParsingNode.protocol.replace(/:$/, '') : '',\n        host: urlParsingNode.host,\n        search: urlParsingNode.search ? urlParsingNode.search.replace(/^\\?/, '') : '',\n        hash: urlParsingNode.hash ? urlParsingNode.hash.replace(/^#/, '') : '',\n        hostname: urlParsingNode.hostname,\n        port: urlParsingNode.port,\n        pathname: (urlParsingNode.pathname.charAt(0) === '/') ?\n                  urlParsingNode.pathname :\n                  '/' + urlParsingNode.pathname\n      };\n    }\n\n    originURL = resolveURL(window.location.href);\n\n    /**\n    * Determine if a URL shares the same origin as the current location\n    *\n    * @param {String} requestURL The URL to test\n    * @returns {boolean} True if URL shares the same origin, otherwise false\n    */\n    return function isURLSameOrigin(requestURL) {\n      var parsed = (utils.isString(requestURL)) ? resolveURL(requestURL) : requestURL;\n      return (parsed.protocol === originURL.protocol &&\n            parsed.host === originURL.host);\n    };\n  })() :\n\n  // Non standard browser envs (web workers, react-native) lack needed support.\n  (function nonStandardBrowserEnv() {\n    return function isURLSameOrigin() {\n      return true;\n    };\n  })()\n);\n","'use strict';\n\nvar utils = require('./../utils');\n\nmodule.exports = (\n  utils.isStandardBrowserEnv() ?\n\n  // Standard browser envs support document.cookie\n  (function standardBrowserEnv() {\n    return {\n      write: function write(name, value, expires, path, domain, secure) {\n        var cookie = [];\n        cookie.push(name + '=' + encodeURIComponent(value));\n\n        if (utils.isNumber(expires)) {\n          cookie.push('expires=' + new Date(expires).toGMTString());\n        }\n\n        if (utils.isString(path)) {\n          cookie.push('path=' + path);\n        }\n\n        if (utils.isString(domain)) {\n          cookie.push('domain=' + domain);\n        }\n\n        if (secure === true) {\n          cookie.push('secure');\n        }\n\n        document.cookie = cookie.join('; ');\n      },\n\n      read: function read(name) {\n        var match = document.cookie.match(new RegExp('(^|;\\\\s*)(' + name + ')=([^;]*)'));\n        return (match ? decodeURIComponent(match[3]) : null);\n      },\n\n      remove: function remove(name) {\n        this.write(name, '', Date.now() - 86400000);\n      }\n    };\n  })() :\n\n  // Non standard browser env (web workers, react-native) lack needed support.\n  (function nonStandardBrowserEnv() {\n    return {\n      write: function write() {},\n      read: function read() { return null; },\n      remove: function remove() {}\n    };\n  })()\n);\n","'use strict';\n\nvar utils = require('./../utils');\nvar settle = require('./../core/settle');\nvar buildURL = require('./../helpers/buildURL');\nvar parseHeaders = require('./../helpers/parseHeaders');\nvar isURLSameOrigin = require('./../helpers/isURLSameOrigin');\nvar createError = require('../core/createError');\n\nmodule.exports = function xhrAdapter(config) {\n  return new Promise(function dispatchXhrRequest(resolve, reject) {\n    var requestData = config.data;\n    var requestHeaders = config.headers;\n\n    if (utils.isFormData(requestData)) {\n      delete requestHeaders['Content-Type']; // Let the browser set it\n    }\n\n    var request = new XMLHttpRequest();\n\n    // HTTP basic authentication\n    if (config.auth) {\n      var username = config.auth.username || '';\n      var password = config.auth.password || '';\n      requestHeaders.Authorization = 'Basic ' + btoa(username + ':' + password);\n    }\n\n    request.open(config.method.toUpperCase(), buildURL(config.url, config.params, config.paramsSerializer), true);\n\n    // Set the request timeout in MS\n    request.timeout = config.timeout;\n\n    // Listen for ready state\n    request.onreadystatechange = function handleLoad() {\n      if (!request || request.readyState !== 4) {\n        return;\n      }\n\n      // The request errored out and we didn't get a response, this will be\n      // handled by onerror instead\n      // With one exception: request that using file: protocol, most browsers\n      // will return status as 0 even though it's a successful request\n      if (request.status === 0 && !(request.responseURL && request.responseURL.indexOf('file:') === 0)) {\n        return;\n      }\n\n      // Prepare the response\n      var responseHeaders = 'getAllResponseHeaders' in request ? parseHeaders(request.getAllResponseHeaders()) : null;\n      var responseData = !config.responseType || config.responseType === 'text' ? request.responseText : request.response;\n      var response = {\n        data: responseData,\n        status: request.status,\n        statusText: request.statusText,\n        headers: responseHeaders,\n        config: config,\n        request: request\n      };\n\n      settle(resolve, reject, response);\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle low level network errors\n    request.onerror = function handleError() {\n      // Real errors are hidden from us by the browser\n      // onerror should only fire if it's a network error\n      reject(createError('Network Error', config, null, request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle timeout\n    request.ontimeout = function handleTimeout() {\n      reject(createError('timeout of ' + config.timeout + 'ms exceeded', config, 'ECONNABORTED',\n        request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Add xsrf header\n    // This is only done if running in a standard browser environment.\n    // Specifically not if we're in a web worker, or react-native.\n    if (utils.isStandardBrowserEnv()) {\n      var cookies = require('./../helpers/cookies');\n\n      // Add xsrf header\n      var xsrfValue = (config.withCredentials || isURLSameOrigin(config.url)) && config.xsrfCookieName ?\n          cookies.read(config.xsrfCookieName) :\n          undefined;\n\n      if (xsrfValue) {\n        requestHeaders[config.xsrfHeaderName] = xsrfValue;\n      }\n    }\n\n    // Add headers to the request\n    if ('setRequestHeader' in request) {\n      utils.forEach(requestHeaders, function setRequestHeader(val, key) {\n        if (typeof requestData === 'undefined' && key.toLowerCase() === 'content-type') {\n          // Remove Content-Type if data is undefined\n          delete requestHeaders[key];\n        } else {\n          // Otherwise add header to the request\n          request.setRequestHeader(key, val);\n        }\n      });\n    }\n\n    // Add withCredentials to request if needed\n    if (config.withCredentials) {\n      request.withCredentials = true;\n    }\n\n    // Add responseType to request if needed\n    if (config.responseType) {\n      try {\n        request.responseType = config.responseType;\n      } catch (e) {\n        // Expected DOMException thrown by browsers not compatible XMLHttpRequest Level 2.\n        // But, this can be suppressed for 'json' type as it can be parsed by default 'transformResponse' function.\n        if (config.responseType !== 'json') {\n          throw e;\n        }\n      }\n    }\n\n    // Handle progress if needed\n    if (typeof config.onDownloadProgress === 'function') {\n      request.addEventListener('progress', config.onDownloadProgress);\n    }\n\n    // Not all browsers support upload events\n    if (typeof config.onUploadProgress === 'function' && request.upload) {\n      request.upload.addEventListener('progress', config.onUploadProgress);\n    }\n\n    if (config.cancelToken) {\n      // Handle cancellation\n      config.cancelToken.promise.then(function onCanceled(cancel) {\n        if (!request) {\n          return;\n        }\n\n        request.abort();\n        reject(cancel);\n        // Clean up request\n        request = null;\n      });\n    }\n\n    if (requestData === undefined) {\n      requestData = null;\n    }\n\n    // Send the request\n    request.send(requestData);\n  });\n};\n","'use strict';\n\nvar createError = require('./createError');\n\n/**\n * Resolve or reject a Promise based on response status.\n *\n * @param {Function} resolve A function that resolves the promise.\n * @param {Function} reject A function that rejects the promise.\n * @param {object} response The response.\n */\nmodule.exports = function settle(resolve, reject, response) {\n  var validateStatus = response.config.validateStatus;\n  // Note: status is not exposed by XDomainRequest\n  if (!response.status || !validateStatus || validateStatus(response.status)) {\n    resolve(response);\n  } else {\n    reject(createError(\n      'Request failed with status code ' + response.status,\n      response.config,\n      null,\n      response.request,\n      response\n    ));\n  }\n};\n","'use strict';\n\nvar utils = require('./utils');\nvar normalizeHeaderName = require('./helpers/normalizeHeaderName');\n\nvar DEFAULT_CONTENT_TYPE = {\n  'Content-Type': 'application/x-www-form-urlencoded'\n};\n\nfunction setContentTypeIfUnset(headers, value) {\n  if (!utils.isUndefined(headers) && utils.isUndefined(headers['Content-Type'])) {\n    headers['Content-Type'] = value;\n  }\n}\n\nfunction getDefaultAdapter() {\n  var adapter;\n  if (typeof XMLHttpRequest !== 'undefined') {\n    // For browsers use XHR adapter\n    adapter = require('./adapters/xhr');\n  } else if (typeof process !== 'undefined') {\n    // For node use HTTP adapter\n    adapter = require('./adapters/http');\n  }\n  return adapter;\n}\n\nvar defaults = {\n  adapter: getDefaultAdapter(),\n\n  transformRequest: [function transformRequest(data, headers) {\n    normalizeHeaderName(headers, 'Content-Type');\n    if (utils.isFormData(data) ||\n      utils.isArrayBuffer(data) ||\n      utils.isBuffer(data) ||\n      utils.isStream(data) ||\n      utils.isFile(data) ||\n      utils.isBlob(data)\n    ) {\n      return data;\n    }\n    if (utils.isArrayBufferView(data)) {\n      return data.buffer;\n    }\n    if (utils.isURLSearchParams(data)) {\n      setContentTypeIfUnset(headers, 'application/x-www-form-urlencoded;charset=utf-8');\n      return data.toString();\n    }\n    if (utils.isObject(data)) {\n      setContentTypeIfUnset(headers, 'application/json;charset=utf-8');\n      return JSON.stringify(data);\n    }\n    return data;\n  }],\n\n  transformResponse: [function transformResponse(data) {\n    /*eslint no-param-reassign:0*/\n    if (typeof data === 'string') {\n      try {\n        data = JSON.parse(data);\n      } catch (e) { /* Ignore */ }\n    }\n    return data;\n  }],\n\n  /**\n   * A timeout in milliseconds to abort a request. If set to 0 (default) a\n   * timeout is not created.\n   */\n  timeout: 0,\n\n  xsrfCookieName: 'XSRF-TOKEN',\n  xsrfHeaderName: 'X-XSRF-TOKEN',\n\n  maxContentLength: -1,\n\n  validateStatus: function validateStatus(status) {\n    return status >= 200 && status < 300;\n  }\n};\n\ndefaults.headers = {\n  common: {\n    'Accept': 'application/json, text/plain, */*'\n  }\n};\n\nutils.forEach(['delete', 'get', 'head'], function forEachMethodNoData(method) {\n  defaults.headers[method] = {};\n});\n\nutils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {\n  defaults.headers[method] = utils.merge(DEFAULT_CONTENT_TYPE);\n});\n\nmodule.exports = defaults;\n","'use strict';\n\nvar utils = require('../utils');\n\nmodule.exports = function normalizeHeaderName(headers, normalizedName) {\n  utils.forEach(headers, function processHeader(value, name) {\n    if (name !== normalizedName && name.toUpperCase() === normalizedName.toUpperCase()) {\n      headers[normalizedName] = value;\n      delete headers[name];\n    }\n  });\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\nfunction InterceptorManager() {\n  this.handlers = [];\n}\n\n/**\n * Add a new interceptor to the stack\n *\n * @param {Function} fulfilled The function to handle `then` for a `Promise`\n * @param {Function} rejected The function to handle `reject` for a `Promise`\n *\n * @return {Number} An ID used to remove interceptor later\n */\nInterceptorManager.prototype.use = function use(fulfilled, rejected) {\n  this.handlers.push({\n    fulfilled: fulfilled,\n    rejected: rejected\n  });\n  return this.handlers.length - 1;\n};\n\n/**\n * Remove an interceptor from the stack\n *\n * @param {Number} id The ID that was returned by `use`\n */\nInterceptorManager.prototype.eject = function eject(id) {\n  if (this.handlers[id]) {\n    this.handlers[id] = null;\n  }\n};\n\n/**\n * Iterate over all the registered interceptors\n *\n * This method is particularly useful for skipping over any\n * interceptors that may have become `null` calling `eject`.\n *\n * @param {Function} fn The function to call for each interceptor\n */\nInterceptorManager.prototype.forEach = function forEach(fn) {\n  utils.forEach(this.handlers, function forEachHandler(h) {\n    if (h !== null) {\n      fn(h);\n    }\n  });\n};\n\nmodule.exports = InterceptorManager;\n","'use strict';\n\nvar utils = require('./../utils');\n\n/**\n * Transform the data for a request or a response\n *\n * @param {Object|String} data The data to be transformed\n * @param {Array} headers The headers for the request or response\n * @param {Array|Function} fns A single function or Array of functions\n * @returns {*} The resulting transformed data\n */\nmodule.exports = function transformData(data, headers, fns) {\n  /*eslint no-param-reassign:0*/\n  utils.forEach(fns, function transform(fn) {\n    data = fn(data, headers);\n  });\n\n  return data;\n};\n","'use strict';\n\nmodule.exports = function isCancel(value) {\n  return !!(value && value.__CANCEL__);\n};\n","'use strict';\n\nvar utils = require('./../utils');\nvar transformData = require('./transformData');\nvar isCancel = require('../cancel/isCancel');\nvar defaults = require('../defaults');\nvar isAbsoluteURL = require('./../helpers/isAbsoluteURL');\nvar combineURLs = require('./../helpers/combineURLs');\n\n/**\n * Throws a `Cancel` if cancellation has been requested.\n */\nfunction throwIfCancellationRequested(config) {\n  if (config.cancelToken) {\n    config.cancelToken.throwIfRequested();\n  }\n}\n\n/**\n * Dispatch a request to the server using the configured adapter.\n *\n * @param {object} config The config that is to be used for the request\n * @returns {Promise} The Promise to be fulfilled\n */\nmodule.exports = function dispatchRequest(config) {\n  throwIfCancellationRequested(config);\n\n  // Support baseURL config\n  if (config.baseURL && !isAbsoluteURL(config.url)) {\n    config.url = combineURLs(config.baseURL, config.url);\n  }\n\n  // Ensure headers exist\n  config.headers = config.headers || {};\n\n  // Transform request data\n  config.data = transformData(\n    config.data,\n    config.headers,\n    config.transformRequest\n  );\n\n  // Flatten headers\n  config.headers = utils.merge(\n    config.headers.common || {},\n    config.headers[config.method] || {},\n    config.headers || {}\n  );\n\n  utils.forEach(\n    ['delete', 'get', 'head', 'post', 'put', 'patch', 'common'],\n    function cleanHeaderConfig(method) {\n      delete config.headers[method];\n    }\n  );\n\n  var adapter = config.adapter || defaults.adapter;\n\n  return adapter(config).then(function onAdapterResolution(response) {\n    throwIfCancellationRequested(config);\n\n    // Transform response data\n    response.data = transformData(\n      response.data,\n      response.headers,\n      config.transformResponse\n    );\n\n    return response;\n  }, function onAdapterRejection(reason) {\n    if (!isCancel(reason)) {\n      throwIfCancellationRequested(config);\n\n      // Transform response data\n      if (reason && reason.response) {\n        reason.response.data = transformData(\n          reason.response.data,\n          reason.response.headers,\n          config.transformResponse\n        );\n      }\n    }\n\n    return Promise.reject(reason);\n  });\n};\n","'use strict';\n\n/**\n * Creates a new URL by combining the specified URLs\n *\n * @param {string} baseURL The base URL\n * @param {string} relativeURL The relative URL\n * @returns {string} The combined URL\n */\nmodule.exports = function combineURLs(baseURL, relativeURL) {\n  return relativeURL\n    ? baseURL.replace(/\\/+$/, '') + '/' + relativeURL.replace(/^\\/+/, '')\n    : baseURL;\n};\n","'use strict';\n\n/**\n * Determines whether the specified URL is absolute\n *\n * @param {string} url The URL to test\n * @returns {boolean} True if the specified URL is absolute, otherwise false\n */\nmodule.exports = function isAbsoluteURL(url) {\n  // A URL is considered absolute if it begins with \"<scheme>://\" or \"//\" (protocol-relative URL).\n  // RFC 3986 defines scheme name as a sequence of characters beginning with a letter and followed\n  // by any combination of letters, digits, plus, period, or hyphen.\n  return /^([a-z][a-z\\d\\+\\-\\.]*:)?\\/\\//i.test(url);\n};\n","'use strict';\n\nvar defaults = require('./../defaults');\nvar utils = require('./../utils');\nvar InterceptorManager = require('./InterceptorManager');\nvar dispatchRequest = require('./dispatchRequest');\n\n/**\n * Create a new instance of Axios\n *\n * @param {Object} instanceConfig The default config for the instance\n */\nfunction Axios(instanceConfig) {\n  this.defaults = instanceConfig;\n  this.interceptors = {\n    request: new InterceptorManager(),\n    response: new InterceptorManager()\n  };\n}\n\n/**\n * Dispatch a request\n *\n * @param {Object} config The config specific for this request (merged with this.defaults)\n */\nAxios.prototype.request = function request(config) {\n  /*eslint no-param-reassign:0*/\n  // Allow for axios('example/url'[, config]) a la fetch API\n  if (typeof config === 'string') {\n    config = utils.merge({\n      url: arguments[0]\n    }, arguments[1]);\n  }\n\n  config = utils.merge(defaults, {method: 'get'}, this.defaults, config);\n  config.method = config.method.toLowerCase();\n\n  // Hook up interceptors middleware\n  var chain = [dispatchRequest, undefined];\n  var promise = Promise.resolve(config);\n\n  this.interceptors.request.forEach(function unshiftRequestInterceptors(interceptor) {\n    chain.unshift(interceptor.fulfilled, interceptor.rejected);\n  });\n\n  this.interceptors.response.forEach(function pushResponseInterceptors(interceptor) {\n    chain.push(interceptor.fulfilled, interceptor.rejected);\n  });\n\n  while (chain.length) {\n    promise = promise.then(chain.shift(), chain.shift());\n  }\n\n  return promise;\n};\n\n// Provide aliases for supported request methods\nutils.forEach(['delete', 'get', 'head', 'options'], function forEachMethodNoData(method) {\n  /*eslint func-names:0*/\n  Axios.prototype[method] = function(url, config) {\n    return this.request(utils.merge(config || {}, {\n      method: method,\n      url: url\n    }));\n  };\n});\n\nutils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {\n  /*eslint func-names:0*/\n  Axios.prototype[method] = function(url, data, config) {\n    return this.request(utils.merge(config || {}, {\n      method: method,\n      url: url,\n      data: data\n    }));\n  };\n});\n\nmodule.exports = Axios;\n","'use strict';\n\n/**\n * A `Cancel` is an object that is thrown when an operation is canceled.\n *\n * @class\n * @param {string=} message The message.\n */\nfunction Cancel(message) {\n  this.message = message;\n}\n\nCancel.prototype.toString = function toString() {\n  return 'Cancel' + (this.message ? ': ' + this.message : '');\n};\n\nCancel.prototype.__CANCEL__ = true;\n\nmodule.exports = Cancel;\n","'use strict';\n\nvar Cancel = require('./Cancel');\n\n/**\n * A `CancelToken` is an object that can be used to request cancellation of an operation.\n *\n * @class\n * @param {Function} executor The executor function.\n */\nfunction CancelToken(executor) {\n  if (typeof executor !== 'function') {\n    throw new TypeError('executor must be a function.');\n  }\n\n  var resolvePromise;\n  this.promise = new Promise(function promiseExecutor(resolve) {\n    resolvePromise = resolve;\n  });\n\n  var token = this;\n  executor(function cancel(message) {\n    if (token.reason) {\n      // Cancellation has already been requested\n      return;\n    }\n\n    token.reason = new Cancel(message);\n    resolvePromise(token.reason);\n  });\n}\n\n/**\n * Throws a `Cancel` if cancellation has been requested.\n */\nCancelToken.prototype.throwIfRequested = function throwIfRequested() {\n  if (this.reason) {\n    throw this.reason;\n  }\n};\n\n/**\n * Returns an object that contains a new `CancelToken` and a function that, when called,\n * cancels the `CancelToken`.\n */\nCancelToken.source = function source() {\n  var cancel;\n  var token = new CancelToken(function executor(c) {\n    cancel = c;\n  });\n  return {\n    token: token,\n    cancel: cancel\n  };\n};\n\nmodule.exports = CancelToken;\n","'use strict';\n\nvar utils = require('./utils');\nvar bind = require('./helpers/bind');\nvar Axios = require('./core/Axios');\nvar defaults = require('./defaults');\n\n/**\n * Create an instance of Axios\n *\n * @param {Object} defaultConfig The default config for the instance\n * @return {Axios} A new instance of Axios\n */\nfunction createInstance(defaultConfig) {\n  var context = new Axios(defaultConfig);\n  var instance = bind(Axios.prototype.request, context);\n\n  // Copy axios.prototype to instance\n  utils.extend(instance, Axios.prototype, context);\n\n  // Copy context to instance\n  utils.extend(instance, context);\n\n  return instance;\n}\n\n// Create the default instance to be exported\nvar axios = createInstance(defaults);\n\n// Expose Axios class to allow class inheritance\naxios.Axios = Axios;\n\n// Factory for creating new instances\naxios.create = function create(instanceConfig) {\n  return createInstance(utils.merge(defaults, instanceConfig));\n};\n\n// Expose Cancel & CancelToken\naxios.Cancel = require('./cancel/Cancel');\naxios.CancelToken = require('./cancel/CancelToken');\naxios.isCancel = require('./cancel/isCancel');\n\n// Expose all/spread\naxios.all = function all(promises) {\n  return Promise.all(promises);\n};\naxios.spread = require('./helpers/spread');\n\nmodule.exports = axios;\n\n// Allow use of default import syntax in TypeScript\nmodule.exports.default = axios;\n","'use strict';\n\n/**\n * Syntactic sugar for invoking a function and expanding an array for arguments.\n *\n * Common use case would be to use `Function.prototype.apply`.\n *\n *  ```js\n *  function f(x, y, z) {}\n *  var args = [1, 2, 3];\n *  f.apply(null, args);\n *  ```\n *\n * With `spread` this example can be re-written.\n *\n *  ```js\n *  spread(function(x, y, z) {})([1, 2, 3]);\n *  ```\n *\n * @param {Function} callback\n * @returns {Function}\n */\nmodule.exports = function spread(callback) {\n  return function wrap(arr) {\n    return callback.apply(null, arr);\n  };\n};\n","/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex;\n  // join used to fix memory issue caused by concatenation: https://bugs.chromium.org/p/v8/issues/detail?id=3175#c4\n  return ([bth[buf[i++]], bth[buf[i++]], \n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]],\n\tbth[buf[i++]], bth[buf[i++]],\n\tbth[buf[i++]], bth[buf[i++]]]).join('');\n}\n\nmodule.exports = bytesToUuid;\n","module.exports = require('./lib/axios');","// Unique ID creation requires a high quality random # generator.  In the\n// browser this is a little complicated due to unknown quality of Math.random()\n// and inconsistent support for the `crypto` API.  We do the best we can via\n// feature-detection\n\n// getRandomValues needs to be invoked in a context where \"this\" is a Crypto\n// implementation. Also, find the complete implementation of crypto on IE11.\nvar getRandomValues = (typeof(crypto) != 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto)) ||\n                      (typeof(msCrypto) != 'undefined' && typeof window.msCrypto.getRandomValues == 'function' && msCrypto.getRandomValues.bind(msCrypto));\n\nif (getRandomValues) {\n  // WHATWG crypto RNG - http://wiki.whatwg.org/wiki/Crypto\n  var rnds8 = new Uint8Array(16); // eslint-disable-line no-undef\n\n  module.exports = function whatwgRNG() {\n    getRandomValues(rnds8);\n    return rnds8;\n  };\n} else {\n  // Math.random()-based (RNG)\n  //\n  // If all else fails, use Math.random().  It's fast, but is of unspecified\n  // quality.\n  var rnds = new Array(16);\n\n  module.exports = function mathRNG() {\n    for (var i = 0, r; i < 16; i++) {\n      if ((i & 0x03) === 0) r = Math.random() * 0x100000000;\n      rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\n    }\n\n    return rnds;\n  };\n}\n","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof(options) == 'string') {\n    buf = options === 'binary' ? new Array(16) : null;\n    options = null;\n  }\n  options = options || {};\n\n  var rnds = options.random || (options.rng || rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = (rnds[6] & 0x0f) | 0x40;\n  rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || bytesToUuid(rnds);\n}\n\nmodule.exports = v4;\n","(function() {\n  \"use strict\";\n\nfunction immutableInit(config) {\n\n  // https://github.com/facebook/react/blob/v15.0.1/src/isomorphic/classic/element/ReactElement.js#L21\n  var REACT_ELEMENT_TYPE = typeof Symbol === 'function' && Symbol.for && Symbol.for('react.element');\n  var REACT_ELEMENT_TYPE_FALLBACK = 0xeac7;\n\n  var globalConfig = {\n    use_static: false\n  };\n  if (isObject(config)) {\n      if (config.use_static !== undefined) {\n          globalConfig.use_static = Boolean(config.use_static);\n      }\n  }\n\n  function isObject(data) {\n    return (\n      typeof data === 'object' &&\n      !Array.isArray(data) &&\n      data !== null\n    );\n  }\n\n  function instantiateEmptyObject(obj) {\n      var prototype = Object.getPrototypeOf(obj);\n      if (!prototype) {\n          return {};\n      } else {\n          return Object.create(prototype);\n      }\n  }\n\n  function addPropertyTo(target, methodName, value) {\n    Object.defineProperty(target, methodName, {\n      enumerable: false,\n      configurable: false,\n      writable: false,\n      value: value\n    });\n  }\n\n  function banProperty(target, methodName) {\n    addPropertyTo(target, methodName, function() {\n      throw new ImmutableError(\"The \" + methodName +\n        \" method cannot be invoked on an Immutable data structure.\");\n    });\n  }\n\n  var immutabilityTag = \"__immutable_invariants_hold\";\n\n  function addImmutabilityTag(target) {\n    addPropertyTo(target, immutabilityTag, true);\n  }\n\n  function isImmutable(target) {\n    if (typeof target === \"object\") {\n      return target === null || Boolean(\n        Object.getOwnPropertyDescriptor(target, immutabilityTag)\n      );\n    } else {\n      // In JavaScript, only objects are even potentially mutable.\n      // strings, numbers, null, and undefined are all naturally immutable.\n      return true;\n    }\n  }\n\n  function isEqual(a, b) {\n    // Avoid false positives due to (NaN !== NaN) evaluating to true\n    return (a === b || (a !== a && b !== b));\n  }\n\n  function isMergableObject(target) {\n    return target !== null && typeof target === \"object\" && !(Array.isArray(target)) && !(target instanceof Date);\n  }\n\n  var mutatingObjectMethods = [\n    \"setPrototypeOf\"\n  ];\n\n  var nonMutatingObjectMethods = [\n    \"keys\"\n  ];\n\n  var mutatingArrayMethods = mutatingObjectMethods.concat([\n    \"push\", \"pop\", \"sort\", \"splice\", \"shift\", \"unshift\", \"reverse\"\n  ]);\n\n  var nonMutatingArrayMethods = nonMutatingObjectMethods.concat([\n    \"map\", \"filter\", \"slice\", \"concat\", \"reduce\", \"reduceRight\"\n  ]);\n\n  var mutatingDateMethods = mutatingObjectMethods.concat([\n    \"setDate\", \"setFullYear\", \"setHours\", \"setMilliseconds\", \"setMinutes\", \"setMonth\", \"setSeconds\",\n    \"setTime\", \"setUTCDate\", \"setUTCFullYear\", \"setUTCHours\", \"setUTCMilliseconds\", \"setUTCMinutes\",\n    \"setUTCMonth\", \"setUTCSeconds\", \"setYear\"\n  ]);\n\n  function ImmutableError(message) {\n    this.name = 'MyError';\n    this.message = message;\n    this.stack = (new Error()).stack;\n  }\n  ImmutableError.prototype = new Error();\n  ImmutableError.prototype.constructor = Error;\n\n  function makeImmutable(obj, bannedMethods) {\n    // Tag it so we can quickly tell it's immutable later.\n    addImmutabilityTag(obj);\n\n    if (\"development\" !== \"production\") {\n      // Make all mutating methods throw exceptions.\n      for (var index in bannedMethods) {\n        if (bannedMethods.hasOwnProperty(index)) {\n          banProperty(obj, bannedMethods[index]);\n        }\n      }\n\n      // Freeze it and return it.\n      Object.freeze(obj);\n    }\n\n    return obj;\n  }\n\n  function makeMethodReturnImmutable(obj, methodName) {\n    var currentMethod = obj[methodName];\n\n    addPropertyTo(obj, methodName, function() {\n      return Immutable(currentMethod.apply(obj, arguments));\n    });\n  }\n\n  function arraySet(idx, value, config) {\n    var deep          = config && config.deep;\n\n    if (idx in this) {\n      if (deep && this[idx] !== value && isMergableObject(value) && isMergableObject(this[idx])) {\n        value = Immutable.merge(this[idx], value, {deep: true, mode: 'replace'});\n      }\n      if (isEqual(this[idx], value)) {\n        return this;\n      }\n    }\n\n    var mutable = asMutableArray.call(this);\n    mutable[idx] = Immutable(value);\n    return makeImmutableArray(mutable);\n  }\n\n  var immutableEmptyArray = Immutable([]);\n\n  function arraySetIn(pth, value, config) {\n    var head = pth[0];\n\n    if (pth.length === 1) {\n      return arraySet.call(this, head, value, config);\n    } else {\n      var tail = pth.slice(1);\n      var thisHead = this[head];\n      var newValue;\n\n      if (typeof(thisHead) === \"object\" && thisHead !== null) {\n        // Might (validly) be object or array\n        newValue = Immutable.setIn(thisHead, tail, value);\n      } else {\n        var nextHead = tail[0];\n        // If the next path part is a number, then we are setting into an array, else an object.\n        if (nextHead !== '' && isFinite(nextHead)) {\n          newValue = arraySetIn.call(immutableEmptyArray, tail, value);\n        } else {\n          newValue = objectSetIn.call(immutableEmptyObject, tail, value);\n        }\n      }\n\n      if (head in this && thisHead === newValue) {\n        return this;\n      }\n\n      var mutable = asMutableArray.call(this);\n      mutable[head] = newValue;\n      return makeImmutableArray(mutable);\n    }\n  }\n\n  function makeImmutableArray(array) {\n    // Don't change their implementations, but wrap these functions to make sure\n    // they always return an immutable value.\n    for (var index in nonMutatingArrayMethods) {\n      if (nonMutatingArrayMethods.hasOwnProperty(index)) {\n        var methodName = nonMutatingArrayMethods[index];\n        makeMethodReturnImmutable(array, methodName);\n      }\n    }\n\n    if (!globalConfig.use_static) {\n      addPropertyTo(array, \"flatMap\",  flatMap);\n      addPropertyTo(array, \"asObject\", asObject);\n      addPropertyTo(array, \"asMutable\", asMutableArray);\n      addPropertyTo(array, \"set\", arraySet);\n      addPropertyTo(array, \"setIn\", arraySetIn);\n      addPropertyTo(array, \"update\", update);\n      addPropertyTo(array, \"updateIn\", updateIn);\n      addPropertyTo(array, \"getIn\", getIn);\n    }\n\n    for(var i = 0, length = array.length; i < length; i++) {\n      array[i] = Immutable(array[i]);\n    }\n\n    return makeImmutable(array, mutatingArrayMethods);\n  }\n\n  function makeImmutableDate(date) {\n    if (!globalConfig.use_static) {\n      addPropertyTo(date, \"asMutable\", asMutableDate);\n    }\n\n    return makeImmutable(date, mutatingDateMethods);\n  }\n\n  function asMutableDate() {\n    return new Date(this.getTime());\n  }\n\n  /**\n   * Effectively performs a map() over the elements in the array, using the\n   * provided iterator, except that whenever the iterator returns an array, that\n   * array's elements are added to the final result instead of the array itself.\n   *\n   * @param {function} iterator - The iterator function that will be invoked on each element in the array. It will receive three arguments: the current value, the current index, and the current object.\n   */\n  function flatMap(iterator) {\n    // Calling .flatMap() with no arguments is a no-op. Don't bother cloning.\n    if (arguments.length === 0) {\n      return this;\n    }\n\n    var result = [],\n        length = this.length,\n        index;\n\n    for (index = 0; index < length; index++) {\n      var iteratorResult = iterator(this[index], index, this);\n\n      if (Array.isArray(iteratorResult)) {\n        // Concatenate Array results into the return value we're building up.\n        result.push.apply(result, iteratorResult);\n      } else {\n        // Handle non-Array results the same way map() does.\n        result.push(iteratorResult);\n      }\n    }\n\n    return makeImmutableArray(result);\n  }\n\n  /**\n   * Returns an Immutable copy of the object without the given keys included.\n   *\n   * @param {array} keysToRemove - A list of strings representing the keys to exclude in the return value. Instead of providing a single array, this method can also be called by passing multiple strings as separate arguments.\n   */\n  function without(remove) {\n    // Calling .without() with no arguments is a no-op. Don't bother cloning.\n    if (typeof remove === \"undefined\" && arguments.length === 0) {\n      return this;\n    }\n\n    if (typeof remove !== \"function\") {\n      // If we weren't given an array, use the arguments list.\n      var keysToRemoveArray = (Array.isArray(remove)) ?\n         remove.slice() : Array.prototype.slice.call(arguments);\n\n      // Convert numeric keys to strings since that's how they'll\n      // come from the enumeration of the object.\n      keysToRemoveArray.forEach(function(el, idx, arr) {\n        if(typeof(el) === \"number\") {\n          arr[idx] = el.toString();\n        }\n      });\n\n      remove = function(val, key) {\n        return keysToRemoveArray.indexOf(key) !== -1;\n      };\n    }\n\n    var result = instantiateEmptyObject(this);\n\n    for (var key in this) {\n      if (this.hasOwnProperty(key) && remove(this[key], key) === false) {\n        result[key] = this[key];\n      }\n    }\n\n    return makeImmutableObject(result);\n  }\n\n  function asMutableArray(opts) {\n    var result = [], i, length;\n\n    if(opts && opts.deep) {\n      for(i = 0, length = this.length; i < length; i++) {\n        result.push(asDeepMutable(this[i]));\n      }\n    } else {\n      for(i = 0, length = this.length; i < length; i++) {\n        result.push(this[i]);\n      }\n    }\n\n    return result;\n  }\n\n  /**\n   * Effectively performs a [map](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map) over the elements in the array, expecting that the iterator function\n   * will return an array of two elements - the first representing a key, the other\n   * a value. Then returns an Immutable Object constructed of those keys and values.\n   *\n   * @param {function} iterator - A function which should return an array of two elements - the first representing the desired key, the other the desired value.\n   */\n  function asObject(iterator) {\n    // If no iterator was provided, assume the identity function\n    // (suggesting this array is already a list of key/value pairs.)\n    if (typeof iterator !== \"function\") {\n      iterator = function(value) { return value; };\n    }\n\n    var result = {},\n        length = this.length,\n        index;\n\n    for (index = 0; index < length; index++) {\n      var pair  = iterator(this[index], index, this),\n          key   = pair[0],\n          value = pair[1];\n\n      result[key] = value;\n    }\n\n    return makeImmutableObject(result);\n  }\n\n  function asDeepMutable(obj) {\n    if (\n      (!obj) ||\n      (typeof obj !== 'object') ||\n      (!Object.getOwnPropertyDescriptor(obj, immutabilityTag)) ||\n      (obj instanceof Date)\n    ) { return obj; }\n    return Immutable.asMutable(obj, {deep: true});\n  }\n\n  function quickCopy(src, dest) {\n    for (var key in src) {\n      if (Object.getOwnPropertyDescriptor(src, key)) {\n        dest[key] = src[key];\n      }\n    }\n\n    return dest;\n  }\n\n  /**\n   * Returns an Immutable Object containing the properties and values of both\n   * this object and the provided object, prioritizing the provided object's\n   * values whenever the same key is present in both objects.\n   *\n   * @param {object} other - The other object to merge. Multiple objects can be passed as an array. In such a case, the later an object appears in that list, the higher its priority.\n   * @param {object} config - Optional config object that contains settings. Supported settings are: {deep: true} for deep merge and {merger: mergerFunc} where mergerFunc is a function\n   *                          that takes a property from both objects. If anything is returned it overrides the normal merge behaviour.\n   */\n  function merge(other, config) {\n    // Calling .merge() with no arguments is a no-op. Don't bother cloning.\n    if (arguments.length === 0) {\n      return this;\n    }\n\n    if (other === null || (typeof other !== \"object\")) {\n      throw new TypeError(\"Immutable#merge can only be invoked with objects or arrays, not \" + JSON.stringify(other));\n    }\n\n    var receivedArray = (Array.isArray(other)),\n        deep          = config && config.deep,\n        mode          = config && config.mode || 'merge',\n        merger        = config && config.merger,\n        result;\n\n    // Use the given key to extract a value from the given object, then place\n    // that value in the result object under the same key. If that resulted\n    // in a change from this object's value at that key, set anyChanges = true.\n    function addToResult(currentObj, otherObj, key) {\n      var immutableValue = Immutable(otherObj[key]);\n      var mergerResult = merger && merger(currentObj[key], immutableValue, config);\n      var currentValue = currentObj[key];\n\n      if ((result !== undefined) ||\n        (mergerResult !== undefined) ||\n        (!currentObj.hasOwnProperty(key)) ||\n        !isEqual(immutableValue, currentValue)) {\n\n        var newValue;\n\n        if (mergerResult !== undefined) {\n          newValue = mergerResult;\n        } else if (deep && isMergableObject(currentValue) && isMergableObject(immutableValue)) {\n          newValue = Immutable.merge(currentValue, immutableValue, config);\n        } else {\n          newValue = immutableValue;\n        }\n\n        if (!isEqual(currentValue, newValue) || !currentObj.hasOwnProperty(key)) {\n          if (result === undefined) {\n            // Make a shallow clone of the current object.\n            result = quickCopy(currentObj, instantiateEmptyObject(currentObj));\n          }\n\n          result[key] = newValue;\n        }\n      }\n    }\n\n    function clearDroppedKeys(currentObj, otherObj) {\n      for (var key in currentObj) {\n        if (!otherObj.hasOwnProperty(key)) {\n          if (result === undefined) {\n            // Make a shallow clone of the current object.\n            result = quickCopy(currentObj, instantiateEmptyObject(currentObj));\n          }\n          delete result[key];\n        }\n      }\n    }\n\n    var key;\n\n    // Achieve prioritization by overriding previous values that get in the way.\n    if (!receivedArray) {\n      // The most common use case: just merge one object into the existing one.\n      for (key in other) {\n        if (Object.getOwnPropertyDescriptor(other, key)) {\n          addToResult(this, other, key);\n        }\n      }\n      if (mode === 'replace') {\n        clearDroppedKeys(this, other);\n      }\n    } else {\n      // We also accept an Array\n      for (var index = 0, length = other.length; index < length; index++) {\n        var otherFromArray = other[index];\n\n        for (key in otherFromArray) {\n          if (otherFromArray.hasOwnProperty(key)) {\n            addToResult(result !== undefined ? result : this, otherFromArray, key);\n          }\n        }\n      }\n    }\n\n    if (result === undefined) {\n      return this;\n    } else {\n      return makeImmutableObject(result);\n    }\n  }\n\n  function objectReplace(value, config) {\n    var deep          = config && config.deep;\n\n    // Calling .replace() with no arguments is a no-op. Don't bother cloning.\n    if (arguments.length === 0) {\n      return this;\n    }\n\n    if (value === null || typeof value !== \"object\") {\n      throw new TypeError(\"Immutable#replace can only be invoked with objects or arrays, not \" + JSON.stringify(value));\n    }\n\n    return Immutable.merge(this, value, {deep: deep, mode: 'replace'});\n  }\n\n  var immutableEmptyObject = Immutable({});\n\n  function objectSetIn(path, value, config) {\n    if (!(Array.isArray(path)) || path.length === 0) {\n      throw new TypeError(\"The first argument to Immutable#setIn must be an array containing at least one \\\"key\\\" string.\");\n    }\n\n    var head = path[0];\n    if (path.length === 1) {\n      return objectSet.call(this, head, value, config);\n    }\n\n    var tail = path.slice(1);\n    var newValue;\n    var thisHead = this[head];\n\n    if (this.hasOwnProperty(head) && typeof(thisHead) === \"object\" && thisHead !== null) {\n      // Might (validly) be object or array\n      newValue = Immutable.setIn(thisHead, tail, value);\n    } else {\n      newValue = objectSetIn.call(immutableEmptyObject, tail, value);\n    }\n\n    if (this.hasOwnProperty(head) && thisHead === newValue) {\n      return this;\n    }\n\n    var mutable = quickCopy(this, instantiateEmptyObject(this));\n    mutable[head] = newValue;\n    return makeImmutableObject(mutable);\n  }\n\n  function objectSet(property, value, config) {\n    var deep          = config && config.deep;\n\n    if (this.hasOwnProperty(property)) {\n      if (deep && this[property] !== value && isMergableObject(value) && isMergableObject(this[property])) {\n        value = Immutable.merge(this[property], value, {deep: true, mode: 'replace'});\n      }\n      if (isEqual(this[property], value)) {\n        return this;\n      }\n    }\n\n    var mutable = quickCopy(this, instantiateEmptyObject(this));\n    mutable[property] = Immutable(value);\n    return makeImmutableObject(mutable);\n  }\n\n  function update(property, updater) {\n    var restArgs = Array.prototype.slice.call(arguments, 2);\n    var initialVal = this[property];\n    return Immutable.set(this, property, updater.apply(initialVal, [initialVal].concat(restArgs)));\n  }\n\n  function getInPath(obj, path) {\n    /*jshint eqnull:true */\n    for (var i = 0, l = path.length; obj != null && i < l; i++) {\n      obj = obj[path[i]];\n    }\n\n    return (i && i == l) ? obj : undefined;\n  }\n\n  function updateIn(path, updater) {\n    var restArgs = Array.prototype.slice.call(arguments, 2);\n    var initialVal = getInPath(this, path);\n\n    return Immutable.setIn(this, path, updater.apply(initialVal, [initialVal].concat(restArgs)));\n  }\n\n  function getIn(path, defaultValue) {\n    var value = getInPath(this, path);\n    return value === undefined ? defaultValue : value;\n  }\n\n  function asMutableObject(opts) {\n    var result = instantiateEmptyObject(this), key;\n\n    if(opts && opts.deep) {\n      for (key in this) {\n        if (this.hasOwnProperty(key)) {\n          result[key] = asDeepMutable(this[key]);\n        }\n      }\n    } else {\n      for (key in this) {\n        if (this.hasOwnProperty(key)) {\n          result[key] = this[key];\n        }\n      }\n    }\n\n    return result;\n  }\n\n  // Creates plain object to be used for cloning\n  function instantiatePlainObject() {\n    return {};\n  }\n\n  // Finalizes an object with immutable methods, freezes it, and returns it.\n  function makeImmutableObject(obj) {\n    if (!globalConfig.use_static) {\n      addPropertyTo(obj, \"merge\", merge);\n      addPropertyTo(obj, \"replace\", objectReplace);\n      addPropertyTo(obj, \"without\", without);\n      addPropertyTo(obj, \"asMutable\", asMutableObject);\n      addPropertyTo(obj, \"set\", objectSet);\n      addPropertyTo(obj, \"setIn\", objectSetIn);\n      addPropertyTo(obj, \"update\", update);\n      addPropertyTo(obj, \"updateIn\", updateIn);\n      addPropertyTo(obj, \"getIn\", getIn);\n    }\n\n    return makeImmutable(obj, mutatingObjectMethods);\n  }\n\n  // Returns true if object is a valid react element\n  // https://github.com/facebook/react/blob/v15.0.1/src/isomorphic/classic/element/ReactElement.js#L326\n  function isReactElement(obj) {\n    return typeof obj === 'object' &&\n           obj !== null &&\n           (obj.$$typeof === REACT_ELEMENT_TYPE_FALLBACK || obj.$$typeof === REACT_ELEMENT_TYPE);\n  }\n\n  function isFileObject(obj) {\n    return typeof File !== 'undefined' &&\n           obj instanceof File;\n  }\n\n  function isBlobObject(obj) {\n    return typeof Blob !== 'undefined' &&\n           obj instanceof Blob;\n  }\n\n  function isPromise(obj) {\n    return typeof obj === 'object' &&\n           typeof obj.then === 'function';\n  }\n\n  function isError(obj) {\n    return obj instanceof Error;\n  }\n\n  function Immutable(obj, options, stackRemaining) {\n    if (isImmutable(obj) || isReactElement(obj) || isFileObject(obj) || isBlobObject(obj) || isError(obj)) {\n      return obj;\n    } else if (isPromise(obj)) {\n      return obj.then(Immutable);\n    } else if (Array.isArray(obj)) {\n      return makeImmutableArray(obj.slice());\n    } else if (obj instanceof Date) {\n      return makeImmutableDate(new Date(obj.getTime()));\n    } else {\n      // Don't freeze the object we were given; make a clone and use that.\n      var prototype = options && options.prototype;\n      var instantiateEmptyObject =\n        (!prototype || prototype === Object.prototype) ?\n          instantiatePlainObject : (function() { return Object.create(prototype); });\n      var clone = instantiateEmptyObject();\n\n      if (\"development\" !== \"production\") {\n        /*jshint eqnull:true */\n        if (stackRemaining == null) {\n          stackRemaining = 64;\n        }\n        if (stackRemaining <= 0) {\n          throw new ImmutableError(\"Attempt to construct Immutable from a deeply nested object was detected.\" +\n            \" Have you tried to wrap an object with circular references (e.g. React element)?\" +\n            \" See https://github.com/rtfeldman/seamless-immutable/wiki/Deeply-nested-object-was-detected for details.\");\n        }\n        stackRemaining -= 1;\n      }\n\n      for (var key in obj) {\n        if (Object.getOwnPropertyDescriptor(obj, key)) {\n          clone[key] = Immutable(obj[key], undefined, stackRemaining);\n        }\n      }\n\n      return makeImmutableObject(clone);\n    }\n  }\n\n  // Wrapper to allow the use of object methods as static methods of Immutable.\n  function toStatic(fn) {\n    function staticWrapper() {\n      var args = [].slice.call(arguments);\n      var self = args.shift();\n      return fn.apply(self, args);\n    }\n\n    return staticWrapper;\n  }\n\n  // Wrapper to allow the use of object methods as static methods of Immutable.\n  // with the additional condition of choosing which function to call depending\n  // if argument is an array or an object.\n  function toStaticObjectOrArray(fnObject, fnArray) {\n    function staticWrapper() {\n      var args = [].slice.call(arguments);\n      var self = args.shift();\n      if (Array.isArray(self)) {\n          return fnArray.apply(self, args);\n      } else {\n          return fnObject.apply(self, args);\n      }\n    }\n\n    return staticWrapper;\n  }\n\n  // Wrapper to allow the use of object methods as static methods of Immutable.\n  // with the additional condition of choosing which function to call depending\n  // if argument is an array or an object or a date.\n  function toStaticObjectOrDateOrArray(fnObject, fnArray, fnDate) {\n    function staticWrapper() {\n      var args = [].slice.call(arguments);\n      var self = args.shift();\n      if (Array.isArray(self)) {\n          return fnArray.apply(self, args);\n      } else if (self instanceof Date) {\n          return fnDate.apply(self, args);\n      } else {\n          return fnObject.apply(self, args);\n      }\n    }\n\n    return staticWrapper;\n  }\n\n  // Export the library\n  Immutable.from           = Immutable;\n  Immutable.isImmutable    = isImmutable;\n  Immutable.ImmutableError = ImmutableError;\n  Immutable.merge          = toStatic(merge);\n  Immutable.replace        = toStatic(objectReplace);\n  Immutable.without        = toStatic(without);\n  Immutable.asMutable      = toStaticObjectOrDateOrArray(asMutableObject, asMutableArray, asMutableDate);\n  Immutable.set            = toStaticObjectOrArray(objectSet, arraySet);\n  Immutable.setIn          = toStaticObjectOrArray(objectSetIn, arraySetIn);\n  Immutable.update         = toStatic(update);\n  Immutable.updateIn       = toStatic(updateIn);\n  Immutable.getIn          = toStatic(getIn);\n  Immutable.flatMap        = toStatic(flatMap);\n  Immutable.asObject       = toStatic(asObject);\n  if (!globalConfig.use_static) {\n      Immutable.static = immutableInit({\n          use_static: true\n      });\n  }\n\n  Object.freeze(Immutable);\n\n  return Immutable;\n}\n\n  var Immutable = immutableInit();\n  /* istanbul ignore if */\n  if (typeof define === 'function' && define.amd) {\n    define(function() {\n      return Immutable;\n    });\n  } else if (typeof module === \"object\") {\n    module.exports = Immutable;\n  } else if (typeof exports === \"object\") {\n    exports.Immutable = Immutable;\n  } else if (typeof window === \"object\") {\n    window.Immutable = Immutable;\n  } else if (typeof global === \"object\") {\n    global.Immutable = Immutable;\n  }\n})();\n","import Immutable from 'seamless-immutable';\n\n/**\n * ChannelState - A container class for the channel state.\n */\n\nfunction byDate(a, b) {\n\treturn a.created_at - b.created_at;\n}\n\nexport class ChannelState {\n\tconstructor(channel) {\n\t\tthis._channel = channel;\n\t\tthis.watcher_count = 0;\n\t\tthis.typing = Immutable({});\n\t\tthis.read = Immutable({});\n\t\tthis.messages = Immutable([]);\n\t\tthis.threads = Immutable({});\n\t\t// a list of users to hide messages from\n\t\tthis.mutedUsers = Immutable([]);\n\t\tthis.watchers = Immutable({});\n\t\tthis.members = Immutable({});\n\t\tthis.last_message_at =\n\t\t\tchannel.last_message_at != null ? new Date(channel.last_message_at) : null;\n\t}\n\n\t/**\n\t * addMessageSorted - Add a message to the state\n\t *\n\t * @param {object} newMessage A new message\n\t *\n\t */\n\taddMessageSorted(newMessage) {\n\t\treturn this.addMessagesSorted([newMessage]);\n\t}\n\n\t/**\n\t * messageToImmutable - Takes the message object. Parses the dates, sets __html\n\t * and sets the status to received if missing. Returns an immutable message object\n\t *\n\t * @param {object} message an Immutable message object\n\t *\n\t */\n\tmessageToImmutable(message) {\n\t\tmessage.__html = message.html;\n\t\t// parse the date..\n\t\tmessage.created_at = new Date(message.created_at);\n\t\tmessage.updated_at = new Date(message.updated_at);\n\t\tif (!message.status) {\n\t\t\tmessage.status = 'received';\n\t\t}\n\t\treturn Immutable(message);\n\t}\n\n\t/**\n\t * addMessagesSorted - Add the list of messages to state and resorts the messages\n\t *\n\t * @param {array}   newMessages    A list of messages\n\t * @param {boolean} initializing   Weather channel is being initialized.\n\t *\n\t */\n\taddMessagesSorted(newMessages, initializing = false) {\n\t\t// parse all the new message dates and add __html for react\n\t\tconst parsedMessages = [];\n\t\tfor (const message of newMessages) {\n\t\t\tif (initializing && this.threads[message.id]) {\n\t\t\t\t// If we are initializing the state of channel (e.g., in case of connection recovery),\n\t\t\t\t// then in that case we remove thread related to this message from threads object.\n\t\t\t\t// This way we can ensure that we don't have any stale data in thread object\n\t\t\t\t// and consumer can refetch the replies.\n\t\t\t\tthis.threads = Immutable.without(this.threads, message.id);\n\t\t\t}\n\t\t\tconst parsedMsg = this.messageToImmutable(message);\n\t\t\tparsedMessages.push(parsedMsg);\n\t\t\tif (parsedMsg.created_at > this.last_message_at) {\n\t\t\t\tthis.last_message_at = parsedMsg.created_at;\n\t\t\t}\n\t\t}\n\n\t\t// update or append the messages...\n\t\tconst updatedThreads = [];\n\t\tfor (const message of parsedMessages) {\n\t\t\tconst isThreadReply = message.parent_id && !message.show_in_channel;\n\t\t\t// add to the main message list\n\t\t\tif (!isThreadReply) {\n\t\t\t\tthis.messages = this._addToMessageList(this.messages, message);\n\t\t\t}\n\t\t\t// add to the thread if applicable..\n\t\t\tconst parentID = message.parent_id;\n\t\t\tif (parentID) {\n\t\t\t\tconst thread = this.threads[parentID] || Immutable([]);\n\t\t\t\tconst threadMessages = this._addToMessageList(thread, message);\n\t\t\t\tthis.threads = this.threads.set(parentID, threadMessages);\n\t\t\t\tupdatedThreads.push(parentID);\n\t\t\t}\n\t\t}\n\n\t\t// Resort the main messages and the threads that changed...\n\t\tconst messages = [...this.messages];\n\t\tmessages.sort(byDate);\n\t\tthis.messages = Immutable(messages);\n\t\tfor (const parentID of updatedThreads) {\n\t\t\tconst threadMessages = this.threads[parentID]\n\t\t\t\t? [...this.threads[parentID]]\n\t\t\t\t: [];\n\t\t\tthreadMessages.sort(byDate);\n\t\t\tthis.threads = this.threads.set(parentID, threadMessages);\n\t\t}\n\t}\n\n\taddReaction(reaction, message) {\n\t\tconst { messages } = this;\n\t\tif (!message) return;\n\t\tconst { parent_id, show_in_channel } = message;\n\n\t\tif (parent_id && this.threads[parent_id]) {\n\t\t\tconst thread = this.threads[parent_id];\n\n\t\t\tfor (let i = 0; i < thread.length; i++) {\n\t\t\t\tlet message = thread[i];\n\t\t\t\tmessage = this._addReactionToMessage(message, reaction);\n\t\t\t\tif (!message) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tthis.threads = this.threads.set(parent_id, thread.set(i, message));\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif ((!show_in_channel && !parent_id) || show_in_channel) {\n\t\t\tfor (let i = 0; i < messages.length; i++) {\n\t\t\t\tlet message = messages[i];\n\t\t\t\tmessage = this._addReactionToMessage(message, reaction);\n\t\t\t\tif (!message) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tthis.messages = messages.set(i, message);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\t_addReactionToMessage(message, reaction) {\n\t\tconst idMatch = message.id && message.id === reaction.message_id;\n\n\t\tif (!idMatch) {\n\t\t\treturn false;\n\t\t}\n\n\t\tmessage = this._removeReactionFromMessage(message, reaction);\n\t\tif (this._channel.getClient().userID === reaction.user.id) {\n\t\t\tmessage = message.update('own_reactions', (old = []) =>\n\t\t\t\told.concat([reaction]),\n\t\t\t);\n\t\t}\n\t\tmessage = message.update('latest_reactions', (old = []) =>\n\t\t\told.concat([reaction]),\n\t\t);\n\n\t\tmessage = message.updateIn(['reaction_counts', reaction.type], old =>\n\t\t\told ? old + 1 : 1,\n\t\t);\n\n\t\treturn message;\n\t}\n\n\t_removeReactionFromMessage(message, reaction) {\n\t\tconst filterReaction = old =>\n\t\t\told.filter(\n\t\t\t\titem => item.type !== reaction.type || item.user.id !== reaction.user.id,\n\t\t\t);\n\t\tmessage = message.update('own_reactions', filterReaction);\n\t\tmessage = message.update('latest_reactions', filterReaction);\n\t\treturn message;\n\t}\n\n\tremoveReaction(reaction, message) {\n\t\tconst { messages } = this;\n\t\tif (!message) return;\n\t\tconst { parent_id, show_in_channel } = message;\n\n\t\tif (parent_id && this.threads[parent_id]) {\n\t\t\tconst thread = this.threads[parent_id];\n\t\t\tfor (let i = 0; i < thread.length; i++) {\n\t\t\t\tlet message = thread[i];\n\t\t\t\tconst idMatch = message.id && message.id === reaction.message_id;\n\n\t\t\t\tif (!idMatch) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tmessage = this._removeReactionFromMessage(message, reaction);\n\t\t\t\tmessage = message.updateIn(['reaction_counts', reaction.type], old =>\n\t\t\t\t\told ? old - 1 : 0,\n\t\t\t\t);\n\n\t\t\t\tthis.threads = this.threads.set(parent_id, thread.set(i, message));\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif ((!show_in_channel && !parent_id) || show_in_channel) {\n\t\t\tfor (let i = 0; i < messages.length; i++) {\n\t\t\t\tlet message = messages[i];\n\t\t\t\tconst idMatch = message.id && message.id === reaction.message_id;\n\n\t\t\t\tif (!idMatch) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tmessage = this._removeReactionFromMessage(message, reaction);\n\t\t\t\tmessage = message.updateIn(['reaction_counts', reaction.type], old =>\n\t\t\t\t\told ? old - 1 : 0,\n\t\t\t\t);\n\n\t\t\t\tthis.messages = messages.set(i, message);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * _addToMessageList - Adds a message to a list of messages, tries to update first, appends if message isnt found\n\t *\n\t * @param {array} messages A list of messages\n\t * @param {object} newMessage The new message\n\t *\n\t */\n\t_addToMessageList(messages, newMessage) {\n\t\tlet updated = false;\n\n\t\tfor (let i = 0; i < messages.length; i++) {\n\t\t\tconst message = messages[i];\n\t\t\tconst idMatch = message.id && newMessage.id && message.id === newMessage.id;\n\n\t\t\tif (idMatch) {\n\t\t\t\tmessages = messages.set(i, newMessage);\n\t\t\t\tupdated = true;\n\t\t\t}\n\t\t}\n\n\t\tif (!updated) {\n\t\t\tmessages = messages.concat([newMessage]);\n\t\t}\n\n\t\treturn messages;\n\t}\n\n\t/**\n\t * removeMessage - Description\n\t *\n\t * @param {type} messageToRemove Object of the message to remove. Needs to have at id specified.\n\t *\n\t * @return {boolean} Returns if the message was removed\n\t */\n\tremoveMessage(messageToRemove) {\n\t\tlet removed = false;\n\t\tconst messages = this.messages.flatMap(message => {\n\t\t\tconst idMatch =\n\t\t\t\tmessage.id && messageToRemove.id && message.id === messageToRemove.id;\n\n\t\t\tif (idMatch) {\n\t\t\t\treturn [];\n\t\t\t} else {\n\t\t\t\tremoved = true;\n\t\t\t\treturn message;\n\t\t\t}\n\t\t});\n\n\t\tthis.messages = messages;\n\t\treturn removed;\n\t}\n\n\t/**\n\t * filterErrorMessages - Removes error messages from the channel state.\n\t *\n\t */\n\tfilterErrorMessages() {\n\t\tconst filteredMessages = this.messages.flatMap(message => {\n\t\t\tif (message.type !== 'error') {\n\t\t\t\treturn message;\n\t\t\t} else {\n\t\t\t\treturn [];\n\t\t\t}\n\t\t});\n\n\t\tthis.messages = Immutable(filteredMessages);\n\t}\n\n\t/**\n\t * clean - Remove stale data such as users that stayed in typing state for more than 5 seconds\n\t */\n\tclean() {\n\t\tconst now = new Date();\n\t\t// prevent old users from showing up as typing\n\t\tfor (const [userID, lastEvent] of Object.entries(this.typing)) {\n\t\t\tconst since = now - new Date(lastEvent.received_at);\n\t\t\tif (since > 7000) {\n\t\t\t\tthis.typing = this.typing.without(userID);\n\t\t\t\tthis._channel.getClient().dispatchEvent({\n\t\t\t\t\ttype: 'typing.stop',\n\t\t\t\t\tuser: { id: userID },\n\t\t\t\t\tcid: this._channel.cid,\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n}\n","export const EVENT_MAP = {\n\t'user.presence.changed': true,\n\t'user.watching.start': true,\n\t'user.watching.stop': true,\n\t'user.updated': true,\n\t'typing.start': true,\n\t'typing.stop': true,\n\t'message.new': true,\n\t'message.updated': true,\n\t'message.deleted': true,\n\t'message.read': true,\n\t'reaction.new': true,\n\t'reaction.deleted': true,\n\t'member.added': true,\n\t'member.updated': true,\n\t'member.removed': true,\n\t'channel.updated': true,\n\t'channel.deleted': true,\n\t'health.check': true,\n\t'notification.message_new': true,\n\t'notification.mark_read': true,\n\t'notification.invited': true,\n\t'notification.invite_accepted': true,\n\t'notification.added_to_channel': true,\n\t'notification.removed_from_channel': true,\n\t'notification.mutes_updated': true,\n\t// local events\n\t'connection.changed': true,\n\t'connection.recovered': true,\n};\n\nexport function isValidEventType(eventType) {\n\tif (eventType === 'all') {\n\t\treturn true;\n\t}\n\treturn EVENT_MAP[eventType] || false;\n}\n","/**\n * logChatPromiseExecution - utility function for logging the execution of a promise..\n *  use this when you want to run the promise and handle errors by logging a warning\n *\n * @param {type} promise The promise you want to run and log\n * @param {type} name    A descriptive name of what the promise does for log output\n *\n */\n\nexport function logChatPromiseExecution(promise, name) {\n\tpromise\n\t\t.then(() => {\n\t\t\t// do nothing...\n\t\t})\n\t\t.catch(error => {\n\t\t\tconsole.warn(`failed to do ${name}, ran into error: `, error);\n\t\t});\n}\n\nexport const sleep = m => new Promise(r => setTimeout(r, m));\n","import Immutable from 'seamless-immutable';\nimport { ChannelState } from './channel_state';\nimport { isValidEventType } from './events';\nimport { logChatPromiseExecution } from './utils';\n\n/**\n * Channel - The Channel class manages it's own state.\n */\nexport class Channel {\n\t/**\n\t * constructor - Create a channel\n\t *\n\t * @param {Client} client the chat client\n\t * @param {string} type  the type of channel\n\t * @param {string} [id]  the id of the chat\n\t * @param {type} custom any additional custom params\n\t *\n\t * @return {Channel} Returns a new uninitialized channel\n\t */\n\tconstructor(client, type, id, data) {\n\t\tconst validTypeRe = /^[\\w_-]+$/;\n\t\tconst validIDRe = /^[\\w!_-]+$/;\n\n\t\tif (!validTypeRe.test(type)) {\n\t\t\tthrow new Error(\n\t\t\t\t`Invalid chat type ${type}, letters, numbers and \"_-\" are allowed`,\n\t\t\t);\n\t\t}\n\t\tif (!validIDRe.test(id)) {\n\t\t\tthrow new Error(\n\t\t\t\t`Invalid chat id ${id}, letters, numbers and \"!-_\" are allowed`,\n\t\t\t);\n\t\t}\n\n\t\tthis._client = client;\n\t\tthis.type = type;\n\t\tthis.id = id;\n\t\t// used by the frontend, gets updated:\n\t\tthis.data = data;\n\t\t// this._data is used for the requests...\n\t\tthis._data = { ...data };\n\n\t\tthis.cid = `${type}:${id}`;\n\t\tthis.listeners = {};\n\t\t// perhaps the state variable should be private\n\t\tthis.state = new ChannelState(this);\n\t\tthis.initialized = false;\n\t\tthis.lastTypingEvent = null;\n\t\tthis.isTyping = false;\n\t\tthis.disconnected = false;\n\t}\n\n\t/**\n\t * getClient - Get the chat client for this channel. If client.disconnect() was called, this function will error\n\t *\n\t * @return {object}\n\t */\n\tgetClient() {\n\t\tif (this.disconnected === true) {\n\t\t\tthrow Error(`You can't use a channel after client.disconnect() was called`);\n\t\t}\n\t\treturn this._client;\n\t}\n\n\t/**\n\t * getConfig - Get the configs for this channel type\n\t *\n\t * @return {object}\n\t */\n\tgetConfig() {\n\t\tconst client = this.getClient();\n\t\treturn client.configs[this.type];\n\t}\n\n\t/**\n\t * sendMessage - Send a message to this channel\n\t *\n\t * @param {object} message The Message object\n\t *\n\t * @return {object} The Server Response\n\t */\n\n\tasync sendMessage(message) {\n\t\tconst data = await this.getClient().post(this._channelURL() + '/message', {\n\t\t\tmessage,\n\t\t});\n\t\treturn data;\n\t}\n\n\tsendFile(uri, name, contentType, user) {\n\t\treturn this.getClient().sendFile(\n\t\t\t`${this._channelURL()}/file`,\n\t\t\turi,\n\t\t\tname,\n\t\t\tcontentType,\n\t\t\tuser,\n\t\t);\n\t}\n\n\tsendImage(uri, name, contentType, user) {\n\t\treturn this.getClient().sendFile(\n\t\t\t`${this._channelURL()}/image`,\n\t\t\turi,\n\t\t\tname,\n\t\t\tcontentType,\n\t\t\tuser,\n\t\t);\n\t}\n\n\tdeleteFile(url) {\n\t\treturn this.getClient().delete(`${this._channelURL()}/file`, { url });\n\t}\n\n\tdeleteImage(url) {\n\t\treturn this.getClient().delete(`${this._channelURL()}/image`, { url });\n\t}\n\n\t/**\n\t * sendEvent - Send an event on this channel\n\t *\n\t * @param {object} event for example {type: 'message.read'}\n\t *\n\t * @return {object} The Server Response\n\t */\n\tasync sendEvent(event) {\n\t\tthis._checkInitialized();\n\t\tconst data = await this.getClient().post(this._channelURL() + '/event', {\n\t\t\tevent,\n\t\t});\n\n\t\treturn data;\n\t}\n\n\t/**\n\t * sendReaction - Send a reaction about a message\n\t *\n\t * @param {string} messageID the message id\n\t * @param {object} reaction the reaction object for instance {type: 'love'}\n\t * @param {string} user_id the id of the user (used only for server side request) default null\n\t *\n\t * @return {object} The Server Response\n\t */\n\tasync sendReaction(messageID, reaction, user_id) {\n\t\tif (!messageID) {\n\t\t\tthrow Error(`Message id is missing`);\n\t\t}\n\t\tif (!reaction || Object.keys(reaction).length === 0) {\n\t\t\tthrow Error(`Reaction object is missing`);\n\t\t}\n\t\tconst body = {\n\t\t\treaction,\n\t\t};\n\t\tif (user_id != null) {\n\t\t\tbody.reaction = { ...reaction, user: { id: user_id } };\n\t\t}\n\t\tconst data = await this.getClient().post(\n\t\t\tthis.getClient().baseURL + `/messages/${messageID}/reaction`,\n\t\t\tbody,\n\t\t);\n\t\treturn data;\n\t}\n\n\t/**\n\t * deleteReaction - Delete a reaction by user and type\n\t *\n\t * @param {string} messageID the id of the message from which te remove the reaction\n\t * @param {string} reactionType the type of reaction that should be removed\n\t * @param {string} user_id the id of the user (used only for server side request) default null\n\t *\n\t * @return {object} The Server Response\n\t */\n\tdeleteReaction(messageID, reactionType, user_id) {\n\t\tthis._checkInitialized();\n\t\tif (!reactionType || !messageID) {\n\t\t\tthrow Error(\n\t\t\t\t'Deleting a reaction requires specifying both the message and reaction type',\n\t\t\t);\n\t\t}\n\n\t\tconst url =\n\t\t\tthis.getClient().baseURL + `/messages/${messageID}/reaction/${reactionType}`;\n\t\t//provided when server side request\n\t\tif (user_id) {\n\t\t\treturn this.getClient().delete(url, { user_id });\n\t\t}\n\n\t\treturn this.getClient().delete(url);\n\t}\n\n\t/**\n\t * update - Edit the channel's custom properties\n\t *\n\t * @param {object} custom The object to update the custom properties of this channel with\n\t *\n\t * @return {type} The server response\n\t */\n\tasync update(channelData, updateMessage) {\n\t\tconst data = await this.getClient().post(this._channelURL(), {\n\t\t\tmessage: updateMessage,\n\t\t\tdata: channelData,\n\t\t});\n\t\tthis.data = data.channel;\n\t\treturn data;\n\t}\n\n\t/**\n\t * delete - Delete the channel.. Messages are permanently removed.\n\t *\n\t * @return {object} The server response\n\t */\n\tasync delete() {\n\t\tconst data = await this.getClient().delete(this._channelURL());\n\t\treturn data;\n\t}\n\n\t/**\n\t * truncate - Removes all messages from the channel\n\t *\n\t * @return {object} The server response\n\t */\n\tasync truncate() {\n\t\tconst data = await this.getClient().post(this._channelURL() + '/truncate');\n\t\treturn data;\n\t}\n\n\tasync acceptInvite(options = {}) {\n\t\tconst data = await this.getClient().post(this._channelURL(), {\n\t\t\taccept_invite: true,\n\t\t\t...options,\n\t\t});\n\t\tthis.data = data.channel;\n\t\treturn data;\n\t}\n\n\tasync rejectInvite(options = {}) {\n\t\tconst data = await this.getClient().post(this._channelURL(), {\n\t\t\treject_invite: true,\n\t\t\t...options,\n\t\t});\n\t\tthis.data = data.channel;\n\t\treturn data;\n\t}\n\n\tasync addMembers(members) {\n\t\tconst data = await this.getClient().post(this._channelURL(), {\n\t\t\tadd_members: members,\n\t\t});\n\t\tthis.data = data.channel;\n\t\treturn data;\n\t}\n\n\tasync addModerators(members) {\n\t\tconst data = await this.getClient().post(this._channelURL(), {\n\t\t\tadd_moderators: members,\n\t\t});\n\t\tthis.data = data.channel;\n\t\treturn data;\n\t}\n\n\tasync removeMembers(members) {\n\t\tconst data = await this.getClient().post(this._channelURL(), {\n\t\t\tremove_members: members,\n\t\t});\n\t\tthis.data = data.channel;\n\t\treturn data;\n\t}\n\n\tasync demoteModerators(members) {\n\t\tconst data = await this.getClient().post(this._channelURL(), {\n\t\t\tdemote_moderators: members,\n\t\t});\n\t\tthis.data = data.channel;\n\t\treturn data;\n\t}\n\n\tsendAction(messageID, formData) {\n\t\tthis._checkInitialized();\n\t\tif (!messageID) {\n\t\t\tthrow Error(`Message id is missing`);\n\t\t}\n\t\treturn this.getClient().post(\n\t\t\tthis.getClient().baseURL + `/messages/${messageID}/action`,\n\t\t\t{\n\t\t\t\tmessage_id: messageID,\n\t\t\t\tform_data: formData,\n\t\t\t\tid: this.id,\n\t\t\t\ttype: this.type,\n\t\t\t},\n\t\t);\n\t}\n\n\t/**\n\t * keystroke - First of the typing.start and typing.stop events based on the users keystrokes.\n\t *  Call this on every keystroke\n\t */\n\tasync keystroke() {\n\t\tif (!this.getConfig().typing_events) {\n\t\t\treturn;\n\t\t}\n\t\tconst now = new Date();\n\t\tconst diff = now - this.lastTypingEvent;\n\t\tthis.lastKeyStroke = now;\n\t\tthis.isTyping = true;\n\t\t// send a typing.start every 2 seconds\n\t\tif (diff > 2000) {\n\t\t\tthis.lastTypingEvent = new Date();\n\t\t\tawait this.sendEvent({\n\t\t\t\ttype: 'typing.start',\n\t\t\t});\n\t\t}\n\t}\n\n\t/**\n\t * stopTyping - Sets last typing to null and sends the typing.stop event\n\t */\n\tasync stopTyping() {\n\t\tif (!this.getConfig().typing_events) {\n\t\t\treturn;\n\t\t}\n\t\tthis.lastTypingEvent = null;\n\t\tthis.isTyping = false;\n\t\tawait this.sendEvent({\n\t\t\ttype: 'typing.stop',\n\t\t});\n\t}\n\n\t/**\n\t * lastMessage - return the last message, takes into account that last few messages might not be perfectly sorted\n\t *\n\t * @return {type} Description\n\t */\n\tlastMessage() {\n\t\t// get last 5 messages, sort, return the latest\n\t\t// get a slice of the last 5\n\t\tlet min = this.state.messages.length - 5;\n\t\tif (min < 0) {\n\t\t\tmin = 0;\n\t\t}\n\t\tconst max = this.state.messages.length + 1;\n\t\tconst messageSlice = this.state.messages.slice(min, max).asMutable();\n\n\t\t// sort by pk desc\n\t\tmessageSlice.sort((a, b) => b.created_at - a.created_at);\n\n\t\tlet lastMessage;\n\t\tif (messageSlice.length > 0) {\n\t\t\tlastMessage = messageSlice[0];\n\t\t}\n\t\treturn lastMessage;\n\t}\n\n\t/**\n\t * markRead - Send the mark read event for this user, only works if the `read_events` setting is enabled\n\t *\n\t * @return {Promise} Description\n\t */\n\tasync markRead(data = {}) {\n\t\tthis._checkInitialized();\n\n\t\tif (!this.getConfig().read_events) {\n\t\t\treturn Promise.resolve(null);\n\t\t}\n\n\t\tconst response = await this.getClient().post(this._channelURL() + '/read', {\n\t\t\t...data,\n\t\t});\n\n\t\treturn response;\n\t}\n\n\t/**\n\t * clean - Cleans the channel state and fires stop typing if needed\n\t */\n\tclean() {\n\t\tif (this.lastKeyStroke) {\n\t\t\tconst now = new Date();\n\t\t\tconst diff = now - this.lastKeyStroke;\n\t\t\tif (diff > 1000 && this.isTyping) {\n\t\t\t\tlogChatPromiseExecution(this.stopTyping(), 'stop typing event');\n\t\t\t}\n\t\t}\n\n\t\tthis.state.clean();\n\t}\n\n\t/**\n\t * watch - Loads the initial channel state and watches for changes\n\t *\n\t * @param {object} options additional options for the query endpoint\n\t *\n\t * @return {object} The server response\n\t */\n\tasync watch(options) {\n\t\tconst defaultOptions = {\n\t\t\tstate: true,\n\t\t\twatch: true,\n\t\t\tpresence: false,\n\t\t};\n\n\t\t// Make sure we wait for the connect promise if there is a pending one\n\t\tawait this.getClient().wsPromise;\n\n\t\tif (!this.getClient()._hasConnectionID()) {\n\t\t\tdefaultOptions.watch = false;\n\t\t}\n\n\t\tconst combined = { ...defaultOptions, ...options };\n\t\tconst state = await this.query(combined);\n\t\tthis.initialized = true;\n\t\tthis._initializeState(state);\n\t\tthis.data = state.channel;\n\n\t\tthis._client.logger(\n\t\t\t'info',\n\t\t\t`channel:watch() - started watching channel ${this.cid}`,\n\t\t\t{\n\t\t\t\ttags: ['channel'],\n\t\t\t\tchannel: this,\n\t\t\t},\n\t\t);\n\t\treturn state;\n\t}\n\n\t/**\n\t * stopwatching - Stops watching the channel\n\t *\n\t * @return {object} The server response\n\t */\n\tasync stopWatching() {\n\t\tconst response = await this.getClient().post(\n\t\t\tthis._channelURL() + '/stop-watching',\n\t\t\t{},\n\t\t);\n\n\t\tthis._client.logger(\n\t\t\t'info',\n\t\t\t`channel:watch() - stopped watching channel ${this.cid}`,\n\t\t\t{\n\t\t\t\ttags: ['channel'],\n\t\t\t\tchannel: this,\n\t\t\t},\n\t\t);\n\n\t\treturn response;\n\t}\n\n\t/**\n\t * getReplies - List the message replies for a parent message\n\t *\n\t * @param {type} parent_id The message parent id, ie the top of the thread\n\t * @param {type} options   Pagination params, ie {limit:10, idlte: 10}\n\t *\n\t * @return {type} A response with a list of messages\n\t */\n\tasync getReplies(parent_id, options) {\n\t\tconst data = await this.getClient().get(\n\t\t\tthis.getClient().baseURL + `/messages/${parent_id}/replies`,\n\t\t\t{\n\t\t\t\t...options,\n\t\t\t},\n\t\t);\n\n\t\t// add any messages to our thread state\n\t\tif (data.messages) {\n\t\t\tthis.state.addMessagesSorted(data.messages);\n\t\t}\n\n\t\treturn data;\n\t}\n\n\t/**\n\t * getReactions - List the reactions, supports pagination\n\t *\n\t * @param {string} message_id The message id\n\t * @param {object} options    The pagination options\n\t *\n\t * @return {object} Server response\n\t */\n\tasync getReactions(message_id, options) {\n\t\tconst data = await this.getClient().get(\n\t\t\tthis.getClient().baseURL + `/messages/${message_id}/reactions`,\n\t\t\t{\n\t\t\t\t...options,\n\t\t\t},\n\t\t);\n\t\treturn data;\n\t}\n\n\t/**\n\t * lastRead - returns the last time the user marked the channel as read if the user never marked the channel as read, this will return null\n\t * @return {date}\n\t */\n\tlastRead() {\n\t\tthis._checkInitialized();\n\t\treturn this.state.read[this.getClient().userID]\n\t\t\t? this.state.read[this.getClient().userID].last_read\n\t\t\t: null;\n\t}\n\n\t/**\n\t * countUnread - Count the number of messages with a date thats newer than the last read timestamp\n\t *\n\t * @param [date] lastRead the time that the user read a message, defaults to current user's read state\n\t *\n\t * @return {int} Unread count\n\t */\n\tcountUnread(lastRead) {\n\t\tif (lastRead == null) {\n\t\t\tlastRead = this.lastRead();\n\t\t}\n\t\tlet count = 0;\n\t\tfor (const m of this.state.messages) {\n\t\t\tif (this.getClient().userID === m.user.id) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (lastRead == null) {\n\t\t\t\tcount++;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (m.created_at > lastRead) {\n\t\t\t\tcount++;\n\t\t\t}\n\t\t}\n\t\treturn count;\n\t}\n\n\t/**\n\t * countUnread - Count the number of unread messages mentioning the current user\n\t *\n\t * @return {int} Unread mentions count\n\t */\n\tcountUnreadMentions() {\n\t\tconst lastRead = this.lastRead();\n\t\tlet count = 0;\n\t\tfor (const m of this.state.messages) {\n\t\t\tif (this.getClient().userID === m.user.id) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (lastRead == null) {\n\t\t\t\tcount++;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (m.created_at > lastRead) {\n\t\t\t\tif (\n\t\t\t\t\tm.mentioned_users.map(u => u.id).indexOf(this.getClient().userID) !==\n\t\t\t\t\t-1\n\t\t\t\t) {\n\t\t\t\t\tcount++;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn count;\n\t}\n\n\t/**\n\t * create - Creates a new channel\n\t *\n\t * @return {type} The Server Reponse\n\t */\n\tcreate = async () => {\n\t\tconst options = {\n\t\t\twatch: false,\n\t\t\tstate: false,\n\t\t\tpresence: false,\n\t\t};\n\t\treturn await this.query(options);\n\t};\n\n\t/**\n\t * query - Query the API, get messages, members or other channel fields\n\t *\n\t * @param {object} options The query options\n\t *\n\t * @return {object} Returns a query response\n\t */\n\tasync query(options) {\n\t\t// Make sure we wait for the connect promise if there is a pending one\n\t\tawait this.getClient().wsPromise;\n\n\t\tlet queryURL = `${this.getClient().baseURL}/channels/${this.type}`;\n\t\tif (this.id) {\n\t\t\tqueryURL += `/${this.id}`;\n\t\t}\n\n\t\tconst state = await this.getClient().post(queryURL + '/query', {\n\t\t\tdata: this._data,\n\t\t\tstate: true,\n\t\t\t...options,\n\t\t});\n\n\t\t// update the channel id if it was missing\n\t\tif (!this.id) {\n\t\t\tthis.id = state.channel.id;\n\t\t\tthis.cid = state.channel.cid;\n\t\t\t// set the channel as active...\n\t\t\tif (!(this.cid in this.getClient().activeChannels)) {\n\t\t\t\tthis.getClient().activeChannels[this.cid] = this;\n\t\t\t}\n\t\t}\n\n\t\tthis.getClient()._addChannelConfig(state);\n\n\t\t// add any messages to our channel state\n\t\tthis._initializeState(state);\n\n\t\treturn state;\n\t}\n\n\t/**\n\t * banUser - Bans a user from a channel\n\t *\n\t * @param targetUserID\n\t * @param options\n\t * @returns {Promise<*>}\n\t */\n\tasync banUser(targetUserID, options) {\n\t\tthis._checkInitialized();\n\t\treturn await this.getClient().banUser(targetUserID, {\n\t\t\t...options,\n\t\t\ttype: this.type,\n\t\t\tid: this.id,\n\t\t});\n\t}\n\n\t/**\n\t * banUser - Removes the bans for a user on a channel\n\t *\n\t * @param targetUserID\n\t * @returns {Promise<*>}\n\t */\n\tasync unbanUser(targetUserID) {\n\t\tthis._checkInitialized();\n\t\treturn await this.getClient().unbanUser(targetUserID, {\n\t\t\ttype: this.type,\n\t\t\tid: this.id,\n\t\t});\n\t}\n\n\t/**\n\t * on - Listen to events on this channel.\n\t *\n\t * channel.on('message.new', event => {console.log(\"my new message\", event, channel.state.messages)})\n\t * or\n\t * channel.on(event => {console.log(event.type)})\n\t *\n\t * @param {string} callbackOrString  The event type to listen for (optional)\n\t * @param {function} callbackOrNothing The callback to call\n\t *\n\t * @return {type} Description\n\t */\n\ton(callbackOrString, callbackOrNothing) {\n\t\tconst key = callbackOrNothing ? callbackOrString : 'all';\n\t\tconst valid = isValidEventType(key);\n\t\tif (!valid) {\n\t\t\tthrow Error(`Invalid event type ${key}`);\n\t\t}\n\t\tconst callback = callbackOrNothing ? callbackOrNothing : callbackOrString;\n\t\tif (!(key in this.listeners)) {\n\t\t\tthis.listeners[key] = [];\n\t\t}\n\t\tthis._client.logger(\n\t\t\t'info',\n\t\t\t`Attaching listener for ${key} event on channel ${this.cid}`,\n\t\t\t{\n\t\t\t\ttags: ['event', 'channel'],\n\t\t\t\tchannel: this,\n\t\t\t},\n\t\t);\n\n\t\tthis.listeners[key].push(callback);\n\t}\n\n\t/**\n\t * off - Remove the event handler\n\t *\n\t */\n\toff(callbackOrString, callbackOrNothing) {\n\t\tthis._checkInitialized();\n\t\tconst key = callbackOrNothing ? callbackOrString : 'all';\n\t\tconst valid = isValidEventType(key);\n\t\tif (!valid) {\n\t\t\tthrow Error(`Invalid event type ${key}`);\n\t\t}\n\t\tconst callback = callbackOrNothing ? callbackOrNothing : callbackOrString;\n\t\tif (!(key in this.listeners)) {\n\t\t\tthis.listeners[key] = [];\n\t\t}\n\n\t\tthis._client.logger(\n\t\t\t'info',\n\t\t\t`Removing listener for ${key} event from channel ${this.cid}`,\n\t\t\t{ tags: ['event', 'channel'], channel: this },\n\t\t);\n\t\tthis.listeners[key] = this.listeners[key].filter(value => value !== callback);\n\t}\n\n\t_handleChannelEvent(event) {\n\t\tconst channel = this;\n\t\tthis._client.logger(\n\t\t\t'info',\n\t\t\t`channel:_handleChannelEvent - Received event of type { ${event.type} } on ${\n\t\t\t\tthis.cid\n\t\t\t}`,\n\t\t\t{\n\t\t\t\ttags: ['event', 'channel'],\n\t\t\t\tchannel: this,\n\t\t\t},\n\t\t);\n\n\t\tconst s = channel.state;\n\t\tswitch (event.type) {\n\t\t\tcase 'typing.start':\n\t\t\t\ts.typing = s.typing.set(event.user.id, Immutable(event));\n\t\t\t\tbreak;\n\t\t\tcase 'typing.stop':\n\t\t\t\ts.typing = s.typing.without(event.user.id);\n\t\t\t\tbreak;\n\t\t\tcase 'message.read':\n\t\t\t\ts.read = s.read.set(\n\t\t\t\t\tevent.user.id,\n\t\t\t\t\tImmutable({ user: { ...event.user }, last_read: event.received_at }),\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\tcase 'user.watching.start':\n\t\t\tcase 'user.updated':\n\t\t\t\ts.watchers = s.watchers.set(event.user.id, Immutable(event.user));\n\t\t\t\tbreak;\n\t\t\tcase 'user.watching.stop':\n\t\t\t\ts.watchers = s.watchers.without(event.user.id);\n\t\t\t\tbreak;\n\t\t\tcase 'message.new':\n\t\t\tcase 'message.updated':\n\t\t\tcase 'message.deleted':\n\t\t\t\ts.addMessageSorted(event.message);\n\t\t\t\tbreak;\n\t\t\tcase 'member.added':\n\t\t\tcase 'member.updated':\n\t\t\t\ts.members = s.members.set(event.member.user_id, Immutable(event.member));\n\t\t\t\tbreak;\n\t\t\tcase 'member.removed':\n\t\t\t\ts.members = s.members.without(event.user.id);\n\t\t\t\tbreak;\n\t\t\tcase 'channel.updated':\n\t\t\t\tchannel.data = Immutable(event.channel);\n\t\t\t\tbreak;\n\t\t\tcase 'reaction.new':\n\t\t\t\ts.addReaction(event.reaction, event.message);\n\t\t\t\tbreak;\n\t\t\tcase 'reaction.deleted':\n\t\t\t\ts.removeReaction(event.reaction, event.message);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t}\n\n\t\t// any event can send over the online count\n\t\tif (event.watcher_count !== undefined) {\n\t\t\tchannel.state.watcher_count = event.watcher_count;\n\t\t}\n\n\t\t// gather and call the listeners\n\t\tconst listeners = [];\n\t\tif (channel.listeners.all) {\n\t\t\tlisteners.push(...channel.listeners.all);\n\t\t}\n\t\tif (channel.listeners[event.type]) {\n\t\t\tlisteners.push(...channel.listeners[event.type]);\n\t\t}\n\n\t\t// call the event and send it to the listeners\n\t\tfor (const listener of listeners) {\n\t\t\tlistener(event);\n\t\t}\n\t}\n\n\t/**\n\t * _channelURL - Returns the channel url\n\t *\n\t * @return {string} The channel url\n\t */\n\t_channelURL = () => {\n\t\tif (!this.id) {\n\t\t\tthrow new Error('channel id is not defined');\n\t\t}\n\t\tconst channelURL = `${this.getClient().baseURL}/channels/${this.type}/${this.id}`;\n\t\treturn channelURL;\n\t};\n\n\t_checkInitialized() {\n\t\tif (!this.initialized && !this.getClient()._isUsingServerAuth()) {\n\t\t\tthrow Error(\n\t\t\t\t`Channel ${\n\t\t\t\t\tthis.cid\n\t\t\t\t} hasn't been initialized yet. Make sure to call .watch() and wait for it to resolve`,\n\t\t\t);\n\t\t}\n\t}\n\n\t_initializeState(state) {\n\t\t// add the Users\n\t\tif (state.members) {\n\t\t\tfor (const m of state.members) {\n\t\t\t\tthis.getClient().state.updateUserReference(m.user, this.cid);\n\t\t\t}\n\t\t}\n\n\t\tif (state.watchers) {\n\t\t\tfor (const w of state.watchers) {\n\t\t\t\tthis.getClient().state.updateUserReference(w.user, this.cid);\n\t\t\t}\n\t\t}\n\n\t\t// immutable list of maps\n\t\tconst messages = state.messages || [];\n\t\tif (!this.state.messages) {\n\t\t\tthis.state.messages = Immutable([]);\n\t\t}\n\t\tthis.state.addMessagesSorted(messages, true);\n\t\tthis.state.watcher_count = state.watcher_count;\n\t\t// convert the arrays into objects for easier syncing...\n\t\tif (state.watchers) {\n\t\t\tfor (const watcher of state.watchers) {\n\t\t\t\tthis.state.watchers = this.state.watchers.set(watcher.id, watcher);\n\t\t\t}\n\t\t}\n\t\tif (state.read) {\n\t\t\tif (this.getClient().userID != null) {\n\t\t\t\tthis.state.read = this.state.read.set(\n\t\t\t\t\tthis.getClient().user.id,\n\t\t\t\t\tnew Date(0),\n\t\t\t\t);\n\t\t\t}\n\t\t\tfor (const read of state.read) {\n\t\t\t\tconst parsedRead = Object.assign({ ...read });\n\t\t\t\tparsedRead.last_read = new Date(read.last_read);\n\t\t\t\tthis.state.read = this.state.read.set(read.user.id, parsedRead);\n\t\t\t}\n\t\t}\n\t\tif (state.members) {\n\t\t\tfor (const m of state.members) {\n\t\t\t\tthis.state.members = this.state.members.set(m.user.id, m);\n\t\t\t}\n\t\t}\n\t}\n\n\t_disconnect() {\n\t\tthis._client.logger(\n\t\t\t'info',\n\t\t\t`channel:disconnect() - Disconnecting the channel ${this.cid}`,\n\t\t\t{\n\t\t\t\ttags: ['connection', 'channel'],\n\t\t\t\tchannel: this,\n\t\t\t},\n\t\t);\n\n\t\tthis.disconnected = true;\n\t}\n}\n","import Immutable from 'seamless-immutable';\n\n/**\n * ClientState - A container class for the client state.\n */\nexport class ClientState {\n\tconstructor() {\n\t\t// show the status for a certain user...\n\t\t// ie online, offline etc\n\t\tthis.users = Immutable({});\n\t\t// store which channels contain references to the specified user...\n\t\tthis.userChannelReferences = {};\n\t}\n\n\tupdateUsers(users) {\n\t\tfor (const user of users) {\n\t\t\tthis.updateUser(user);\n\t\t}\n\t}\n\n\tupdateUser(user) {\n\t\tif (user != null) {\n\t\t\tthis.users = this.users.set(user.id, Immutable(user));\n\t\t}\n\t}\n\n\tupdateUserReference(user, channelID) {\n\t\tif (user == null) {\n\t\t\treturn;\n\t\t}\n\t\tthis.updateUser(user);\n\t\tif (!this.userChannelReferences[user.id]) {\n\t\t\tthis.userChannelReferences[user.id] = {};\n\t\t}\n\t\tthis.userChannelReferences[user.id][channelID] = true;\n\t}\n}\n","// https://github.com/maxogden/websocket-stream/blob/48dc3ddf943e5ada668c31ccd94e9186f02fafbd/ws-fallback.js\n\nvar ws = null\n\nif (typeof WebSocket !== 'undefined') {\n  ws = WebSocket\n} else if (typeof MozWebSocket !== 'undefined') {\n  ws = MozWebSocket\n} else if (typeof global !== 'undefined') {\n  ws = global.WebSocket || global.MozWebSocket\n} else if (typeof window !== 'undefined') {\n  ws = window.WebSocket || window.MozWebSocket\n} else if (typeof self !== 'undefined') {\n  ws = self.WebSocket || self.MozWebSocket\n}\n\nmodule.exports = ws\n","import isoWS from 'isomorphic-ws';\nimport { sleep } from './utils';\n/**\n * StableWSConnection - A WS connection that reconnects upon failure.\n * - the browser will sometimes report that you're online or offline\n * - the WS connection can break and fail (there is a 30s health check)\n * - sometimes your WS connection will seem to work while the user is in fact offline\n * - to speed up online/offline detection you can use the window.addEventListener('offline');\n *\n * There are 4 ways in which a connection can become unhealthy:\n * - websocket.onerror is called\n * - websocket.onclose is called\n * - the health check fails and no event is received for ~40 seconds\n * - the browser indicates the connection is now offline\n *\n * There are 2 assumptions we make about the server:\n * - state can be recovered by querying the channel again\n * - if the servers fails to publish a message to the client, the WS connection is destroyed\n */\nexport class StableWSConnection {\n\tconstructor({\n\t\twsURL,\n\t\tclientID,\n\t\tuserID,\n\t\tmessageCallback,\n\t\trecoverCallback,\n\n\t\teventCallback,\n\t\tlogger,\n\t}) {\n\t\tthis.wsURL = wsURL;\n\t\tthis.clientID = clientID;\n\t\tthis.userID = userID;\n\t\t/** consecutive failures influence the duration of the timeout */\n\t\tthis.consecutiveFailures = 0;\n\t\t/** keep track of the total number of failures */\n\t\tthis.totalFailures = 0;\n\n\t\t/** We only make 1 attempt to reconnect at the same time.. */\n\t\tthis.isConnecting = false;\n\t\t/** Boolean that indicates if we have a working connection to the server */\n\t\tthis.isHealthy = false;\n\n\t\t/** Callback when the connection fails and recovers */\n\t\tthis.recoverCallback = recoverCallback;\n\t\tthis.messageCallback = messageCallback;\n\t\tthis.eventCallback = eventCallback;\n\n\t\tthis.logger = logger;\n\n\t\t/** Incremented when a new WS connection is made */\n\t\tthis.wsID = 1;\n\n\t\t/** Store the last event time for health checks */\n\t\tthis.lastEvent = null;\n\n\t\t/** Send a health check message every 30 seconds */\n\t\tthis.healthCheckInterval = 30 * 1000;\n\t\t/** Every second we verify that we didn't miss any health checks */\n\t\tthis.monitorInterval = 1 * 1000;\n\n\t\tthis._listenForConnectionChanges();\n\t}\n\n\t/**\n\t * connect - Connect to the WS URL\n\t *\n\t * @return {promise} Promise that completes once the first health check message is received\n\t */\n\tasync connect() {\n\t\tlet healthCheck;\n\t\tif (this.isConnecting) {\n\t\t\tthrow Error(\n\t\t\t\t`You've called connect twice, can only attempt 1 connection at the time`,\n\t\t\t);\n\t\t}\n\t\ttry {\n\t\t\tthis.isConnecting = true;\n\t\t\thealthCheck = await this._connect();\n\t\t\tthis.isConnecting = false;\n\t\t\tthis.consecutiveFailures = 0;\n\t\t\tthis._startMonitor();\n\t\t\tthis._startHealthCheck();\n\t\t\tthis.logger(\n\t\t\t\t'info',\n\t\t\t\t`connection:connect() - Established ws connection with healthcheck: ${healthCheck}`,\n\t\t\t\t{\n\t\t\t\t\ttags: ['connection'],\n\t\t\t\t},\n\t\t\t);\n\t\t\treturn healthCheck;\n\t\t} catch (e) {\n\t\t\tthis.isConnecting = false;\n\t\t\tif (!e.isWSFailure) {\n\t\t\t\t// This is a permanent failure, throw the error...\n\t\t\t\tthrow e;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * disconnect - Disconnect the connection and doesn't recover...\n\t *\n\t */\n\tdisconnect() {\n\t\tthis.logger(\n\t\t\t'info',\n\t\t\t`connection:disconnect() - Closing the websocket connection for wsID ${\n\t\t\t\tthis.wsID\n\t\t\t}`,\n\t\t\t{\n\t\t\t\ttags: ['connection'],\n\t\t\t},\n\t\t);\n\n\t\t// start by removing all the listeners\n\t\tif (this.healthCheckIntervalRef) {\n\t\t\tclearInterval(this.healthCheckIntervalRef);\n\t\t}\n\t\tif (this.monitorIntervalRef) {\n\t\t\tclearInterval(this.monitorIntervalRef);\n\t\t}\n\n\t\tthis._removeConnectionListeners();\n\n\t\t// reset the wsID;\n\t\tthis.wsID = 1;\n\t\tthis.isHealthy = false;\n\n\t\t// remove ws handlers...\n\t\tif (this.ws && this.ws.removeAllListeners) {\n\t\t\tthis.ws.removeAllListeners();\n\t\t}\n\n\t\tlet isClosedPromise;\n\t\t// and finally close...\n\t\tif (this.ws && this.ws.close) {\n\t\t\t// Assigning to local here because we will remove it from this before the\n\t\t\t// promise resolves.\n\t\t\tconst { ws } = this;\n\t\t\tisClosedPromise = new Promise(resolve => {\n\t\t\t\tws.onclose = () => {\n\t\t\t\t\tresolve();\n\t\t\t\t};\n\t\t\t});\n\t\t\tws.close(1000, 'Manually closed connection by calling client.disconnect()');\n\t\t}\n\n\t\tdelete this.ws;\n\n\t\treturn isClosedPromise;\n\t}\n\n\t/**\n\t * _connect - Connect to the WS endpoint\n\t *\n\t * @return {promise} Promise that completes once the first health check message is received\n\t */\n\tasync _connect() {\n\t\tthis._setupConnectionPromise();\n\t\tthis.ws = new isoWS(this.wsURL);\n\t\tthis.ws.onopen = this.onopen.bind(this, this.wsID);\n\t\tthis.ws.onclose = this.onclose.bind(this, this.wsID);\n\t\tthis.ws.onerror = this.onerror.bind(this, this.wsID);\n\t\tthis.ws.onmessage = this.onmessage.bind(this, this.wsID);\n\n\t\tconst response = await this.connectionOpen;\n\t\tthis.connectionID = response.connection_id;\n\n\t\treturn response;\n\t}\n\n\t/**\n\t * _reconnect - Description\n\t *\n\t * @param {int} interval number of ms to wait before connecting\n\t */\n\tasync _reconnect(interval) {\n\t\tthis.logger('info', 'connection:_reconnect() - Initiating the reconnect', {\n\t\t\ttags: ['connection'],\n\t\t});\n\t\t// only allow 1 connection at the time\n\t\tif (this.isConnecting || this.isHealthy) {\n\t\t\tthis.logger(\n\t\t\t\t'info',\n\t\t\t\t'connection:_reconnect() - Abort (1) since already connecting or healthy',\n\t\t\t\t{\n\t\t\t\t\ttags: ['connection'],\n\t\t\t\t},\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\n\t\t// reconnect in case of on error or on close\n\t\t// also reconnect if the health check cycle fails\n\t\tif (interval === undefined) {\n\t\t\tinterval = this._retryInterval();\n\t\t}\n\n\t\t// reconnect, or try again after a little while...\n\t\tawait sleep(interval);\n\n\t\t// Check once again if by some other call to _reconnect is active or connection is\n\t\t// already restored, then no need to proceed.\n\t\tif (this.isConnecting || this.isHealthy) {\n\t\t\tthis.logger(\n\t\t\t\t'info',\n\t\t\t\t'connection:_reconnect() - Abort (2) since already connecting or healthy',\n\t\t\t\t{\n\t\t\t\t\ttags: ['connection'],\n\t\t\t\t},\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\n\t\tthis.isConnecting = true;\n\n\t\t// cleanup the old connection\n\t\tthis.logger(\n\t\t\t'info',\n\t\t\t'connection:_reconnect() : Destroying current WS connection',\n\t\t\t{\n\t\t\t\ttags: ['connection'],\n\t\t\t},\n\t\t);\n\t\tthis._destroyCurrentWSConnection();\n\n\t\ttry {\n\t\t\tconst open = await this._connect();\n\t\t\tif (this.recoverCallback) {\n\t\t\t\tthis.logger(\n\t\t\t\t\t'info',\n\t\t\t\t\t'connection:_reconnect() : Waiting for recoverCallBack',\n\t\t\t\t\t{\n\t\t\t\t\t\ttags: ['connection'],\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t\tawait this.recoverCallback(open);\n\t\t\t\tthis.logger(\n\t\t\t\t\t'info',\n\t\t\t\t\t'connection:_reconnect() : Finished recoverCallBack',\n\t\t\t\t\t{\n\t\t\t\t\t\ttags: ['connection'],\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t}\n\t\t\tthis.isConnecting = false;\n\t\t\tthis.consecutiveFailures = 0;\n\t\t} catch (e) {\n\t\t\tthis.isConnecting = false;\n\t\t\t// reconnect on WS failures, dont reconnect if there is a code bug\n\t\t\tif (e.isWSFailure) {\n\t\t\t\tthis.logger(\n\t\t\t\t\t'info',\n\t\t\t\t\t'connection:_reconnect() : WS failure, so going to try to reconnect',\n\t\t\t\t\t{\n\t\t\t\t\t\ttags: ['connection'],\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t\tthis._reconnect();\n\t\t\t}\n\t\t}\n\t\tthis.logger('info', 'connection:_reconnect() : == END ==', {\n\t\t\ttags: ['connection'],\n\t\t});\n\t}\n\n\t/**\n\t * onlineStatusChanged - this function is called when the browser connects or disconnects from the internet.\n\t *\n\t * @param {object} event Event with type online or offline\n\t *\n\t */\n\tonlineStatusChanged = event => {\n\t\tif (event.type === 'offline') {\n\t\t\t// mark the connection as down\n\t\t\tthis.logger(\n\t\t\t\t'info',\n\t\t\t\t'connection:onlineStatusChanged() : Status changing to offline',\n\t\t\t\t{\n\t\t\t\t\ttags: ['connection'],\n\t\t\t\t},\n\t\t\t);\n\t\t\tthis._setHealth(false);\n\t\t} else if (event.type === 'online') {\n\t\t\t// retry right now...\n\t\t\t// We check this.isHealthy, not sure if it's always\n\t\t\t// smart to create a new WS connection if the old one is still up and running.\n\t\t\t// it's possible we didnt miss any messages, so this process is just expensive and not needed.\n\t\t\tthis.logger(\n\t\t\t\t'info',\n\t\t\t\t`connection:onlineStatusChanged() : Status changing to online. isHealthy: ${\n\t\t\t\t\tthis.isHealthy\n\t\t\t\t}`,\n\t\t\t\t{\n\t\t\t\t\ttags: ['connection'],\n\t\t\t\t},\n\t\t\t);\n\t\t\tif (!this.isHealthy) {\n\t\t\t\tthis._reconnect(10);\n\t\t\t}\n\t\t}\n\t};\n\n\tonopen = wsID => {\n\t\tif (this.wsID !== wsID) return;\n\n\t\t// set healthy..\n\t\tthis._setHealth(true);\n\t};\n\n\tonmessage = (wsID, event) => {\n\t\tif (this.wsID !== wsID) return;\n\n\t\t// we wait till the first message before we consider the connection open..\n\t\t// the reason for this is that auth errors and similar errors trigger a ws.onopen and immediately\n\t\t// after that a ws.onclose..\n\t\tif (!this.isResolved) {\n\t\t\tthis.resolvePromise(event);\n\t\t}\n\n\t\t// trigger the event..\n\t\tthis.lastEvent = new Date();\n\t\tthis.messageCallback(event);\n\t};\n\n\tonclose = (wsID, event) => {\n\t\tif (this.wsID !== wsID) return;\n\n\t\tif (event.code === 1000) {\n\t\t\t// this is a permanent error raised by stream..\n\t\t\t// usually caused by invalid auth details\n\t\t\tconst error = new Error(`WS connection reject with error ${event.reason}`);\n\t\t\terror.reason = event.reason;\n\t\t\tthis.rejectPromise(error);\n\t\t} else {\n\t\t\tthis.consecutiveFailures += 1;\n\t\t\tthis.totalFailures += 1;\n\t\t\tthis._setHealth(false);\n\n\t\t\tthis.rejectPromise(this._errorFromWSEvent(event));\n\n\t\t\t// reconnect if its an abnormal failure\n\t\t\tthis._reconnect();\n\t\t}\n\t};\n\n\tonerror = (wsID, event) => {\n\t\tif (this.wsID !== wsID) return;\n\n\t\tthis.consecutiveFailures += 1;\n\t\tthis.totalFailures += 1;\n\t\tthis._setHealth(false);\n\n\t\tthis.rejectPromise(this._errorFromWSEvent(event));\n\n\t\tthis._reconnect();\n\t};\n\n\t/**\n\t * _setHealth - Sets the connection to healthy or unhealthy.\n\t * Broadcasts an event in case the connection status changed.\n\t *\n\t * @param {bool} healthy boolean indicating if the connection is healthy or not\n\t *\n\t */\n\t_setHealth = healthy => {\n\t\tif (healthy && !this.isHealthy) {\n\t\t\t// yee we are online:\n\t\t\tthis.isHealthy = true;\n\t\t\tthis.eventCallback({\n\t\t\t\ttype: 'connection.changed',\n\t\t\t\tonline: true,\n\t\t\t});\n\t\t}\n\n\t\tif (!healthy && this.isHealthy) {\n\t\t\t// bummer we are offline\n\t\t\tthis.isHealthy = false;\n\t\t\tsetTimeout(() => {\n\t\t\t\tif (!this.isHealthy) {\n\t\t\t\t\tthis.eventCallback({\n\t\t\t\t\t\ttype: 'connection.changed',\n\t\t\t\t\t\tonline: false,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}, 5000);\n\t\t}\n\t};\n\n\t/**\n\t * _errorFromWSEvent - Creates an error object for the WS event\n\t *\n\t */\n\t_errorFromWSEvent = event => {\n\t\tconst error = new Error(`WS failed with code ${event.code}`);\n\t\terror.code = event.code;\n\t\terror.isWSFailure = true;\n\t\treturn error;\n\t};\n\n\t/**\n\t * _listenForConnectionChanges - Adds an event listener for the browser going online or offline\n\t *\n\t */\n\t_listenForConnectionChanges = () => {\n\t\tif (\n\t\t\ttypeof window !== 'undefined' &&\n\t\t\twindow != null &&\n\t\t\twindow.addEventListener != null\n\t\t) {\n\t\t\twindow.addEventListener('offline', this.onlineStatusChanged);\n\t\t\twindow.addEventListener('online', this.onlineStatusChanged);\n\t\t}\n\t};\n\n\t_removeConnectionListeners = () => {\n\t\tif (\n\t\t\ttypeof window !== 'undefined' &&\n\t\t\twindow != null &&\n\t\t\twindow.addEventListener != null\n\t\t) {\n\t\t\twindow.removeEventListener('offline', this.onlineStatusChanged);\n\t\t\twindow.removeEventListener('online', this.onlineStatusChanged);\n\t\t}\n\t};\n\n\t/**\n\t * _destroyCurrentWSConnection - Removes the current WS connnection\n\t *\n\t */\n\t_destroyCurrentWSConnection() {\n\t\t// increment the ID, meaning we will ignore all messages from the old\n\t\t// ws connection from now on.\n\t\tthis.wsID += 1;\n\n\t\ttry {\n\t\t\tif (this.ws && this.ws.removeAllListeners) {\n\t\t\t\tthis.ws.removeAllListeners();\n\t\t\t}\n\n\t\t\tif (this.ws && this.ws.close) {\n\t\t\t\tthis.ws.close();\n\t\t\t}\n\t\t} catch (e) {\n\t\t\t// we dont care\n\t\t}\n\t}\n\n\t/**\n\t * _retryInterval - A retry interval which increases after consecutive failures\n\t *\n\t * @return {int} Duration to wait in milliseconds\n\t */\n\t_retryInterval() {\n\t\t// try to reconnect in 0-5 seconds (random to spread out the load from failures)\n\t\tconst max = Math.min(500 + this.consecutiveFailures * 2000, 25000);\n\t\tconst min = Math.min(Math.max(250, (this.consecutiveFailures - 1) * 2000), 25000);\n\t\treturn Math.floor(Math.random() * (max - min) + min);\n\t}\n\n\t/**\n\t * _setupPromise - sets up the this.connectOpen promise\n\t */\n\t_setupConnectionPromise = () => {\n\t\tconst that = this;\n\t\tthis.isResolved = false;\n\t\t/** a promise that is resolved once ws.open is called */\n\t\tthis.connectionOpen = new Promise(function(resolve, reject) {\n\t\t\tthat.resolvePromise = resolve;\n\t\t\tthat.rejectPromise = reject;\n\t\t}).then(e => {\n\t\t\tconst data = JSON.parse(e.data);\n\t\t\tif (data.error != null) {\n\t\t\t\tthrow new Error(JSON.stringify(data.error));\n\t\t\t}\n\t\t\treturn data;\n\t\t});\n\t};\n\n\t/**\n\t * _startHealthCheck - Sends a message every 30s or so to see if the ws connection still works\n\t *\n\t */\n\t_startHealthCheck() {\n\t\tconst that = this;\n\t\t// 30 seconds is the recommended interval (messenger uses this)\n\t\tthis.healthCheckIntervalRef = setInterval(() => {\n\t\t\t// send the healthcheck.., server replies with a health check event\n\t\t\tconst data = [\n\t\t\t\t{\n\t\t\t\t\ttype: 'health.check',\n\t\t\t\t\tclient_id: that.clientID,\n\t\t\t\t\tuser_id: that.userID,\n\t\t\t\t},\n\t\t\t];\n\t\t\t// try to send on the connection\n\t\t\ttry {\n\t\t\t\tthat.ws.send(JSON.stringify(data));\n\t\t\t} catch (e) {\n\t\t\t\t// error will already be detected elsewhere\n\t\t\t}\n\t\t}, that.healthCheckInterval);\n\t}\n\n\t/**\n\t * _startMonitor - Verifies we didn't miss any events. Marks the connection as failed in case we did.\n\t *\n\t */\n\t_startMonitor() {\n\t\tconst that = this;\n\t\tthis.monitorIntervalRef = setInterval(() => {\n\t\t\tconst now = new Date();\n\t\t\t// means we missed a health check\n\t\t\tif (now - that.lastEvent > this.healthCheckInterval + 10 * 1000) {\n\t\t\t\tthis.logger('info', 'connection:_startMonitor - going to reconnect', {\n\t\t\t\t\ttags: ['connection'],\n\t\t\t\t});\n\t\t\t\tthat._setHealth(false);\n\t\t\t\tthat._reconnect();\n\t\t\t}\n\t\t}, that.monitorInterval);\n\t}\n}\n","export default null;","export default null;","import jwt from 'jsonwebtoken';\nimport crypto from 'crypto';\n\n/**\n * Creates the JWT token that can be used for a UserSession\n * @method JWTUserSessionToken\n * @memberof signing\n * @private\n * @param {string} apiSecret - API Secret key\n * @param {string} userId - The user_id key in the JWT payload\n * @param {object} [extraData] - Extra that should be part of the JWT token\n * @param {object} [jwtOptions] - Options that can be past to jwt.sign\n * @return {string} JWT Token\n */\nexport function JWTUserToken(apiSecret, userId, extraData = {}, jwtOptions = {}) {\n\tif (typeof userId !== 'string') {\n\t\tthrow new TypeError('userId should be a string');\n\t}\n\n\tconst payload = {\n\t\tuser_id: userId,\n\t\t...extraData,\n\t};\n\n\tconst opts = Object.assign({ algorithm: 'HS256', noTimestamp: true }, jwtOptions);\n\treturn jwt.sign(payload, apiSecret, opts);\n}\n\nexport function JWTServerToken(apiSecret, jwtOptions = {}) {\n\tconst payload = {\n\t\tserver: true,\n\t};\n\n\tconst opts = Object.assign({ algorithm: 'HS256', noTimestamp: true }, jwtOptions);\n\treturn jwt.sign(payload, apiSecret, opts);\n}\n\nfunction decodeBase64(s) {\n\tconst e = {},\n\t\tw = String.fromCharCode,\n\t\tL = s.length;\n\tlet i,\n\t\tb = 0,\n\t\tc,\n\t\tx,\n\t\tl = 0,\n\t\ta,\n\t\tr = '';\n\tconst A = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n\tfor (i = 0; i < 64; i++) {\n\t\te[A.charAt(i)] = i;\n\t}\n\tfor (x = 0; x < L; x++) {\n\t\tc = e[s.charAt(x)];\n\t\tb = (b << 6) + c;\n\t\tl += 6;\n\t\twhile (l >= 8) {\n\t\t\t((a = (b >>> (l -= 8)) & 0xff) || x < L - 2) && (r += w(a));\n\t\t}\n\t}\n\treturn r;\n}\n\n/**\n * @return {string}\n */\nexport function UserFromToken(token) {\n\tconst fragments = token.split('.');\n\tif (fragments.length !== 3) {\n\t\treturn '';\n\t}\n\tconst b64Payload = fragments[1];\n\tconst payload = decodeBase64(b64Payload);\n\tconst data = JSON.parse(payload);\n\treturn data.user_id;\n}\n\nfunction encodeBase64(s) {\n\tif (typeof window !== 'undefined' && window.btoa) {\n\t\treturn window.btoa(s);\n\t} else {\n\t\treturn Buffer.from(s.toString(), 'binary').toString('base64');\n\t}\n}\n\n/**\n *\n * @param userId {string} the id of the user\n * @return {string}\n */\nexport function DevToken(userId) {\n\treturn [\n\t\t'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9', //{\"alg\": \"HS256\", \"typ\": \"JWT\"}\n\t\tencodeBase64(JSON.stringify({ user_id: userId })),\n\t\t'devtoken', // hardcoded signature\n\t].join('.');\n}\n\n/**\n *\n * @param body {string} the signed message\n * @param secret {string} the shared secret used to generate the signature (Stream API secret)\n * @param signature {string} the signature to validate\n * @return {boolean}\n */\nexport function CheckSignature(body, secret, signature) {\n\tconst key = Buffer.from(secret, 'ascii');\n\tconst hash = crypto\n\t\t.createHmac('sha256', key)\n\t\t.update(body)\n\t\t.digest('hex');\n\treturn hash === signature;\n}\n","export default null;","export default null;","var __self__ = (function (root) {\nfunction F() { this.fetch = false; }\nF.prototype = root;\nreturn new F();\n})(typeof self !== 'undefined' ? self : this);\n(function(self) {\n\nvar irrelevant = (function (exports) {\n  var support = {\n    searchParams: 'URLSearchParams' in self,\n    iterable: 'Symbol' in self && 'iterator' in Symbol,\n    blob:\n      'FileReader' in self &&\n      'Blob' in self &&\n      (function() {\n        try {\n          new Blob();\n          return true\n        } catch (e) {\n          return false\n        }\n      })(),\n    formData: 'FormData' in self,\n    arrayBuffer: 'ArrayBuffer' in self\n  };\n\n  function isDataView(obj) {\n    return obj && DataView.prototype.isPrototypeOf(obj)\n  }\n\n  if (support.arrayBuffer) {\n    var viewClasses = [\n      '[object Int8Array]',\n      '[object Uint8Array]',\n      '[object Uint8ClampedArray]',\n      '[object Int16Array]',\n      '[object Uint16Array]',\n      '[object Int32Array]',\n      '[object Uint32Array]',\n      '[object Float32Array]',\n      '[object Float64Array]'\n    ];\n\n    var isArrayBufferView =\n      ArrayBuffer.isView ||\n      function(obj) {\n        return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n      };\n  }\n\n  function normalizeName(name) {\n    if (typeof name !== 'string') {\n      name = String(name);\n    }\n    if (/[^a-z0-9\\-#$%&'*+.^_`|~]/i.test(name)) {\n      throw new TypeError('Invalid character in header field name')\n    }\n    return name.toLowerCase()\n  }\n\n  function normalizeValue(value) {\n    if (typeof value !== 'string') {\n      value = String(value);\n    }\n    return value\n  }\n\n  // Build a destructive iterator for the value list\n  function iteratorFor(items) {\n    var iterator = {\n      next: function() {\n        var value = items.shift();\n        return {done: value === undefined, value: value}\n      }\n    };\n\n    if (support.iterable) {\n      iterator[Symbol.iterator] = function() {\n        return iterator\n      };\n    }\n\n    return iterator\n  }\n\n  function Headers(headers) {\n    this.map = {};\n\n    if (headers instanceof Headers) {\n      headers.forEach(function(value, name) {\n        this.append(name, value);\n      }, this);\n    } else if (Array.isArray(headers)) {\n      headers.forEach(function(header) {\n        this.append(header[0], header[1]);\n      }, this);\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function(name) {\n        this.append(name, headers[name]);\n      }, this);\n    }\n  }\n\n  Headers.prototype.append = function(name, value) {\n    name = normalizeName(name);\n    value = normalizeValue(value);\n    var oldValue = this.map[name];\n    this.map[name] = oldValue ? oldValue + ', ' + value : value;\n  };\n\n  Headers.prototype['delete'] = function(name) {\n    delete this.map[normalizeName(name)];\n  };\n\n  Headers.prototype.get = function(name) {\n    name = normalizeName(name);\n    return this.has(name) ? this.map[name] : null\n  };\n\n  Headers.prototype.has = function(name) {\n    return this.map.hasOwnProperty(normalizeName(name))\n  };\n\n  Headers.prototype.set = function(name, value) {\n    this.map[normalizeName(name)] = normalizeValue(value);\n  };\n\n  Headers.prototype.forEach = function(callback, thisArg) {\n    for (var name in this.map) {\n      if (this.map.hasOwnProperty(name)) {\n        callback.call(thisArg, this.map[name], name, this);\n      }\n    }\n  };\n\n  Headers.prototype.keys = function() {\n    var items = [];\n    this.forEach(function(value, name) {\n      items.push(name);\n    });\n    return iteratorFor(items)\n  };\n\n  Headers.prototype.values = function() {\n    var items = [];\n    this.forEach(function(value) {\n      items.push(value);\n    });\n    return iteratorFor(items)\n  };\n\n  Headers.prototype.entries = function() {\n    var items = [];\n    this.forEach(function(value, name) {\n      items.push([name, value]);\n    });\n    return iteratorFor(items)\n  };\n\n  if (support.iterable) {\n    Headers.prototype[Symbol.iterator] = Headers.prototype.entries;\n  }\n\n  function consumed(body) {\n    if (body.bodyUsed) {\n      return Promise.reject(new TypeError('Already read'))\n    }\n    body.bodyUsed = true;\n  }\n\n  function fileReaderReady(reader) {\n    return new Promise(function(resolve, reject) {\n      reader.onload = function() {\n        resolve(reader.result);\n      };\n      reader.onerror = function() {\n        reject(reader.error);\n      };\n    })\n  }\n\n  function readBlobAsArrayBuffer(blob) {\n    var reader = new FileReader();\n    var promise = fileReaderReady(reader);\n    reader.readAsArrayBuffer(blob);\n    return promise\n  }\n\n  function readBlobAsText(blob) {\n    var reader = new FileReader();\n    var promise = fileReaderReady(reader);\n    reader.readAsText(blob);\n    return promise\n  }\n\n  function readArrayBufferAsText(buf) {\n    var view = new Uint8Array(buf);\n    var chars = new Array(view.length);\n\n    for (var i = 0; i < view.length; i++) {\n      chars[i] = String.fromCharCode(view[i]);\n    }\n    return chars.join('')\n  }\n\n  function bufferClone(buf) {\n    if (buf.slice) {\n      return buf.slice(0)\n    } else {\n      var view = new Uint8Array(buf.byteLength);\n      view.set(new Uint8Array(buf));\n      return view.buffer\n    }\n  }\n\n  function Body() {\n    this.bodyUsed = false;\n\n    this._initBody = function(body) {\n      this._bodyInit = body;\n      if (!body) {\n        this._bodyText = '';\n      } else if (typeof body === 'string') {\n        this._bodyText = body;\n      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n        this._bodyBlob = body;\n      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n        this._bodyFormData = body;\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this._bodyText = body.toString();\n      } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n        this._bodyArrayBuffer = bufferClone(body.buffer);\n        // IE 10-11 can't handle a DataView body.\n        this._bodyInit = new Blob([this._bodyArrayBuffer]);\n      } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n        this._bodyArrayBuffer = bufferClone(body);\n      } else {\n        this._bodyText = body = Object.prototype.toString.call(body);\n      }\n\n      if (!this.headers.get('content-type')) {\n        if (typeof body === 'string') {\n          this.headers.set('content-type', 'text/plain;charset=UTF-8');\n        } else if (this._bodyBlob && this._bodyBlob.type) {\n          this.headers.set('content-type', this._bodyBlob.type);\n        } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n          this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8');\n        }\n      }\n    };\n\n    if (support.blob) {\n      this.blob = function() {\n        var rejected = consumed(this);\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return Promise.resolve(this._bodyBlob)\n        } else if (this._bodyArrayBuffer) {\n          return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as blob')\n        } else {\n          return Promise.resolve(new Blob([this._bodyText]))\n        }\n      };\n\n      this.arrayBuffer = function() {\n        if (this._bodyArrayBuffer) {\n          return consumed(this) || Promise.resolve(this._bodyArrayBuffer)\n        } else {\n          return this.blob().then(readBlobAsArrayBuffer)\n        }\n      };\n    }\n\n    this.text = function() {\n      var rejected = consumed(this);\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return readBlobAsText(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as text')\n      } else {\n        return Promise.resolve(this._bodyText)\n      }\n    };\n\n    if (support.formData) {\n      this.formData = function() {\n        return this.text().then(decode)\n      };\n    }\n\n    this.json = function() {\n      return this.text().then(JSON.parse)\n    };\n\n    return this\n  }\n\n  // HTTP methods whose capitalization should be normalized\n  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT'];\n\n  function normalizeMethod(method) {\n    var upcased = method.toUpperCase();\n    return methods.indexOf(upcased) > -1 ? upcased : method\n  }\n\n  function Request(input, options) {\n    options = options || {};\n    var body = options.body;\n\n    if (input instanceof Request) {\n      if (input.bodyUsed) {\n        throw new TypeError('Already read')\n      }\n      this.url = input.url;\n      this.credentials = input.credentials;\n      if (!options.headers) {\n        this.headers = new Headers(input.headers);\n      }\n      this.method = input.method;\n      this.mode = input.mode;\n      this.signal = input.signal;\n      if (!body && input._bodyInit != null) {\n        body = input._bodyInit;\n        input.bodyUsed = true;\n      }\n    } else {\n      this.url = String(input);\n    }\n\n    this.credentials = options.credentials || this.credentials || 'same-origin';\n    if (options.headers || !this.headers) {\n      this.headers = new Headers(options.headers);\n    }\n    this.method = normalizeMethod(options.method || this.method || 'GET');\n    this.mode = options.mode || this.mode || null;\n    this.signal = options.signal || this.signal;\n    this.referrer = null;\n\n    if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n      throw new TypeError('Body not allowed for GET or HEAD requests')\n    }\n    this._initBody(body);\n  }\n\n  Request.prototype.clone = function() {\n    return new Request(this, {body: this._bodyInit})\n  };\n\n  function decode(body) {\n    var form = new FormData();\n    body\n      .trim()\n      .split('&')\n      .forEach(function(bytes) {\n        if (bytes) {\n          var split = bytes.split('=');\n          var name = split.shift().replace(/\\+/g, ' ');\n          var value = split.join('=').replace(/\\+/g, ' ');\n          form.append(decodeURIComponent(name), decodeURIComponent(value));\n        }\n      });\n    return form\n  }\n\n  function parseHeaders(rawHeaders) {\n    var headers = new Headers();\n    // Replace instances of \\r\\n and \\n followed by at least one space or horizontal tab with a space\n    // https://tools.ietf.org/html/rfc7230#section-3.2\n    var preProcessedHeaders = rawHeaders.replace(/\\r?\\n[\\t ]+/g, ' ');\n    preProcessedHeaders.split(/\\r?\\n/).forEach(function(line) {\n      var parts = line.split(':');\n      var key = parts.shift().trim();\n      if (key) {\n        var value = parts.join(':').trim();\n        headers.append(key, value);\n      }\n    });\n    return headers\n  }\n\n  Body.call(Request.prototype);\n\n  function Response(bodyInit, options) {\n    if (!options) {\n      options = {};\n    }\n\n    this.type = 'default';\n    this.status = options.status === undefined ? 200 : options.status;\n    this.ok = this.status >= 200 && this.status < 300;\n    this.statusText = 'statusText' in options ? options.statusText : 'OK';\n    this.headers = new Headers(options.headers);\n    this.url = options.url || '';\n    this._initBody(bodyInit);\n  }\n\n  Body.call(Response.prototype);\n\n  Response.prototype.clone = function() {\n    return new Response(this._bodyInit, {\n      status: this.status,\n      statusText: this.statusText,\n      headers: new Headers(this.headers),\n      url: this.url\n    })\n  };\n\n  Response.error = function() {\n    var response = new Response(null, {status: 0, statusText: ''});\n    response.type = 'error';\n    return response\n  };\n\n  var redirectStatuses = [301, 302, 303, 307, 308];\n\n  Response.redirect = function(url, status) {\n    if (redirectStatuses.indexOf(status) === -1) {\n      throw new RangeError('Invalid status code')\n    }\n\n    return new Response(null, {status: status, headers: {location: url}})\n  };\n\n  exports.DOMException = self.DOMException;\n  try {\n    new exports.DOMException();\n  } catch (err) {\n    exports.DOMException = function(message, name) {\n      this.message = message;\n      this.name = name;\n      var error = Error(message);\n      this.stack = error.stack;\n    };\n    exports.DOMException.prototype = Object.create(Error.prototype);\n    exports.DOMException.prototype.constructor = exports.DOMException;\n  }\n\n  function fetch(input, init) {\n    return new Promise(function(resolve, reject) {\n      var request = new Request(input, init);\n\n      if (request.signal && request.signal.aborted) {\n        return reject(new exports.DOMException('Aborted', 'AbortError'))\n      }\n\n      var xhr = new XMLHttpRequest();\n\n      function abortXhr() {\n        xhr.abort();\n      }\n\n      xhr.onload = function() {\n        var options = {\n          status: xhr.status,\n          statusText: xhr.statusText,\n          headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n        };\n        options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL');\n        var body = 'response' in xhr ? xhr.response : xhr.responseText;\n        resolve(new Response(body, options));\n      };\n\n      xhr.onerror = function() {\n        reject(new TypeError('Network request failed'));\n      };\n\n      xhr.ontimeout = function() {\n        reject(new TypeError('Network request failed'));\n      };\n\n      xhr.onabort = function() {\n        reject(new exports.DOMException('Aborted', 'AbortError'));\n      };\n\n      xhr.open(request.method, request.url, true);\n\n      if (request.credentials === 'include') {\n        xhr.withCredentials = true;\n      } else if (request.credentials === 'omit') {\n        xhr.withCredentials = false;\n      }\n\n      if ('responseType' in xhr && support.blob) {\n        xhr.responseType = 'blob';\n      }\n\n      request.headers.forEach(function(value, name) {\n        xhr.setRequestHeader(name, value);\n      });\n\n      if (request.signal) {\n        request.signal.addEventListener('abort', abortXhr);\n\n        xhr.onreadystatechange = function() {\n          // DONE (success or failure)\n          if (xhr.readyState === 4) {\n            request.signal.removeEventListener('abort', abortXhr);\n          }\n        };\n      }\n\n      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit);\n    })\n  }\n\n  fetch.polyfill = true;\n\n  if (!self.fetch) {\n    self.fetch = fetch;\n    self.Headers = Headers;\n    self.Request = Request;\n    self.Response = Response;\n  }\n\n  exports.Headers = Headers;\n  exports.Request = Request;\n  exports.Response = Response;\n  exports.fetch = fetch;\n\n  return exports;\n\n}({}));\n})(__self__);\ndelete __self__.fetch.polyfill\nexports = __self__.fetch // To enable: import fetch from 'cross-fetch'\nexports.default = __self__.fetch // For TypeScript consumers without esModuleInterop.\nexports.fetch = __self__.fetch // To enable: import {fetch} from 'cross-fetch'\nexports.Headers = __self__.Headers\nexports.Request = __self__.Request\nexports.Response = __self__.Response\nmodule.exports = exports\n","/* eslint-env browser */\nmodule.exports = typeof self == 'object' ? self.FormData : window.FormData;\n","/* eslint no-unused-vars: \"off\" */\n/* global process */\n\nimport axios from 'axios';\nimport uuidv4 from 'uuid/v4';\nimport { Channel } from './channel';\nimport { ClientState } from './client_state';\nimport { StableWSConnection } from './connection';\n\nimport { isValidEventType } from './events';\n\nimport {\n\tJWTServerToken,\n\tJWTUserToken,\n\tUserFromToken,\n\tDevToken,\n\tCheckSignature,\n} from './signing';\nimport http from 'http';\nimport https from 'https';\nimport fetch, { Headers } from 'cross-fetch';\nimport FormData from 'form-data';\nimport pkg from '../package.json';\n\nfunction isReadableStream(obj) {\n\treturn (\n\t\ttypeof obj === 'object' &&\n\t\ttypeof (obj._read === 'function') &&\n\t\ttypeof (obj._readableState === 'object')\n\t);\n}\n\nfunction isFunction(value) {\n\treturn (\n\t\tvalue &&\n\t\t(Object.prototype.toString.call(value) === '[object Function]' ||\n\t\t\t'function' === typeof value ||\n\t\t\tvalue instanceof Function)\n\t);\n}\n\nexport class StreamChat {\n\tconstructor(key, secretOrOptions, options) {\n\t\t// set the key\n\t\tthis.key = key;\n\t\tthis.userToken = null;\n\t\tthis.secret = null;\n\t\tthis.listeners = {};\n\t\tthis.state = new ClientState();\n\n\t\t// set the secret\n\t\tif (secretOrOptions && secretOrOptions.indexOf) {\n\t\t\tthis.secret = secretOrOptions;\n\t\t}\n\n\t\t// set the options... and figure out defaults...\n\t\toptions = options || secretOrOptions;\n\t\tif (!options) {\n\t\t\toptions = {};\n\t\t}\n\n\t\tthis.browser =\n\t\t\ttypeof options.browser !== 'undefined'\n\t\t\t\t? options.browser\n\t\t\t\t: typeof window !== 'undefined';\n\t\tthis.node = !this.browser;\n\n\t\tconst defaultOptions = {\n\t\t\ttimeout: 3000,\n\t\t};\n\n\t\tif (this.node) {\n\t\t\tconst nodeOptions = {\n\t\t\t\thttpAgent: new http.Agent({ keepAlive: 3000 }),\n\t\t\t\thttpsAgent: new https.Agent({ keepAlive: 3000 }),\n\t\t\t};\n\t\t\tthis.options = { ...nodeOptions, ...defaultOptions, ...options };\n\t\t} else {\n\t\t\tthis.options = { ...defaultOptions, ...options };\n\t\t\tdelete this.options.httpAgent;\n\t\t\tdelete this.options.httpsAgent;\n\t\t}\n\n\t\tthis.setBaseURL('https://chat-us-east-1.stream-io-api.com');\n\n\t\tif (typeof process !== 'undefined' && process.env.STREAM_LOCAL_TEST_RUN) {\n\t\t\tthis.setBaseURL('http://localhost:3030');\n\t\t}\n\n\t\t// WS connection is initialized when setUser is called\n\t\tthis.wsConnection = null;\n\t\tthis.wsPromise = null;\n\t\t// keeps a reference to all the channels that are in use\n\t\tthis.activeChannels = {};\n\t\t// mapping between channel groups and configs\n\t\tthis.configs = {};\n\t\tthis.anonymous = false;\n\n\t\t/**\n\t\t * logger function should accept 3 parameters:\n\t\t * @param logLevel string\n\t\t * @param message   string\n\t\t * @param extraData object\n\t\t *\n\t\t * e.g.,\n\t\t * const client = new StreamChat('api_key', {}, {\n\t\t * \t\tlogger = (logLevel, message, extraData) => {\n\t\t * \t\t\tconsole.log(message);\n\t\t * \t\t}\n\t\t * })\n\t\t *\n\t\t * extraData contains tags array attached to log message. Tags can have one/many of following values:\n\t\t * 1. api\n\t\t * 2. api_request\n\t\t * 3. api_response\n\t\t * 4. client\n\t\t * 5. channel\n\t\t * 6. connection\n\t\t * 7. event\n\t\t *\n\t\t * It may also contains some extra data, some examples have been mentioned below:\n\t\t * 1. {\n\t\t * \t\ttags: ['api', 'api_request', 'client'],\n\t\t * \t\turl: string,\n\t\t * \t\tpayload: object,\n\t\t * \t\tconfig: object\n\t\t * }\n\t\t * 2. {\n\t\t * \t\ttags: ['api', 'api_response', 'client'],\n\t\t * \t\turl: string,\n\t\t * \t\tresponse: object\n\t\t * }\n\t\t * 3. {\n\t\t * \t\ttags: ['event', 'client'],\n\t\t * \t\tevent: object\n\t\t * }\n\t\t * 4. {\n\t\t * \t\ttags: ['channel'],\n\t\t * \t\tchannel: object\n\t\t * }\n\t\t */\n\t\tthis.logger = isFunction(options.logger) ? options.logger : () => {};\n\t}\n\n\tdevToken(userID) {\n\t\treturn DevToken(userID);\n\t}\n\n\tgetAuthType() {\n\t\treturn this.anonymous ? 'anonymous' : 'jwt';\n\t}\n\n\tsetBaseURL(baseURL) {\n\t\tthis.baseURL = baseURL;\n\t\tthis.wsBaseURL = this.baseURL.replace('http', 'ws');\n\t}\n\n\t_setupConnection() {\n\t\tthis.UUID = uuidv4();\n\t\tthis.clientID = `${this.userID}--${this.UUID}`;\n\t\tthis.wsPromise = this.connect();\n\t\tthis._startCleaning();\n\t\treturn this.wsPromise;\n\t}\n\n\t_hasConnectionID = () => Boolean(this.connectionID);\n\n\t/**\n\t * setUser - Set the current user, this triggers a connection to the API\n\t *\n\t * @param {object} user Data about this user. IE {name: \"john\"}\n\t * @param {string} userToken   Token\n\t *\n\t * @return {promise} Returns a promise that resolves when the connection is setup\n\t */\n\tsetUser(user, userToken) {\n\t\tif (this.userID) {\n\t\t\tthrow new Error(\n\t\t\t\t'Use client.disconnect() before trying to connect as a different user. setUser was called twice.',\n\t\t\t);\n\t\t}\n\t\t// we generate the client id client side\n\t\tthis.userID = user.id;\n\n\t\tif (!this.userID) {\n\t\t\tthrow new Error('The \"id\" field on the user is missing');\n\t\t}\n\n\t\tthis.userToken = userToken;\n\n\t\tif (userToken == null && this.secret != null) {\n\t\t\tthis.userToken = this.createToken(this.userID);\n\t\t}\n\n\t\tif (this.userToken == null) {\n\t\t\tthrow new Error('both userToken and api secret are not provided');\n\t\t}\n\n\t\tconst tokenUserId = UserFromToken(this.userToken);\n\t\tif (\n\t\t\tuserToken != null &&\n\t\t\t(tokenUserId == null || tokenUserId === '' || tokenUserId !== user.id)\n\t\t) {\n\t\t\tthrow new Error(\n\t\t\t\t'userToken does not have a user_id or is not matching with user.id',\n\t\t\t);\n\t\t}\n\t\tthis._setUser(user);\n\t\tthis.anonymous = false;\n\n\t\treturn this._setupConnection();\n\t}\n\n\t_setUser(user) {\n\t\t// this one is used by the frontend\n\t\tthis.user = user;\n\t\t// this one is actually used for requests...\n\t\tthis._user = { ...user };\n\t}\n\n\t/**\n\t * updateAppSettings - updates application settings\n\t *\n\t * @param {object} options App settings.\n\t * \t\tIE: {\n\t  \t\t\t\"apn_config\": {\n\t\t\t\t\t\"auth_type\": \"token\",\n\t\t\t\t\t\"auth_key\": fs.readFileSync(\n\t\t\t\t\t\t'./apn-push-auth-key.p8',\n\t\t\t\t\t\t'utf-8',\n\t\t\t\t\t),\n\t\t\t\t\t\"key_id\": \"keyid\",\n\t\t\t\t\t\"team_id\": \"teamid\", //either ALL these 3\n\t\t\t\t\t\"notification_template\": \"notification handlebars template\",\n\t\t\t\t\t\"bundle_id\": \"com.apple.your.app\",\n\t\t\t\t\t\"development\": true\n\t\t\t\t},\n\t\t\t\t\"firebase_config\": {\n\t\t\t\t\t\"server_key\": \"server key from fcm\",\n\t\t\t\t\t\"notification_template\": \"notification handlebars template\"\n\t\t\t\t},\n\t\t\t\t\"webhook_url\": \"https://acme.com/my/awesome/webhook/\"\n\t\t\t}\n\t */\n\tasync updateAppSettings(options) {\n\t\tif (options.apn_config && options.apn_config.p12_cert) {\n\t\t\toptions.apn_config.p12_cert = Buffer.from(\n\t\t\t\toptions.apn_config.p12_cert,\n\t\t\t).toString('base64');\n\t\t}\n\t\treturn await this.patch(this.baseURL + '/app', options);\n\t}\n\n\t/**\n\t * getAppSettings - retrieves application settings\n\t */\n\tasync getAppSettings() {\n\t\treturn await this.get(this.baseURL + '/app');\n\t}\n\n\t/**\n\t * testPushSettings - Tests the push settings for a user with a random chat message and the configured push templates\n\t *\n\t * @param {string} userID User ID. If user has no devices, it will error\n\t * @param {object} [data] Overrides for push templates/message used\n\t * \t\tIE: {\n\t\t\t\t  messageID: 'id-of-message',//will error if message does not exist\n\t\t\t\t  apnTemplate: '{}', //if app doesn't have apn configured it will error\n\t\t\t\t  firebaseTemplate: '{}', //if app doesn't have firebase configured it will error\n\t\t\t}\n\t */\n\tasync testPushSettings(userID, data = {}) {\n\t\treturn await this.post(this.baseURL + '/check_push', {\n\t\t\tuser_id: userID,\n\t\t\t...(data.messageID ? { message_id: data.messageID } : {}),\n\t\t\t...(data.apnTemplate ? { apn_template: data.apnTemplate } : {}),\n\t\t\t...(data.firebaseTemplate\n\t\t\t\t? { firebase_template: data.firebaseTemplate }\n\t\t\t\t: {}),\n\t\t});\n\t}\n\n\t/**\n\t * disconnect - closes the WS connection\n\t */\n\tdisconnect() {\n\t\tthis.logger('info', 'client:disconnect() - Disconnecting the client', {\n\t\t\ttags: ['connection', 'client'],\n\t\t});\n\t\t// remove the user specific fields\n\t\tdelete this.user;\n\t\tdelete this._user;\n\t\tdelete this.userID;\n\n\t\tif (this.cleaningIntervalRef != null) {\n\t\t\tclearInterval(this.cleaningIntervalRef);\n\t\t\tthis.cleaningIntervalRef = null;\n\t\t}\n\n\t\tthis.anonymous = false;\n\t\tthis.userToken = null;\n\n\t\tthis.connectionEstablishedCount = 0;\n\n\t\tfor (const channel of Object.values(this.activeChannels)) {\n\t\t\tchannel._disconnect();\n\t\t}\n\t\t// ensure we no longer return inactive channels\n\t\tthis.activeChannels = {};\n\t\t// reset client state\n\t\tthis.state = new ClientState();\n\n\t\t// close the WS connection\n\t\tif (this.wsConnection) {\n\t\t\treturn this.wsConnection.disconnect();\n\t\t}\n\t}\n\n\tsetAnonymousUser() {\n\t\tthis.anonymous = true;\n\t\tthis.userID = uuidv4();\n\t\tthis._setUser({\n\t\t\tid: this.userID,\n\t\t\tanon: true,\n\t\t});\n\t\treturn this._setupConnection();\n\t}\n\n\t/**\n\t * setGuestUser - Setup a temporary guest user\n\t *\n\t * @param {object} user Data about this user. IE {name: \"john\"}\n\t *\n\t * @return {promise} Returns a promise that resolves when the connection is setup\n\t */\n\tasync setGuestUser(user) {\n\t\tlet response;\n\t\tthis.anonymous = true;\n\t\ttry {\n\t\t\tresponse = await this.post(this.baseURL + '/guest', { user });\n\t\t} catch (e) {\n\t\t\tthis.anonymous = false;\n\t\t\tthrow e;\n\t\t}\n\t\tthis.anonymous = false;\n\t\tconst {\n\t\t\tcreated_at,\n\t\t\tupdated_at,\n\t\t\tlast_active,\n\t\t\tonline,\n\t\t\t...guestUser\n\t\t} = response.user;\n\t\treturn await this.setUser(guestUser, response.access_token);\n\t}\n\n\t/**\n\t * createToken - Creates a token to authenticate this user. This function is used server side.\n\t * The resulting token should be passed to the client side when the users registers or logs in\n\t *\n\t * @param {string}   userID         The User ID\n\t * @param {string}   exp            The expiration time for the token expressed in the number of seconds since the epoch\n\t *\n\t * @return {string} Returns a token\n\t */\n\tcreateToken(userID, exp) {\n\t\tconst extra = {};\n\t\tif (exp != null) {\n\t\t\textra.exp = exp;\n\t\t}\n\t\treturn JWTUserToken(this.secret, userID, extra, {});\n\t}\n\n\t/**\n\t * on - Listen to events on all channels and users your watching\n\t *\n\t * client.on('message.new', event => {console.log(\"my new message\", event, channel.state.messages)})\n\t * or\n\t * client.on(event => {console.log(event.type)})\n\t *\n\t * @param {string} callbackOrString  The event type to listen for (optional)\n\t * @param {function} callbackOrNothing The callback to call\n\t *\n\t * @return {type} Description\n\t */\n\ton(callbackOrString, callbackOrNothing) {\n\t\tconst key = callbackOrNothing ? callbackOrString : 'all';\n\t\tconst valid = isValidEventType(key);\n\t\tif (!valid) {\n\t\t\tthrow Error(`Invalid event type ${key}`);\n\t\t}\n\t\tconst callback = callbackOrNothing ? callbackOrNothing : callbackOrString;\n\t\tif (!(key in this.listeners)) {\n\t\t\tthis.listeners[key] = [];\n\t\t}\n\t\tthis.logger('info', `Attaching listener for ${key} event`, {\n\t\t\ttags: ['event', 'client'],\n\t\t});\n\t\tthis.listeners[key].push(callback);\n\t\treturn {\n\t\t\tunsubscribe: () => {\n\t\t\t\tthis.listeners[key] = this.listeners[key].filter(el => el !== callback);\n\t\t\t},\n\t\t};\n\t}\n\n\t/**\n\t * off - Remove the event handler\n\t *\n\t */\n\toff(callbackOrString, callbackOrNothing) {\n\t\tconst key = callbackOrNothing ? callbackOrString : 'all';\n\t\tconst valid = isValidEventType(key);\n\t\tif (!valid) {\n\t\t\tthrow Error(`Invalid event type ${key}`);\n\t\t}\n\t\tconst callback = callbackOrNothing ? callbackOrNothing : callbackOrString;\n\t\tif (!(key in this.listeners)) {\n\t\t\tthis.listeners[key] = [];\n\t\t}\n\n\t\tthis.logger('info', `Removing listener for ${key} event`, {\n\t\t\ttags: ['event', 'client'],\n\t\t});\n\t\tthis.listeners[key] = this.listeners[key].filter(value => value !== callback);\n\t}\n\n\t_logApiRequest(type, url, data, config) {\n\t\tthis.logger('info', `client: ${type} - Request - ${url}`, {\n\t\t\ttags: ['api', 'api_request', 'client'],\n\t\t\turl,\n\t\t\tpayload: data,\n\t\t\tconfig,\n\t\t});\n\t}\n\n\t_logApiResponse(type, url, response) {\n\t\tthis.logger(\n\t\t\t'info',\n\t\t\t`client:${type} - Response - url: ${url} > status ${response.status}`,\n\t\t\t{\n\t\t\t\ttags: ['api', 'api_response', 'client'],\n\t\t\t\turl,\n\t\t\t\tresponse,\n\t\t\t},\n\t\t);\n\t}\n\n\tasync get(url, params) {\n\t\ttry {\n\t\t\tthis._logApiRequest('get', url, {}, this._addClientParams(params));\n\t\t\tconst response = await axios.get(url, this._addClientParams(params));\n\t\t\tthis._logApiResponse('get', url, response);\n\n\t\t\treturn this.handleResponse(response);\n\t\t} catch (e) {\n\t\t\tif (e.response) {\n\t\t\t\treturn this.handleResponse(e.response);\n\t\t\t} else {\n\t\t\t\tthrow e;\n\t\t\t}\n\t\t}\n\t}\n\n\tasync put(url, data) {\n\t\tlet response;\n\t\ttry {\n\t\t\tthis._logApiRequest('put', url, data, this._addClientParams());\n\t\t\tresponse = await axios.put(url, data, this._addClientParams());\n\t\t\tthis._logApiResponse('put', url, response);\n\n\t\t\treturn this.handleResponse(response);\n\t\t} catch (e) {\n\t\t\tif (e.response) {\n\t\t\t\treturn this.handleResponse(e.response);\n\t\t\t} else {\n\t\t\t\tthrow e;\n\t\t\t}\n\t\t}\n\t}\n\n\tasync post(url, data) {\n\t\tlet response;\n\t\ttry {\n\t\t\tthis._logApiRequest('post', url, data, this._addClientParams());\n\t\t\tresponse = await axios.post(url, data, this._addClientParams());\n\t\t\tthis._logApiResponse('post', url, response);\n\n\t\t\treturn this.handleResponse(response);\n\t\t} catch (e) {\n\t\t\tif (e.response) {\n\t\t\t\treturn this.handleResponse(e.response);\n\t\t\t} else {\n\t\t\t\tthrow e;\n\t\t\t}\n\t\t}\n\t}\n\n\tasync patch(url, data) {\n\t\tlet response;\n\t\ttry {\n\t\t\tthis._logApiRequest('patch', url, data, this._addClientParams());\n\t\t\tresponse = await axios.patch(url, data, this._addClientParams());\n\t\t\tthis._logApiResponse('patch', url, response);\n\n\t\t\treturn this.handleResponse(response);\n\t\t} catch (e) {\n\t\t\tif (e.response) {\n\t\t\t\treturn this.handleResponse(e.response);\n\t\t\t} else {\n\t\t\t\tthrow e;\n\t\t\t}\n\t\t}\n\t}\n\n\tasync delete(url, params) {\n\t\tlet response;\n\t\ttry {\n\t\t\tthis._logApiRequest('delete', url, {}, this._addClientParams());\n\t\t\tresponse = await axios.delete(url, this._addClientParams(params));\n\t\t\tthis._logApiResponse('delete', url, response);\n\n\t\t\treturn this.handleResponse(response);\n\t\t} catch (e) {\n\t\t\tif (e.response) {\n\t\t\t\treturn this.handleResponse(e.response);\n\t\t\t} else {\n\t\t\t\tthrow e;\n\t\t\t}\n\t\t}\n\t}\n\n\tasync sendFile(url, uri, name, contentType, user) {\n\t\tconst data = new FormData();\n\t\tlet fileField;\n\n\t\tconst params = this._addClientParams();\n\t\tif (isReadableStream(uri)) {\n\t\t\tfileField = uri;\n\t\t} else {\n\t\t\tfileField = {\n\t\t\t\turi,\n\t\t\t\tname: name || uri.split('/').reverse()[0],\n\t\t\t};\n\t\t\tif (contentType != null) {\n\t\t\t\tfileField.type = contentType;\n\t\t\t}\n\t\t}\n\n\t\tif (user != null) {\n\t\t\tdata.append('user', JSON.stringify(user));\n\t\t}\n\t\tdata.append('file', fileField);\n\t\tconst response = await fetch(`${url}?api_key=${this.key}`, {\n\t\t\tmethod: 'post',\n\t\t\tbody: data,\n\t\t\theaders: new Headers({\n\t\t\t\tAuthorization: params.headers.Authorization,\n\t\t\t\t'stream-auth-type': this.getAuthType(),\n\t\t\t}),\n\t\t});\n\t\tresponse.data = await response.json();\n\t\treturn this.handleResponse(response);\n\t}\n\n\terrorFromResponse(response) {\n\t\tlet err;\n\t\terr = new Error(`StreamChat error HTTP code: ${response.status}`);\n\t\tif (response.data && response.data.code) {\n\t\t\terr = new Error(\n\t\t\t\t`StreamChat error code ${response.data.code}: ${response.data.message}`,\n\t\t\t);\n\t\t\terr.code = response.data.code;\n\t\t}\n\t\terr.response = response;\n\t\terr.status = response.status;\n\t\treturn err;\n\t}\n\n\thandleResponse(response) {\n\t\tconst data = response.data;\n\t\tif ((response.status + '')[0] !== '2') {\n\t\t\tthrow this.errorFromResponse(response);\n\t\t}\n\t\treturn data;\n\t}\n\n\tdispatchEvent = event => {\n\t\t// client event handlers\n\t\tthis._handleClientEvent(event);\n\n\t\t// channel event handlers\n\t\tconst cid = event.cid;\n\t\tconst channel = this.activeChannels[cid];\n\t\tif (channel) {\n\t\t\tchannel._handleChannelEvent(event);\n\t\t}\n\t};\n\n\thandleEvent = messageEvent => {\n\t\t// dispatch the event to the channel listeners\n\t\tconst jsonString = messageEvent.data;\n\t\tconst event = JSON.parse(jsonString);\n\t\tevent.received_at = new Date();\n\t\tthis.dispatchEvent(event);\n\t};\n\n\t_handleClientEvent(event) {\n\t\tconst client = this;\n\t\tthis.logger(\n\t\t\t'info',\n\t\t\t`client:_handleClientEvent - Received event of type { ${event.type} }`,\n\t\t\t{\n\t\t\t\ttags: ['event', 'client'],\n\t\t\t\tevent,\n\t\t\t},\n\t\t);\n\n\t\t// update the client.state with any changes to users\n\t\tif (event.type === 'user.presence.changed' || event.type === 'user.updated') {\n\t\t\tclient.state.updateUser(event.user);\n\t\t\tclient._updateUserReferences(event.user);\n\t\t}\n\t\tif (event.type === 'health.check') {\n\t\t\tif (event.me) {\n\t\t\t\tclient.user = event.me;\n\t\t\t\tclient.state.updateUser(event.me);\n\t\t\t}\n\t\t}\n\n\t\tif (event.type === 'notification.message_new') {\n\t\t\tthis.configs[event.channel.type] = event.channel.config;\n\t\t}\n\n\t\t// gather and call the listeners\n\t\tconst listeners = [];\n\t\tif (client.listeners.all) {\n\t\t\tlisteners.push(...client.listeners.all);\n\t\t}\n\t\tif (client.listeners[event.type]) {\n\t\t\tlisteners.push(...client.listeners[event.type]);\n\t\t}\n\n\t\t// call the event and send it to the listeners\n\t\tfor (const listener of listeners) {\n\t\t\tlistener(event);\n\t\t}\n\t}\n\n\trecoverState = async () => {\n\t\tthis.logger(\n\t\t\t'info',\n\t\t\t`client:recoverState() - Start of recoverState with connectionID ${\n\t\t\t\tthis.wsConnection.connectionID\n\t\t\t}`,\n\t\t\t{\n\t\t\t\ttags: ['connection'],\n\t\t\t},\n\t\t);\n\t\tthis.connectionID = this.wsConnection.connectionID;\n\t\tconst cids = Object.keys(this.activeChannels || {});\n\t\tconst lastMessageIDs = {};\n\t\tfor (const c of Object.values(this.activeChannels)) {\n\t\t\tconst lastMessage = c.lastMessage();\n\t\t\tlet lastMessageId;\n\t\t\tif (lastMessage) {\n\t\t\t\tlastMessageId = lastMessage.id;\n\t\t\t}\n\t\t\tlastMessageIDs[c.cid] = lastMessageId;\n\t\t}\n\t\tif (cids.length) {\n\t\t\tthis.logger(\n\t\t\t\t'info',\n\t\t\t\t`client:recoverState() - Start the querying of ${cids.length} channels`,\n\t\t\t\t{ tags: ['connection', 'client'] },\n\t\t\t);\n\n\t\t\tawait this.queryChannels(\n\t\t\t\t{ cid: { $in: cids } },\n\t\t\t\t{ last_message_at: -1 },\n\t\t\t\t{ limit: 30, recovery: true, last_message_ids: lastMessageIDs },\n\t\t\t);\n\n\t\t\tthis.logger('info', 'client:recoverState() - Querying channels finished', {\n\t\t\t\ttags: ['connection', 'client'],\n\t\t\t});\n\n\t\t\tthis.dispatchEvent({\n\t\t\t\ttype: 'connection.recovered',\n\t\t\t});\n\t\t}\n\t};\n\n\t/*\n\t_updateUserReferences updates the members and watchers of the currently active channels\n\tthat contain this user\n\t*/\n\t_updateUserReferences(user) {\n\t\tconst refMap = this.state.userChannelReferences[user.id] || {};\n\t\tconst refs = Object.keys(refMap);\n\t\tfor (const channelID of refs) {\n\t\t\tconst c = this.activeChannels[channelID];\n\t\t\t// search the members and watchers and update as needed...\n\t\t\tif (c && c.state) {\n\t\t\t\tif (c.state.members[user.id]) {\n\t\t\t\t\tc.state.members = c.state.members.setIn([user.id, 'user'], user);\n\t\t\t\t}\n\t\t\t\tif (c.state.watchers[user.id]) {\n\t\t\t\t\tc.state.watchers = c.state.watchers.setIn([user.id, 'user'], user);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tasync connect() {\n\t\tthis.connecting = true;\n\t\tconst client = this;\n\t\tthis.failures = 0;\n\n\t\tif (client.userID == null) {\n\t\t\tthrow Error(\n\t\t\t\t'Call setUser or setAnonymousUser before starting the connection',\n\t\t\t);\n\t\t}\n\t\tconst params = {\n\t\t\tclient_id: client.client_id,\n\t\t\tuser_id: client.userID,\n\t\t\tuser_details: client._user,\n\t\t\tuser_token: client.userToken,\n\t\t\tserver_determines_connection_id: true,\n\t\t};\n\t\tconst qs = encodeURIComponent(JSON.stringify(params));\n\t\tif (qs.length > 1900) {\n\t\t\tthrow Error('User object is too large');\n\t\t}\n\n\t\tconst token = this._getToken();\n\n\t\tconst authType = this.getAuthType();\n\t\tclient.wsURL = `${client.wsBaseURL}/connect?json=${qs}&api_key=${\n\t\t\tthis.key\n\t\t}&authorization=${token}&stream-auth-type=${authType}&x-stream-client=${this._userAgent()}`;\n\n\t\t// The StableWSConnection handles all the reconnection logic.\n\t\tthis.wsConnection = new StableWSConnection({\n\t\t\twsURL: client.wsURL,\n\t\t\tclientID: this.clientID,\n\t\t\tuserID: this.userID,\n\t\t\trecoverCallback: this.recoverState,\n\t\t\tmessageCallback: this.handleEvent,\n\t\t\teventCallback: this.dispatchEvent,\n\t\t\tlogger: this.logger,\n\t\t});\n\n\t\tconst handshake = await this.wsConnection.connect();\n\t\tthis.connectionID = this.wsConnection.connectionID;\n\t\treturn handshake;\n\t}\n\n\t/**\n\t * queryUsers - Query users and watch user presence\n\t *\n\t * @param {object} filterConditions MongoDB style filter conditions\n\t * @param {object} sort             Sort options, for instance {last_active: -1}\n\t * @param {object} options          Option object, {presence: true}\n\t *\n\t * @return {object} User Query Response\n\t */\n\tasync queryUsers(filterConditions, sort, options) {\n\t\tif (!sort) {\n\t\t\tsort = {};\n\t\t}\n\t\tif (!options) {\n\t\t\toptions = {};\n\t\t}\n\t\tconst sortFields = [];\n\t\tfor (const [k, v] of Object.entries(sort)) {\n\t\t\tsortFields.push({ field: k, direction: v });\n\t\t}\n\n\t\tconst defaultOptions = {\n\t\t\tpresence: true,\n\t\t};\n\n\t\t// Make sure we wait for the connect promise if there is a pending one\n\t\tawait this.wsPromise;\n\n\t\tif (!this._hasConnectionID()) {\n\t\t\tdefaultOptions.presence = false;\n\t\t}\n\n\t\t// Return a list of users\n\t\tconst data = await this.get(this.baseURL + '/users', {\n\t\t\tpayload: {\n\t\t\t\tfilter_conditions: filterConditions,\n\t\t\t\tsort: sortFields,\n\t\t\t\t...defaultOptions,\n\t\t\t\t...options,\n\t\t\t},\n\t\t});\n\n\t\tthis.state.updateUsers(data.users);\n\n\t\treturn data;\n\t}\n\n\tasync queryChannels(filterConditions, sort = {}, options = {}) {\n\t\tconst sortFields = [];\n\n\t\tfor (const [k, v] of Object.entries(sort)) {\n\t\t\tsortFields.push({ field: k, direction: v });\n\t\t}\n\n\t\tconst defaultOptions = {\n\t\t\tstate: true,\n\t\t\twatch: true,\n\t\t\tpresence: false,\n\t\t};\n\n\t\t// Make sure we wait for the connect promise if there is a pending one\n\t\tawait this.wsPromise;\n\n\t\tif (!this._hasConnectionID()) {\n\t\t\tdefaultOptions.watch = false;\n\t\t}\n\n\t\t// Return a list of channels\n\t\tconst payload = {\n\t\t\tfilter_conditions: filterConditions,\n\t\t\tsort: sortFields,\n\t\t\tuser_details: this._user,\n\t\t\t...defaultOptions,\n\t\t\t...options,\n\t\t};\n\n\t\tconst data = await this.get(this.baseURL + '/channels', {\n\t\t\tpayload,\n\t\t});\n\n\t\tconst channels = [];\n\n\t\t// update our cache of the configs\n\t\tfor (const channelState of data.channels) {\n\t\t\tthis._addChannelConfig(channelState);\n\t\t}\n\n\t\tfor (const channelState of data.channels) {\n\t\t\tconst c = this.channel(channelState.channel.type, channelState.channel.id);\n\t\t\tc.data = channelState.channel;\n\t\t\tc.initialized = true;\n\t\t\tc._initializeState(channelState);\n\t\t\tchannels.push(c);\n\t\t}\n\t\treturn channels;\n\t}\n\n\tasync search(filterConditions, query, options = {}) {\n\t\t// Return a list of channels\n\t\tconst payload = {\n\t\t\tfilter_conditions: filterConditions,\n\t\t\tquery,\n\t\t\t...options,\n\t\t};\n\n\t\t// Make sure we wait for the connect promise if there is a pending one\n\t\tawait this.wsPromise;\n\n\t\tconst data = await this.get(this.baseURL + '/search', {\n\t\t\tpayload,\n\t\t});\n\n\t\treturn data;\n\t}\n\n\t/**\n\t * addDevice - Adds a push device for a user.\n\t *\n\t * @param {string} id the device id\n\t * @param {string} push_provider the push provider (apn or firebase)\n\t * @param {string} [userID] the user id (defaults to current user)\n\t *\n\t */\n\tasync addDevice(id, push_provider, userID = null) {\n\t\treturn await this.post(this.baseURL + '/devices', {\n\t\t\tid,\n\t\t\tpush_provider,\n\t\t\t...(userID != null ? { user_id: userID } : {}),\n\t\t});\n\t}\n\n\t/**\n\t * getDevices - Returns the devices associated with a current user\n\t *\n\t * @param {string} [userID] User ID. Only works on serversidex\n\t *\n\t * @return {devices} Array of devices\n\t */\n\tasync getDevices(userID) {\n\t\treturn await this.get(\n\t\t\tthis.baseURL + '/devices',\n\t\t\tuserID ? { user_id: userID } : {},\n\t\t);\n\t}\n\n\t/**\n\t * removeDevice - Removes the device with the given id. Clientside users can only delete their own devices\n\t *\n\t * @param {string} id The device id\n\t * @param {string} [userID] The user id. Only specify this for serverside requests\n\t *\n\t */\n\tasync removeDevice(id, userID = null) {\n\t\treturn await this.delete(this.baseURL + '/devices', {\n\t\t\tid,\n\t\t\t...(userID ? { user_id: userID } : {}),\n\t\t});\n\t}\n\n\t_addChannelConfig(channelState) {\n\t\tthis.configs[channelState.channel.type] = channelState.channel.config;\n\t}\n\n\t/**\n\t * channel - Returns a new channel with the given type and id\n\t *\n\t * @param {string} channelType The channel type\n\t * @param {string} channelID   The channel data\n\t * @param {object} [custom]      Custom data to attach to the channel\n\t *\n\t * @return {channel} The channel object, initialize it using channel.watch()\n\t */\n\tchannel(channelType, channelID, custom = {}) {\n\t\tif (!this.userID && !this._isUsingServerAuth()) {\n\t\t\tthrow Error('Call setUser or setAnonymousUser before creating a channel');\n\t\t}\n\t\tif (~channelType.indexOf(':')) {\n\t\t\tthrow Error(\n\t\t\t\t`Invalid channel group ${channelType}, cant contain the : character`,\n\t\t\t);\n\t\t}\n\n\t\tif (typeof channelID === 'string') {\n\t\t\tchannelID = channelID + '';\n\t\t\tif (~channelID.indexOf(':')) {\n\t\t\t\tthrow Error(\n\t\t\t\t\t`Invalid channel id ${channelID}, cant contain the : character`,\n\t\t\t\t);\n\t\t\t}\n\t\t} else {\n\t\t\t// support the 2 param init method\n\t\t\tcustom = channelID || {};\n\t\t\tchannelID = undefined;\n\t\t}\n\n\t\t// there are two ways of solving this,\n\t\t// a. only allow 1 channel object per cid\n\t\t// b. broadcast events to all channels\n\t\t// the first option seems less likely to trip up devs\n\t\tlet channel;\n\t\tif (channelID) {\n\t\t\tconst cid = `${channelType}:${channelID}`;\n\t\t\tif (cid in this.activeChannels) {\n\t\t\t\tchannel = this.activeChannels[cid];\n\t\t\t\tif (Object.keys(custom).length > 0) {\n\t\t\t\t\tchannel.data = custom;\n\t\t\t\t\tchannel._data = custom;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tchannel = new Channel(this, channelType, channelID, custom);\n\t\t\t\tthis.activeChannels[channel.cid] = channel;\n\t\t\t}\n\t\t} else {\n\t\t\tchannel = new Channel(this, channelType, undefined, custom);\n\t\t}\n\n\t\treturn channel;\n\t}\n\n\t/**\n\t * updateUser - Update or Create the given user object\n\t *\n\t * @param {object} A user object, the only required field is the user id. IE {id: \"myuser\"} is valid\n\t *\n\t * @return {object}\n\t */\n\tasync updateUser(userObject) {\n\t\treturn await this.updateUsers([userObject]);\n\t}\n\n\t/**\n\t * updateUsers - Batch update the list of users\n\t *\n\t * @param {array} A list of users\n\t *\n\t * @return {object}\n\t */\n\tasync updateUsers(users) {\n\t\tconst userMap = {};\n\t\tfor (const userObject of users) {\n\t\t\tif (!userObject.id) {\n\t\t\t\tthrow Error('User ID is required when updating a user');\n\t\t\t}\n\t\t\tuserMap[userObject.id] = userObject;\n\t\t}\n\n\t\treturn await this.post(this.baseURL + '/users', {\n\t\t\tusers: userMap,\n\t\t});\n\t}\n\n\tasync deleteUser(userID, params) {\n\t\treturn await this.delete(this.baseURL + `/users/${userID}`, params);\n\t}\n\n\tasync reactivateUser(userID, options) {\n\t\treturn await this.post(this.baseURL + `/users/${userID}/reactivate`, {\n\t\t\t...options,\n\t\t});\n\t}\n\n\tasync deactivateUser(userID, options) {\n\t\treturn await this.post(this.baseURL + `/users/${userID}/deactivate`, {\n\t\t\t...options,\n\t\t});\n\t}\n\n\tasync exportUser(userID, options) {\n\t\treturn await this.get(this.baseURL + `/users/${userID}/export`, {\n\t\t\t...options,\n\t\t});\n\t}\n\n\t/** banUser - bans a user from all channels\n\t *\n\t * @param targetUserID\n\t * @param options\n\t * @returns {Promise<*>}\n\t */\n\tasync banUser(targetUserID, options) {\n\t\treturn await this.post(this.baseURL + '/moderation/ban', {\n\t\t\ttarget_user_id: targetUserID,\n\t\t\t...options,\n\t\t});\n\t}\n\n\t/** unbanUser - revoke global ban for a user\n\t *\n\t * @param targetUserID\n\t * @returns {Promise<*>}\n\t */\n\tasync unbanUser(targetUserID, options) {\n\t\treturn await this.delete(this.baseURL + '/moderation/ban', {\n\t\t\ttarget_user_id: targetUserID,\n\t\t\t...options,\n\t\t});\n\t}\n\n\t/** muteUser - mutes a user\n\t *\n\t * @param targetID\n\t * @param [userID] Only used with serverside auth\n\t * @returns {Promise<*>}\n\t */\n\tasync muteUser(targetID, userID = null) {\n\t\treturn await this.post(this.baseURL + '/moderation/mute', {\n\t\t\ttarget_id: targetID,\n\t\t\t...(userID ? { user_id: userID } : {}),\n\t\t});\n\t}\n\n\t/** unmuteUser - unmutes a user\n\t *\n\t * @param targetID\n\t * @param [userID] Only used with serverside auth\n\t * @returns {Promise<*>}\n\t */\n\tasync unmuteUser(targetID, userID = null) {\n\t\treturn await this.post(this.baseURL + '/moderation/unmute', {\n\t\t\ttarget_id: targetID,\n\t\t\t...(userID ? { user_id: userID } : {}),\n\t\t});\n\t}\n\n\tasync flagMessage(messageID) {\n\t\treturn await this.post(this.baseURL + '/moderation/flag', {\n\t\t\ttarget_message_id: messageID,\n\t\t});\n\t}\n\n\tasync flagUser(userID) {\n\t\treturn await this.post(this.baseURL + '/moderation/flag', {\n\t\t\ttarget_user_id: userID,\n\t\t});\n\t}\n\n\tasync unflagMessage(messageID) {\n\t\treturn await this.post(this.baseURL + '/moderation/unflag', {\n\t\t\ttarget_message_id: messageID,\n\t\t});\n\t}\n\n\tasync unflagUser(userID) {\n\t\treturn await this.post(this.baseURL + '/moderation/unflag', {\n\t\t\ttarget_user_id: userID,\n\t\t});\n\t}\n\n\t/**\n\t * markAllRead - marks all channels for this user as read\n\t *\n\t * @return {Promise} Description\n\t */\n\tasync markAllRead(data = {}) {\n\t\tconst response = await this.post(this.baseURL + '/channels/read', {\n\t\t\t...data,\n\t\t});\n\t}\n\n\tcreateChannelType(data) {\n\t\tconst channelData = Object.assign({}, { commands: ['all'] }, data);\n\t\treturn this.post(this.baseURL + '/channeltypes', channelData);\n\t}\n\n\tgetChannelType(channelType) {\n\t\treturn this.get(this.baseURL + `/channeltypes/${channelType}`);\n\t}\n\n\tupdateChannelType(channelType, data) {\n\t\treturn this.put(this.baseURL + `/channeltypes/${channelType}`, data);\n\t}\n\n\tdeleteChannelType(channelType) {\n\t\treturn this.delete(this.baseURL + `/channeltypes/${channelType}`);\n\t}\n\n\tlistChannelTypes() {\n\t\treturn this.get(this.baseURL + `/channeltypes`);\n\t}\n\n\t/**\n\t * updateMessage - Update the given message\n\t *\n\t * @param {object} message object, id needs to be specified\n\t *\n\t * @return {object} Response that includes the message\n\t */\n\tasync updateMessage(message, userId) {\n\t\tif (!message.id) {\n\t\t\tthrow Error('Please specify the message id when calling updateMesssage');\n\t\t}\n\n\t\tconst clonedMessage = Object.assign({}, message);\n\t\tdelete clonedMessage.id;\n\n\t\tconst reservedMessageFields = [\n\t\t\t'latest_reactions',\n\t\t\t'own_reactions',\n\t\t\t'reply_count',\n\t\t\t'reaction_counts',\n\t\t\t'created_at',\n\t\t\t'updated_at',\n\t\t\t'html',\n\t\t\t'command',\n\t\t\t'type',\n\t\t\t'user',\n\t\t];\n\n\t\treservedMessageFields.forEach(function(item) {\n\t\t\tif (clonedMessage[item] != null) {\n\t\t\t\tdelete clonedMessage[item];\n\t\t\t}\n\t\t});\n\n\t\tif (userId != null) {\n\t\t\tif (typeof userId == 'string' || userId instanceof String) {\n\t\t\t\tclonedMessage.user_id = userId;\n\t\t\t} else {\n\t\t\t\tclonedMessage.user = { id: userId.id };\n\t\t\t}\n\t\t}\n\t\treturn await this.post(this.baseURL + `/messages/${message.id}`, {\n\t\t\tmessage: clonedMessage,\n\t\t});\n\t}\n\n\tasync deleteMessage(messageID) {\n\t\treturn await this.delete(this.baseURL + `/messages/${messageID}`);\n\t}\n\n\tasync getMessage(messageID) {\n\t\treturn await this.get(this.baseURL + `/messages/${messageID}`);\n\t}\n\n\t_userAgent() {\n\t\treturn `stream-chat-javascript-client-${this.node ? 'node' : 'browser'}-${\n\t\t\tpkg.version\n\t\t}`;\n\t}\n\n\t/**\n\t * _isUsingServerAuth - Returns true if we're using server side auth\n\t */\n\t_isUsingServerAuth = () => {\n\t\t// returns if were in server side mode or not...\n\t\tconst serverAuth = !!this.secret;\n\t\treturn serverAuth;\n\t};\n\n\t_addClientParams(params = {}) {\n\t\tconst token = this._getToken();\n\n\t\treturn {\n\t\t\t...this.options,\n\t\t\tparams: {\n\t\t\t\tuser_id: this.userID,\n\t\t\t\t...params,\n\t\t\t\tapi_key: this.key,\n\t\t\t\tconnection_id: this.connectionID,\n\t\t\t},\n\t\t\theaders: {\n\t\t\t\tAuthorization: token,\n\t\t\t\t'stream-auth-type': this.getAuthType(),\n\t\t\t\t'x-stream-client': this._userAgent(),\n\t\t\t},\n\t\t};\n\t}\n\n\t_getToken() {\n\t\tif (this.secret == null && this.userToken == null && !this.anonymous) {\n\t\t\tthrow new Error(\n\t\t\t\t`Both secret and user tokens are not set. Either client.setUser wasn't called or client.disconnect was called`,\n\t\t\t);\n\t\t}\n\t\tlet token = '';\n\t\tif (!this.anonymous) {\n\t\t\ttoken = this.userToken != null ? this.userToken : JWTServerToken(this.secret);\n\t\t}\n\t\treturn token;\n\t}\n\n\t_startCleaning() {\n\t\tconst that = this;\n\t\tif (this.cleaningIntervalRef != null) {\n\t\t\treturn;\n\t\t}\n\t\tthis.cleaningIntervalRef = setInterval(() => {\n\t\t\t// call clean on the channel, used for calling the stop.typing event etc.\n\t\t\tfor (const channel of Object.values(that.activeChannels)) {\n\t\t\t\tchannel.clean();\n\t\t\t}\n\t\t}, 500);\n\t}\n\n\tverifyWebhook(requestBody, xSignature) {\n\t\treturn CheckSignature(requestBody, this.secret, xSignature);\n\t}\n}\n"],"names":["_extends","module","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","arr","Array","isArray","_arr","_n","_d","_e","undefined","_s","_i","Symbol","iterator","next","done","push","value","err","TypeError","arrayWithHoles","iterableToArrayLimit","nonIterableRest","arr2","iter","toString","from","arrayWithoutHoles","iterableToArray","nonIterableSpread","excluded","sourceKeys","keys","indexOf","objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","obj","defineProperty","enumerable","configurable","writable","ownKeys","concat","filter","sym","getOwnPropertyDescriptor","forEach","global","Op","hasOwn","$Symbol","iteratorSymbol","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","runtime","regeneratorRuntime","exports","wrap","GenStateSuspendedStart","GenStateSuspendedYield","GenStateExecuting","GenStateCompleted","ContinueSentinel","IteratorPrototype","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","GeneratorFunctionPrototype","Generator","create","GeneratorFunction","constructor","displayName","isGeneratorFunction","genFun","ctor","name","mark","setPrototypeOf","__proto__","awrap","arg","__await","defineIteratorMethods","AsyncIterator","async","innerFn","outerFn","self","tryLocsList","then","result","object","reverse","pop","Context","reset","skipTempReset","prev","sent","_sent","delegate","method","tryEntries","resetTryEntry","charAt","isNaN","slice","stop","rootRecord","completion","type","rval","dispatchException","exception","context","handle","loc","caught","record","entry","tryLoc","hasCatch","hasFinally","catchLoc","finallyLoc","Error","abrupt","finallyEntry","complete","afterLoc","finish","catch","thrown","delegateYield","iterable","resultName","nextLoc","protoGenerator","generator","_invoke","state","doneResult","delegateResult","maybeInvokeDelegate","tryCatch","makeInvokeMethod","fn","previousPromise","callInvokeWithMethodAndArg","Promise","resolve","reject","invoke","unwrapped","error","return","info","pushTryEntry","locs","iteratorMethod","Function","g","hadRuntime","getOwnPropertyNames","oldRuntime","require$$0","e","asyncGeneratorStep","gen","_next","_throw","args","instance","Constructor","_defineProperties","props","descriptor","protoProps","staticProps","_typeof2","_typeof","thisArg","val","isObject","isFunction","l","isArrayBuffer","isBuffer","isFormData","FormData","isArrayBufferView","ArrayBuffer","isView","buffer","isString","isNumber","isUndefined","isDate","isFile","isBlob","isStream","pipe","isURLSearchParams","URLSearchParams","isStandardBrowserEnv","navigator","product","window","document","merge","assignValue","extend","a","b","bind","trim","str","replace","message","config","code","request","response","enhanceError","encode","encodeURIComponent","ignoreDuplicateOf","utils","originURL","msie","test","userAgent","urlParsingNode","createElement","resolveURL","url","href","setAttribute","protocol","host","search","hash","hostname","port","pathname","location","requestURL","parsed","write","expires","path","domain","secure","cookie","Date","toGMTString","join","read","match","RegExp","decodeURIComponent","remove","now","requestData","data","requestHeaders","headers","XMLHttpRequest","auth","username","password","Authorization","btoa","open","toUpperCase","params","paramsSerializer","serializedParams","parts","v","toISOString","JSON","stringify","buildURL","timeout","onreadystatechange","readyState","status","responseURL","responseHeaders","getAllResponseHeaders","split","line","substr","toLowerCase","responseType","responseText","statusText","validateStatus","createError","settle","onerror","ontimeout","cookies","xsrfValue","withCredentials","isURLSameOrigin","xsrfCookieName","xsrfHeaderName","setRequestHeader","onDownloadProgress","addEventListener","onUploadProgress","upload","cancelToken","promise","cancel","abort","send","DEFAULT_CONTENT_TYPE","Content-Type","setContentTypeIfUnset","adapter","defaults","process","require$$1","transformRequest","normalizedName","normalizeHeaderName","transformResponse","parse","maxContentLength","common","Accept","InterceptorManager","handlers","use","fulfilled","rejected","eject","id","h","fns","__CANCEL__","throwIfCancellationRequested","throwIfRequested","baseURL","relativeURL","transformData","reason","isCancel","Axios","instanceConfig","interceptors","chain","dispatchRequest","interceptor","unshift","shift","Cancel","CancelToken","executor","resolvePromise","token","c","createInstance","defaultConfig","axios","require$$2","all","promises","spread","callback","getRandomValues","crypto","msCrypto","rnds8","Uint8Array","rnds","r","Math","random","byteToHex","buf","offset","bth","options","rng","ii","bytesToUuid","Immutable","immutableInit","REACT_ELEMENT_TYPE","for","REACT_ELEMENT_TYPE_FALLBACK","globalConfig","use_static","instantiateEmptyObject","addPropertyTo","methodName","banProperty","ImmutableError","Boolean","immutabilityTag","isImmutable","isEqual","isMergableObject","mutatingObjectMethods","mutatingArrayMethods","nonMutatingArrayMethods","mutatingDateMethods","stack","makeImmutable","bannedMethods","index","freeze","makeMethodReturnImmutable","currentMethod","arraySet","idx","deep","mode","mutable","asMutableArray","makeImmutableArray","immutableEmptyArray","arraySetIn","pth","head","newValue","tail","thisHead","setIn","nextHead","isFinite","objectSetIn","immutableEmptyObject","array","flatMap","asObject","update","updateIn","getIn","asMutableDate","getTime","iteratorResult","without","keysToRemoveArray","el","makeImmutableObject","opts","asDeepMutable","pair","asMutable","quickCopy","src","dest","other","receivedArray","merger","addToResult","currentObj","otherObj","immutableValue","mergerResult","currentValue","otherFromArray","clearDroppedKeys","objectReplace","fnObject","fnArray","fnDate","objectSet","property","updater","restArgs","initialVal","set","getInPath","defaultValue","asMutableObject","instantiatePlainObject","stackRemaining","$$typeof","isReactElement","File","isFileObject","Blob","isBlobObject","isError","isPromise","date","clone","toStatic","toStaticObjectOrArray","static","byDate","created_at","ChannelState","channel","_channel","watcher_count","typing","messages","threads","mutedUsers","watchers","members","last_message_at","newMessage","addMessagesSorted","__html","html","updated_at","newMessages","initializing","parsedMessages","parsedMsg","messageToImmutable","updatedThreads","parent_id","show_in_channel","_addToMessageList","parentID","thread","threadMessages","sort","reaction","_addReactionToMessage","message_id","_removeReactionFromMessage","getClient","userID","user","old","filterReaction","item","updated","messageToRemove","removed","filteredMessages","entries","lastEvent","received_at","dispatchEvent","cid","EVENT_MAP","isValidEventType","eventType","logChatPromiseExecution","console","warn","sleep","m","setTimeout","Channel","client","watch","presence","_this","query","_client","_data","listeners","initialized","lastTypingEvent","isTyping","disconnected","configs","post","_channelURL","uri","contentType","sendFile","delete","event","_checkInitialized","messageID","user_id","body","reactionType","channelData","updateMessage","accept_invite","reject_invite","add_members","add_moderators","remove_members","demote_moderators","formData","form_data","getConfig","typing_events","diff","lastKeyStroke","sendEvent","min","lastMessage","max","messageSlice","read_events","stopTyping","clean","defaultOptions","wsPromise","_hasConnectionID","combined","_initializeState","logger","tags","get","last_read","lastRead","count","mentioned_users","map","u","queryURL","activeChannels","_addChannelConfig","targetUserID","banUser","unbanUser","callbackOrString","callbackOrNothing","s","addMessageSorted","member","addReaction","removeReaction","listener","_isUsingServerAuth","updateUserReference","w","watcher","parsedRead","ClientState","users","userChannelReferences","updateUser","channelID","ws","WebSocket","MozWebSocket","StableWSConnection","wsURL","clientID","messageCallback","recoverCallback","eventCallback","_setHealth","isHealthy","_reconnect","wsID","isResolved","rejectPromise","consecutiveFailures","totalFailures","_errorFromWSEvent","healthy","online","isWSFailure","onlineStatusChanged","removeEventListener","that","connectionOpen","isConnecting","healthCheckInterval","monitorInterval","_listenForConnectionChanges","_connect","healthCheck","_startMonitor","_startHealthCheck","_context","isClosedPromise","healthCheckIntervalRef","clearInterval","monitorIntervalRef","_removeConnectionListeners","removeAllListeners","close","onclose","_setupConnectionPromise","isoWS","onopen","onmessage","connectionID","connection_id","interval","_retryInterval","_destroyCurrentWSConnection","_context3","floor","setInterval","client_id","_this2","UserFromToken","fragments","payload","x","String","fromCharCode","L","decodeBase64","__self__","root","F","fetch","support","searchParams","blob","arrayBuffer","viewClasses","normalizeName","normalizeValue","iteratorFor","items","Headers","append","header","consumed","bodyUsed","fileReaderReady","reader","onload","readBlobAsArrayBuffer","FileReader","readAsArrayBuffer","bufferClone","view","byteLength","Body","_initBody","_bodyInit","_bodyText","isPrototypeOf","_bodyBlob","_bodyFormData","DataView","_bodyArrayBuffer","text","readAsText","chars","readArrayBufferAsText","decode","json","oldValue","has","methods","Request","input","upcased","credentials","signal","referrer","form","bytes","Response","bodyInit","ok","redirectStatuses","redirect","RangeError","DOMException","init","aborted","xhr","abortXhr","rawHeaders","onabort","polyfill","StreamChat","secretOrOptions","_handleClientEvent","_handleChannelEvent","messageEvent","jsonString","wsConnection","cids","lastMessageIDs","lastMessageId","queryChannels","$in","limit","recovery","last_message_ids","secret","userToken","browser","node","nodeOptions","httpAgent","http","Agent","keepAlive","httpsAgent","https","setBaseURL","env","STREAM_LOCAL_TEST_RUN","anonymous","userId","Buffer","wsBaseURL","UUID","uuidv4","connect","_startCleaning","createToken","tokenUserId","_setUser","_setupConnection","_user","apn_config","p12_cert","patch","apnTemplate","apn_template","firebaseTemplate","firebase_template","cleaningIntervalRef","connectionEstablishedCount","_disconnect","disconnect","anon","last_active","guestUser","setUser","access_token","exp","extra","apiSecret","extraData","jwtOptions","algorithm","noTimestamp","jwt","sign","JWTUserToken","unsubscribe","_logApiRequest","_addClientParams","_logApiResponse","handleResponse","_context6","put","_context7","_context8","_context9","_context10","_read","_readableState","fileField","getAuthType","errorFromResponse","_updateUserReferences","me","refMap","refs","connecting","failures","user_details","user_token","server_determines_connection_id","qs","_getToken","authType","_userAgent","recoverState","handleEvent","handshake","filterConditions","sortFields","k","field","direction","filter_conditions","updateUsers","channels","channelState","push_provider","channelType","custom","userObject","userMap","target_user_id","targetID","target_id","target_message_id","commands","clonedMessage","pkg","api_key","server","JWTServerToken","requestBody","xSignature","signature","createHmac","digest"],"mappings":"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"}