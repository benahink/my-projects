{"version":3,"file":"index.js","sources":["../src/components/Avatar.js","../src/components/SafeAnchor.js","../src/assets/Poweredby_100px-White_VertText.png","../src/components/Card.js","../src/components/Image.js","../src/components/AttachmentActions.js","../src/components/Audio.js","../src/components/Attachment.js","../src/utils.js","../src/components/MessageActionsBox.js","../src/components/ReactionsList.js","../src/components/Tooltip.js","../src/components/LoadingIndicator.js","../src/components/Gallery.js","../src/components/ReactionSelector.js","../src/components/MessageRepliesCountButton.js","../src/components/Modal.js","../src/context.js","../src/components/AutoCompleteTextarea/listener.js","../src/components/AutoCompleteTextarea/Item.js","../src/components/AutoCompleteTextarea/List.js","../src/components/AutoCompleteTextarea/utils.js","../src/components/AutoCompleteTextarea/Textarea.js","../src/components/EmoticonItem.js","../src/components/UserItem.js","../src/components/CommandItem.js","../src/components/ChatAutoComplete.js","../src/components/MessageInputLarge.js","../src/components/MessageInput.js","../src/components/EditMessageForm.js","../src/components/MessageSimple.js","../src/components/Message.js","../src/components/ReverseInfiniteScroll.js","../src/components/MessageNotification.js","../src/components/DateSeparator.js","../src/components/EventComponent.js","../src/components/MessageList.js","../src/components/Chat.js","../src/components/Channel.js","../src/components/ChannelHeader.js","../src/components/MessageInputFlat.js","../src/components/MessageInputSmall.js","../src/components/ChannelPreviewLastMessage.js","../src/components/ChannelPreviewCountOnly.js","../src/components/ChannelPreview.js","../src/components/LoadMoreButton.js","../src/components/LoadMorePaginator.js","../src/components/LoadingChannels.js","../src/assets/str-chat__connection-error.svg","../src/components/ChatDown.js","../src/assets/str-chat__icon-chevron-down.svg","../src/components/ChannelListTeam.js","../src/components/ChannelList.js","../src/components/ChannelPreviewMessenger.js","../src/components/ChannelListMessenger.js","../src/components/ChannelPreviewCompact.js","../src/components/InfiniteScroll.js","../src/components/InfiniteScrollPaginator.js","../src/components/MessageCommerce.js","../src/components/SimpleReactionsList.js","../src/components/MessageLivestream.js","../src/components/MessageTeam.js","../src/components/Thread.js","../src/components/TypingIndicator.js","../src/components/Window.js","../src/index.js"],"sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\n\n/**\n * Avatar - A round avatar image with fallback to username's first letter\n *\n * @example ./docs/Avatar.md\n * @extends PureComponent\n */\nexport class Avatar extends React.PureComponent {\n  static propTypes = {\n    /** image url */\n    image: PropTypes.string,\n    /** name of the picture, used for title tag fallback */\n    name: PropTypes.string,\n    /** shape of the avatar, circle, rounded or square */\n    shape: PropTypes.oneOf(['circle', 'rounded', 'square']),\n    /** size in pixels */\n    size: PropTypes.number,\n  };\n\n  static defaultProps = {\n    size: 32,\n    shape: 'circle',\n  };\n\n  state = {\n    errored: false,\n    loaded: false,\n  };\n\n  getInitials = (name) =>\n    name\n      ? name\n          .split(' ')\n          .slice(0, 1)\n          .map((name) => name.charAt(0))\n      : null;\n\n  onLoad = () => {\n    this.setState({ loaded: true });\n  };\n\n  onError = () => {\n    this.setState({ errored: true });\n  };\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.image !== this.props.image) {\n      this.setState({ loaded: false, errored: false });\n    }\n  }\n\n  render() {\n    const { size, name, shape, image } = this.props;\n    const initials = this.getInitials(name);\n    return (\n      <div\n        className={`str-chat__avatar str-chat__avatar--${shape}`}\n        title={name}\n        style={{\n          width: size,\n          height: size,\n          flexBasis: size,\n          lineHeight: size + 'px',\n          fontSize: size / 2,\n        }}\n      >\n        {image && !this.state.errored ? (\n          <img\n            src={image}\n            alt={initials}\n            className={\n              'str-chat__avatar-image' + this.state.loaded\n                ? ' str-chat__avatar-image--loaded'\n                : ''\n            }\n            style={{\n              width: size,\n              height: size,\n              flexBasis: size,\n              objectFit: 'cover',\n            }}\n            onLoad={this.onLoad}\n            onError={this.onError}\n          />\n        ) : (\n          <div className=\"str-chat__avatar-fallback\">{initials}</div>\n        )}\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport { sanitizeUrl } from '@braintree/sanitize-url';\n\n/**\n * SafeAnchor - In all ways similar to a regular anchor tag.\n * The difference is that it sanitizes the href value and prevents XSS\n * @extends PureComponent\n */\nexport class SafeAnchor extends React.PureComponent {\n  render() {\n    const href = sanitizeUrl(this.props.href);\n    return (\n      <a {...this.props} href={href}>\n        {this.props.children}\n      </a>\n    );\n  }\n}\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAkCAYAAAB/up84AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABVhJREFUeNrsW6GS20AMdToGBgEGAQYBBgEBBQYFgQcP5hMO9jP6CYWFBwsPBgYUGBQEFAQUGAQYBBgYGHjmutt5O6NupbXXcZJrx5rJXGyv11o96Ukr52avr6/BJG9HZmMBMpvNYnxt1JzNZNoRAYFxM2Z8rT6FuueMcaH6s1KfhBn3U42r1Jg1rrfq+Bt5xgf1Z64+uQFQndNzLc1Ydfwg6F2p6wd1PVXfU+b6Gc9vHGuh8+jrsXVN61Sq64XggNw95tlH9XmP6y3W2OI+qvN3db6mN7/zBFAb8L2aNMJxRsDQC6jIuEyN039LnAvV8QJKRRijZUHmT8iiLpEFDHKJaB1TGN732WuAokEIDQCwhwGjsMEIMNgp6qY9JlsTgyXquCFG1d54IsbOsKAVPLDBcQJjUxB0RJwAltGntNQ46GhzqPnb0y0954RG/1iLQ7SRCkR+guiPtW6GFRg5gAlCrFvbJEZ0ngDAUn0/Y77fDCJFXuiB/AmGDC3PLg0YWLRW5CcJWWPglNxDKS6C59AcZBs/sYxbOQBqHHkuZYCsGCds4SQJDDx3RK3RjUb9EfMUcLQ57BHS64MAIYtYkvEt+d4wCzqr++ipkoTtkihOI2chREfA5KiC0GOAaMig05zoWJPjgMk39jxcPphDR0mSDrtq438g51iq8omQlEnYJfHoiAFxYQGko6bCPSmZ5wS+TRx0Zc5R4CtmHbEVJT+0p1uOYdNE1SMfOKNO0zXWEmItptApsfYa1LV0UZUPIHSCmlRYJhfokNWhX5IcsmIWbEAMCQWerWirhZK57MghNQyzgke3QuQWPUv4EAac9wCuJjmkNmvUNEwiobX+DgdEWoQGgNDPGtTWWhRRWONX5JlnePCZhP1JUCOzPN1O0C2MohP7xuiko8Qy9INUDBg2YPJMlzP8pRv0qYeUdu+Cy+RAKIYmtVqojM5kkS0DwkXlLuY0ICzgAEOlAd8fPe+rYJdppz61TiZ5G4AgcScWz05RcUtAkOwyJMtI4FzNt3suCWKfwLUhdqRC0yA/enB1CZ4vBZ2fhIptJ4x/5PYVavyzQ39N0V8ddnsQ+m3sfX02hjo3bIVJ7d5PhqojZxYdC3NEdv9oQMQWFFjHHqpLEsc9BZyF23c9cG0ZOJjUIN15V1mY8OOAhW0E77yWaP2eoO9VBFG/d6yX6/xuHT2z3AsQ5ImnjrZBF6XcUiKAEl0RlJzZ7ZtnbxmqSgRqfxmyD9k6wNDGzuExecB3Z1/ukBOjQH73MZbspChFp9nQ/EYY9+LaaIYOqlo7JjwISX+LcBwbjAOz2ZKS7BpOcq0o0R2HvZAbHpHPJGc+dm00paQuedmOA4O0WD5fyQ4V08Ip4ATxhYl8CCh76/0QLVyehlBVFyCpYJTcKmPjHoY8XNE2VQ8dbIkdr4Z95npBwcNVahKzNEMBSYSyz46iLm8sLunreG5O+xYTsaMUHYu6bMn79sRCT2+8l6SMV2cCT5e3UspBXbbd9n3nDIN/Q1KP3JDfWLcd8kZwCVX12hjeOlmOIMe+L6FGjJLC4QS5rz6hg/tThjZiU0Pr/g7D65/uCUafKgaUJu0lHjvox/XsjXA+GAOQUogIXV8/v7GoKOGJfYuHxvHjt7t3rEMHD2+E5PoR+5GCLCS+8g6Z2xgGt6anuwGC99MSKAl6RrfUs/ofje+b1PcjlJBlMMk4gKBUe77AqKVP/T1Jj30IQPmCTdkm6NeKb5BkJzCGdCA8XuFGZIOWCBEh/mwGiZ/rFZXk3xHEdkjHb6MknVOhypJe+Sac03XlL4fe3r81mH518q9GyCS3kV8CDADlsrVaJhTLAgAAAABJRU5ErkJggg==\"","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { SafeAnchor } from './SafeAnchor';\n\nimport giphyLogo from '../assets/Poweredby_100px-White_VertText.png';\n/**\n * Card - Simple Card Layout\n *\n * @example ./docs/Card.md\n * @extends PureComponent\n */\nexport class Card extends React.PureComponent {\n  static propTypes = {\n    /** Title retured by the OG scraper */\n    title: PropTypes.string.isRequired,\n    /** Link retured by the OG scraper */\n    title_link: PropTypes.string,\n    /** The scraped url, used as a fallback if the OG-data doesnt include a link */\n    og_scrape_url: PropTypes.string,\n    /** The url of the full sized image */\n    image_url: PropTypes.string,\n    /** The url for thumbnail sized image*/\n    thumb_url: PropTypes.string,\n    /** Description retured by the OG scraper */\n    text: PropTypes.string,\n  };\n\n  trimUrl = (url) => {\n    let trimmedUrl;\n    if (url !== undefined || url !== null) {\n      trimmedUrl = url\n        .replace(/^(?:https?:\\/\\/)?(?:www\\.)?/i, '')\n        .split('/')[0];\n    }\n    return trimmedUrl;\n  };\n\n  render() {\n    const {\n      title,\n      title_link,\n      text,\n      type,\n      image_url,\n      thumb_url,\n      og_scrape_url,\n    } = this.props;\n    const image = thumb_url || image_url;\n\n    if (!title && !title_link && !image) {\n      return (\n        <div\n          className={`str-chat__message-attachment-card str-chat__message-attachment-card--${type}`}\n        >\n          <div className=\"str-chat__message-attachment-card--content\">\n            <div className=\"str-chat__message-attachment-card--text\">\n              this content could not be displayed\n            </div>\n          </div>\n        </div>\n      );\n    }\n\n    if (!title_link && !og_scrape_url) {\n      return null;\n    }\n\n    return (\n      <div\n        className={`str-chat__message-attachment-card str-chat__message-attachment-card--${type}`}\n      >\n        {image && (\n          <div className=\"str-chat__message-attachment-card--header\">\n            <img src={image} alt={image} />\n          </div>\n        )}\n        <div className=\"str-chat__message-attachment-card--content\">\n          <div className=\"str-chat__message-attachment-card--flex\">\n            {title && (\n              <div className=\"str-chat__message-attachment-card--title\">\n                {title}\n              </div>\n            )}\n            {text && (\n              <div className=\"str-chat__message-attachment-card--text\">\n                {text}\n              </div>\n            )}\n            {(title_link || og_scrape_url) && (\n              <SafeAnchor\n                href={title_link || og_scrape_url}\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                className=\"str-chat__message-attachment-card--url\"\n              >\n                {this.trimUrl(title_link || og_scrape_url)}\n              </SafeAnchor>\n            )}\n          </div>\n          {type === 'giphy' && (\n            <img\n              className=\"str-chat__message-attachment-card__giphy-logo\"\n              src={giphyLogo}\n              alt=\"giphy logo\"\n            />\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport Lightbox from 'react-images';\n\n/**\n * Image - Small wrapper around an image tag, supports thumbnails\n *\n * @example ./docs/Image.md\n * @extends PureComponent\n */\nexport class Image extends React.PureComponent {\n  state = {\n    isOpen: false,\n  };\n\n  static propTypes = {\n    /** The full size image url */\n    image_url: PropTypes.string,\n    /** The thumb url */\n    thumb_url: PropTypes.string,\n    /** The text fallback for the image */\n    fallback: PropTypes.string,\n  };\n\n  openLightbox = () => {\n    this.setState({\n      isOpen: true,\n    });\n  };\n\n  closeLightbox = () => {\n    this.setState({\n      isOpen: false,\n    });\n  };\n\n  render() {\n    const { image_url, thumb_url, fallback } = this.props;\n    return (\n      <React.Fragment>\n        <img\n          className=\"str-chat__message-attachment--img\"\n          onClick={this.openLightbox}\n          src={thumb_url || image_url}\n          alt={fallback}\n        />\n        <Lightbox\n          isOpen={this.state.isOpen}\n          onClose={this.closeLightbox}\n          images={[{ src: image_url || thumb_url }]}\n          backdropClosesModal={true}\n        />\n      </React.Fragment>\n    );\n  }\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\n/**\n * AttachmentActions - The actions you can take on an attachment\n *\n * @example ./docs/AttachmentActions.md\n * @extends PureComponent\n */\nexport class AttachmentActions extends React.PureComponent {\n  static propTypes = {\n    // /** The id of the form input */\n    // id: PropTypes.string.isRequired,\n    /** The text for the form input */\n    text: PropTypes.string,\n    /** A list of actions */\n    actions: PropTypes.array.isRequired,\n    /** The handler to execute after selecting an action */\n    actionHandler: PropTypes.func.isRequired,\n  };\n\n  render() {\n    const { text, id, actions, actionHandler } = this.props;\n\n    return (\n      <div className=\"str-chat__message-attachment-actions\">\n        <form className=\"str-chat__message-attachment-actions-form\">\n          <span key={0}>{text}</span>\n          {actions.map((action) => (\n            <button\n              className={`str-chat__message-attachment-actions-button str-chat__message-attachment-actions-button--${action.style}`}\n              key={`${id}-${action.value}`}\n              data-value={action.value}\n              onClick={actionHandler.bind(this, action.name, action.value)}\n            >\n              {action.text}\n            </button>\n          ))}\n        </form>\n      </div>\n    );\n  }\n}\n","import * as React from 'react';\n\nexport class Audio extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      open: false,\n      playing: false,\n      progress: 0,\n      updateProgress: null,\n    };\n    this.audioRef = React.createRef();\n  }\n\n  playAudio = () => {\n    if (this.audioRef.current !== null) {\n      this.audioRef.current.pause();\n      this.updateProgress();\n      this.setState({\n        playing: true,\n        updateProgress: setInterval(this.updateProgress, 500),\n      });\n      //$FlowFixMe\n      this.audioRef.current.play();\n    }\n  };\n\n  pauseAudio = () => {\n    if (this.audioRef.current !== null) {\n      this.audioRef.current.pause();\n    }\n    this.setState({ playing: false });\n    window.clearInterval(this.state.updateProgress);\n  };\n\n  updateProgress = () => {\n    if (this.audioRef.current !== null) {\n      const position = this.audioRef.current.currentTime;\n      const duration = this.audioRef.current.duration;\n      const progress = (100 / duration) * position;\n      this.setState({\n        progress,\n      });\n      if (position === duration) {\n        this.pauseAudio();\n      }\n    }\n  };\n\n  componentWillUnmount() {\n    window.clearInterval(this.state.updateProgress);\n  }\n\n  _handleClose = (e) => {\n    if (this.props.handleClose) {\n      this.props.handleClose(e);\n    }\n  };\n\n  render() {\n    const { og } = this.props;\n    const audio = og;\n    const url = og.asset_url;\n    const image = og.image_url;\n    return (\n      <div className=\"str-chat__audio\">\n        <div className=\"str-chat__audio__wrapper\">\n          <audio ref={this.audioRef}>\n            <source\n              src={url}\n              type={\n                audio.type === 'audio/vnd.facebook.bridge'\n                  ? 'audio/mp3'\n                  : 'audio/mp3'\n              }\n            />\n          </audio>\n          <div className=\"str-chat__audio__image\">\n            <div className=\"str-chat__audio__image--overlay\">\n              {!this.state.playing ? (\n                <div\n                  onClick={() => this.playAudio()}\n                  className=\"str-chat__audio__image--button\"\n                >\n                  <svg\n                    width=\"40\"\n                    height=\"40\"\n                    viewBox=\"0 0 64 64\"\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                  >\n                    <path\n                      d=\"M32 58c14.36 0 26-11.64 26-26S46.36 6 32 6 6 17.64 6 32s11.64 26 26 26zm0 6C14.327 64 0 49.673 0 32 0 14.327 14.327 0 32 0c17.673 0 32 14.327 32 32 0 17.673-14.327 32-32 32zm13.237-28.412L26.135 45.625a3.27 3.27 0 0 1-4.426-1.4 3.319 3.319 0 0 1-.372-1.47L21 23.36c-.032-1.823 1.41-3.327 3.222-3.358a3.263 3.263 0 0 1 1.473.322l19.438 9.36a3.311 3.311 0 0 1 .103 5.905z\"\n                      fillRule=\"nonzero\"\n                    />\n                  </svg>\n                </div>\n              ) : (\n                <div\n                  onClick={() => this.pauseAudio()}\n                  className=\"str-chat__audio__image--button\"\n                >\n                  <svg\n                    width=\"40\"\n                    height=\"40\"\n                    viewBox=\"0 0 64 64\"\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                  >\n                    <path\n                      d=\"M32 58.215c14.478 0 26.215-11.737 26.215-26.215S46.478 5.785 32 5.785 5.785 17.522 5.785 32 17.522 58.215 32 58.215zM32 64C14.327 64 0 49.673 0 32 0 14.327 14.327 0 32 0c17.673 0 32 14.327 32 32 0 17.673-14.327 32-32 32zm-7.412-45.56h2.892a2.17 2.17 0 0 1 2.17 2.17v23.865a2.17 2.17 0 0 1-2.17 2.17h-2.892a2.17 2.17 0 0 1-2.17-2.17V20.61a2.17 2.17 0 0 1 2.17-2.17zm12.293 0h2.893a2.17 2.17 0 0 1 2.17 2.17v23.865a2.17 2.17 0 0 1-2.17 2.17h-2.893a2.17 2.17 0 0 1-2.17-2.17V20.61a2.17 2.17 0 0 1 2.17-2.17z\"\n                      fillRule=\"nonzero\"\n                    />\n                  </svg>\n                </div>\n              )}\n            </div>\n            <img src={image} alt={`${og.description}`} />\n          </div>\n          <div className=\"str-chat__audio__content\">\n            <span className=\"str-chat__audio__content--title\">\n              <strong>{og.title}</strong>\n            </span>\n            <span className=\"str-chat__audio__content--subtitle\">\n              {og.text}\n            </span>\n            <div className=\"str-chat__audio__content--progress\">\n              <div style={{ width: `${this.state.progress}%` }} />\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n","import React, { PureComponent } from 'react';\nimport ReactPlayer from 'react-player';\nimport { Card } from './Card';\nimport { Image } from './Image';\nimport { AttachmentActions } from './AttachmentActions';\nimport { FileIcon } from 'react-file-utils';\nimport prettybytes from 'pretty-bytes';\nimport PropTypes from 'prop-types';\nimport { SafeAnchor } from './SafeAnchor';\n\nimport { Audio } from './Audio';\n/**\n * Attachment - The message attachment\n *\n * @example ./docs/Attachment.md\n * @extends PureComponent\n */\nexport class Attachment extends PureComponent {\n  attachmentRef = React.createRef();\n  static propTypes = {\n    /** The attachment to render */\n    attachment: PropTypes.object.isRequired,\n    /**\n\t\tThe handler function to call when an action is selected on an attachment.\n\t\tExamples include canceling a \\/giphy command or shuffling the results.\n\t\t*/\n    actionHandler: PropTypes.func.isRequired,\n  };\n\n  render() {\n    const { attachment: a } = this.props;\n    if (!a) {\n      return null;\n    }\n\n    let type, extra;\n    if (a.actions && a.actions.length > 0) {\n      extra = 'actions';\n    }\n    if (a.type === 'giphy' || a.type === 'imgur') {\n      type = 'card';\n    } else if (a.type === 'image' && (a.title_link || a.og_scrape_url)) {\n      type = 'card';\n    } else if (a.type === 'image') {\n      type = 'image';\n    } else if (a.type === 'file') {\n      type = 'file';\n    } else if (a.type === 'audio') {\n      type = 'audio';\n    } else if (a.type === 'video') {\n      type = 'media';\n    } else {\n      type = 'card';\n      extra = 'no-image';\n    }\n\n    if (type === 'card' && !a.title_link && !a.og_scrape_url) {\n      return null;\n    }\n    const results = [];\n    if (type === 'card') {\n      if (a.actions && a.actions.length) {\n        results.push(\n          <div style={{ maxWidth: 450 }} key={`key-image-${a.id}`}>\n            <Card {...a} key={`key-card-${a.id}`} />\n            <AttachmentActions\n              key={'key-actions-' + a.id}\n              {...a}\n              actionHandler={this.props.actionHandler}\n            />\n          </div>,\n        );\n      } else {\n        results.push(<Card {...a} key={`key-card-${a.id}`} />);\n      }\n    } else if (type === 'image') {\n      if (a.actions && a.actions.length) {\n        results.push(\n          <div style={{ maxWidth: 450 }} key={`key-image-${a.id}`}>\n            <Image {...a} />\n            <AttachmentActions\n              key={'key-actions-' + a.id}\n              {...a}\n              actionHandler={this.props.actionHandler}\n            />\n          </div>,\n        );\n      } else {\n        results.push(<Image {...a} key={`key-image-${a.id}`} />);\n      }\n    } else if (type === 'file') {\n      results.push(\n        <div\n          className=\"str-chat__message-attachment-file--item\"\n          key={`key-file-${a.id}`}\n        >\n          <FileIcon\n            mimeType={a.mime_type}\n            filename={a.title}\n            big={true}\n            size={30}\n          />\n          <div className=\"str-chat__message-attachment-file--item-text\">\n            <SafeAnchor href={a.asset_url} download>\n              {a.title}\n            </SafeAnchor>\n            {a.file_size && <span>{prettybytes(a.file_size)}</span>}\n          </div>\n        </div>,\n      );\n    } else if (type === 'audio') {\n      results.push(\n        <div style={{ maxWidth: 450 }} key={`key-video-${a.id}`}>\n          <Audio og={a} />\n        </div>,\n      );\n    } else if (type === 'media') {\n      if (a.actions && a.actions.length) {\n        results.push(\n          <div style={{ maxWidth: 450 }} key={`key-video-${a.id}`}>\n            <div className=\"str-chat__player-wrapper\">\n              <ReactPlayer\n                className=\"react-player\"\n                url={a.asset_url}\n                width=\"100%\"\n                height=\"100%\"\n                controls\n              />\n            </div>\n            <AttachmentActions\n              key={'key-actions-' + a.id}\n              {...a}\n              actionHandler={this.props.actionHandler}\n            />\n          </div>,\n        );\n      } else {\n        results.push(\n          <div className=\"str-chat__player-wrapper\" key={`key-video-${a.id}`}>\n            <ReactPlayer\n              className=\"react-player\"\n              url={a.asset_url}\n              width=\"100%\"\n              height=\"100%\"\n              controls\n            />\n          </div>,\n        );\n      }\n    } else {\n      if (a.actions && a.actions.length) {\n        results.push(\n          <div style={{ maxWidth: 450 }} key={`key-image-${a.id}`}>\n            <Card {...a} key={`key-card-${a.id}`} />\n            <AttachmentActions\n              key={'key-actions-' + a.id}\n              {...a}\n              actionHandler={this.props.actionHandler}\n            />\n          </div>,\n        );\n      } else {\n        results.push(<Card {...a} key={`key-card-${a.id}`} />);\n      }\n    }\n\n    return (\n      <div\n        className={`str-chat__message-attachment str-chat__message-attachment--${type} str-chat__message-attachment--${a.type} str-chat__message-attachment--${type}--${extra}`}\n        ref={this.attachmentRef}\n      >\n        {results}\n      </div>\n    );\n  }\n}\n\nAttachment.propTypes = {};\n","import anchorme from 'anchorme';\nimport emojiRegex from 'emoji-regex';\nimport ReactMarkdown from 'react-markdown/with-html';\nimport truncate from 'lodash/truncate';\nimport data from 'emoji-mart/data/all.json';\nimport React from 'react';\n\nexport const emojiSetDef = {\n  spriteUrl: 'https://getstream.imgix.net/images/emoji-sprite.png',\n  size: 20,\n  sheetColumns: 2,\n  sheetRows: 3,\n  sheetSize: 64,\n};\n\nexport const commonEmoji = {\n  emoticons: [],\n  short_names: [],\n  custom: true,\n};\n\nexport const defaultMinimalEmojis = [\n  {\n    id: 'like',\n    name: 'like',\n    colons: ':+1:',\n    sheet_x: 0,\n    sheet_y: 0,\n    ...commonEmoji,\n    ...emojiSetDef,\n  },\n  {\n    id: 'love',\n    name: 'love',\n    colons: ':heart:',\n    sheet_x: 1,\n    sheet_y: 2,\n    ...commonEmoji,\n    ...emojiSetDef,\n  },\n  {\n    id: 'haha',\n    name: 'haha',\n    colons: ':joy:',\n    sheet_x: 1,\n    sheet_y: 0,\n    ...commonEmoji,\n    ...emojiSetDef,\n  },\n  {\n    id: 'wow',\n    name: 'wow',\n    colons: ':astonished:',\n    sheet_x: 0,\n    sheet_y: 2,\n    ...commonEmoji,\n    ...emojiSetDef,\n  },\n  {\n    id: 'sad',\n    name: 'sad',\n    colons: ':pensive:',\n    sheet_x: 0,\n    sheet_y: 1,\n    ...commonEmoji,\n    ...emojiSetDef,\n  },\n  {\n    id: 'angry',\n    name: 'angry',\n    colons: ':angry:',\n    sheet_x: 1,\n    sheet_y: 1,\n    ...commonEmoji,\n    ...emojiSetDef,\n  },\n];\n\nconst d = Object.assign({}, data);\nd.emojis = {};\n\n// use this only for small lists like in ReactionSelector\nexport const emojiData = d;\n\nexport const isOnlyEmojis = (text) => {\n  if (!text) return false;\n\n  const noEmojis = text.replace(emojiRegex(), '');\n  const noSpace = noEmojis.replace(/[\\s\\n]/gm, '');\n  return !noSpace;\n};\n\nexport const isPromise = (thing) => {\n  const promise = thing && typeof thing.then === 'function';\n  return promise;\n};\n\nexport const byDate = (a, b) => a.created_at - b.created_at;\n\n// https://stackoverflow.com/a/29234240/7625485\nexport const formatArray = (dict) => {\n  const arr2 = Object.keys(dict);\n  const arr3 = [];\n  arr2.forEach((item, i) =>\n    arr3.push(dict[arr2[i]].user.name || dict[arr2[i]].user.id),\n  );\n  let outStr = '';\n  if (arr3.length === 1) {\n    outStr = arr3[0] + ' is typing...';\n    dict;\n  } else if (arr3.length === 2) {\n    //joins all with \"and\" but =no commas\n    //example: \"bob and sam\"\n    outStr = arr3.join(' and ') + ' are typing...';\n  } else if (arr3.length > 2) {\n    //joins all with commas, but last one gets \", and\" (oxford comma!)\n    //example: \"bob, joe, and sam\"\n    outStr =\n      arr3.slice(0, -1).join(', ') +\n      ', and ' +\n      arr3.slice(-1) +\n      ' are typing...';\n  }\n\n  return outStr;\n};\n\nexport const renderText = (message) => {\n  // take the @ mentions and turn them into markdown?\n  // translate links\n  let { text } = message;\n  const { mentioned_users } = message;\n\n  if (!text) {\n    return;\n  }\n\n  const allowed = [\n    'html',\n    'root',\n    'text',\n    'break',\n    'paragraph',\n    'emphasis',\n    'strong',\n    'link',\n    'list',\n    'listItem',\n    'code',\n    'inlineCode',\n    'blockquote',\n  ];\n\n  const urls = anchorme(text, {\n    list: true,\n  });\n  for (const urlInfo of urls) {\n    const displayLink = truncate(urlInfo.encoded.replace(/^(www\\.)/, ''), {\n      length: 20,\n      omission: '...',\n    });\n    const mkdown = `[${displayLink}](${urlInfo.protocol}${urlInfo.encoded})`;\n    text = text.replace(urlInfo.raw, mkdown);\n  }\n  let newText = text;\n  if (mentioned_users && mentioned_users.length) {\n    for (let i = 0; i < mentioned_users.length; i++) {\n      const username = mentioned_users[i].name || mentioned_users[i].id;\n      const mkdown = `**@${username}**`;\n      const re = new RegExp(`@${username}`, 'g');\n      newText = newText.replace(re, mkdown);\n    }\n  }\n\n  return (\n    <ReactMarkdown\n      allowedTypes={allowed}\n      source={newText}\n      linkTarget=\"_blank\"\n      plugins={[]}\n      escapeHtml={true}\n      skipHtml={false}\n    />\n  );\n};\n\n// https://stackoverflow.com/a/6860916/2570866\nexport function generateRandomId() {\n  // prettier-ignore\n  return (S4()+S4()+\"-\"+S4()+\"-\"+S4()+\"-\"+S4()+\"-\"+S4()+S4()+S4());\n}\n\nfunction S4() {\n  return (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);\n}\n\nexport const smartRender = (ElementOrComponentOrLiteral, props, fallback) => {\n  if (ElementOrComponentOrLiteral === undefined) {\n    ElementOrComponentOrLiteral = fallback;\n  }\n  if (React.isValidElement(ElementOrComponentOrLiteral)) {\n    // Flow cast through any, to make flow believe it's a React.Element\n    const element = ElementOrComponentOrLiteral;\n    return element;\n  }\n\n  // Flow cast through any to remove React.Element after previous check\n  const ComponentOrLiteral = ElementOrComponentOrLiteral;\n\n  if (\n    typeof ComponentOrLiteral === 'string' ||\n    typeof ComponentOrLiteral === 'number' ||\n    typeof ComponentOrLiteral === 'boolean' ||\n    ComponentOrLiteral == null\n  ) {\n    return ComponentOrLiteral;\n  }\n  return <ComponentOrLiteral {...props} />;\n};\n\nexport const MESSAGE_ACTIONS = {\n  edit: 'edit',\n  delete: 'delete',\n  flag: 'flag',\n  mute: 'mute',\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { MESSAGE_ACTIONS } from '../utils';\n\n/**\n * MessageActionsBox - A component for taking action on a message\n *\n * @example ./docs/MessageActionsBox.md\n * @extends PureComponent\n */\nexport class MessageActionsBox extends React.Component {\n  static propTypes = {\n    /** If the message actions box should be open or not */\n    open: PropTypes.bool.isRequired,\n    /** The message component, most logic is delegated to this component and MessageActionsBox uses the following functions explicitely:\n     *  `handleFlag`, `handleMute`, `handleEdit`, `handleDelete`, `canDeleteMessagec`, `anEditMessage`, `isMyMessage`, `isAdmin`\n     */\n    Message: PropTypes.oneOfType([\n      PropTypes.node,\n      PropTypes.func,\n      PropTypes.object,\n    ]).isRequired,\n  };\n\n  static defaultProp = {\n    open: false,\n  };\n\n  actionsBoxRef = React.createRef();\n\n  state = {\n    reverse: false,\n    rect: null,\n  };\n\n  componentDidMount() {}\n\n  async componentDidUpdate(prevProps) {\n    if (!prevProps.open && this.props.open) {\n      if (this.state.rect === null) {\n        await this.setState({\n          rect: this.actionsBoxRef.current.getBoundingClientRect(),\n        });\n      }\n      const ml = this.props.messageListRect;\n\n      if (this.props.mine) {\n        this.setState({\n          reverse: this.state.rect.left < ml.left ? true : false,\n        });\n      } else if (!this.props.mine) {\n        this.setState({\n          reverse: this.state.rect.right + 5 > ml.right ? true : false,\n        });\n      }\n    }\n  }\n\n  render() {\n    const { Message } = this.props;\n    const messageActions = Message.getMessageActions();\n\n    return (\n      <div\n        className={`str-chat__message-actions-box\n          ${this.props.open ? 'str-chat__message-actions-box--open' : ''}\n          ${this.props.mine ? 'str-chat__message-actions-box--mine' : ''}\n          ${this.state.reverse ? 'str-chat__message-actions-box--reverse' : ''}\n        `}\n        ref={this.actionsBoxRef}\n      >\n        <ul className=\"str-chat__message-actions-list\">\n          {messageActions.indexOf(MESSAGE_ACTIONS.flag) > -1 && (\n            <button onClick={Message.handleFlag}>\n              <li className=\"str-chat__message-actions-list-item\">Flag</li>\n            </button>\n          )}\n          {messageActions.indexOf(MESSAGE_ACTIONS.mute) > -1 && (\n            <button onClick={Message.handleMute}>\n              <li className=\"str-chat__message-actions-list-item\">Mute</li>\n            </button>\n          )}\n          {messageActions.indexOf(MESSAGE_ACTIONS.edit) > -1 && (\n            <button onClick={Message.handleEdit}>\n              <li className=\"str-chat__message-actions-list-item\">\n                Edit Message\n              </li>\n            </button>\n          )}\n          {messageActions.indexOf(MESSAGE_ACTIONS.delete) > -1 && (\n            <button onClick={Message.handleDelete}>\n              <li className=\"str-chat__message-actions-list-item\">Delete</li>\n            </button>\n          )}\n        </ul>\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { NimbleEmoji } from 'emoji-mart';\n\nimport { defaultMinimalEmojis, emojiSetDef, emojiData } from '../utils';\n\nexport class ReactionsList extends React.Component {\n  static propTypes = {\n    reactions: PropTypes.array,\n    /** Provide a list of reaction options [{name: 'angry', emoji: 'angry'}] */\n    reactionOptions: PropTypes.array,\n    reverse: PropTypes.bool,\n  };\n\n  static defaultProps = {\n    reactionOptions: defaultMinimalEmojis,\n    emojiSetDef,\n    reverse: false,\n  };\n\n  constructor(props) {\n    super(props);\n  }\n\n  _renderReactions = (reactions) => {\n    const reactionsByType = {};\n    reactions.map((item) => {\n      if (reactions[item.type] === undefined) {\n        return (reactionsByType[item.type] = [item]);\n      } else {\n        return (reactionsByType[item.type] = [\n          ...reactionsByType[item.type],\n          item,\n        ]);\n      }\n    });\n\n    const reactionsEmojis = this.props.reactionOptions.reduce(\n      (acc, cur) => ({ ...acc, [cur.id]: cur }),\n      {},\n    );\n\n    return Object.keys(reactionsByType).map((type) =>\n      reactionsEmojis[type] ? (\n        <li key={reactionsEmojis[type].id}>\n          <NimbleEmoji\n            emoji={reactionsEmojis[type]}\n            {...emojiSetDef}\n            size={16}\n            data={emojiData}\n          />{' '}\n          &nbsp;\n        </li>\n      ) : null,\n    );\n  };\n\n  _getReactionCount = () => {\n    const reaction_counts = this.props.reaction_counts;\n    let count = null;\n    if (\n      reaction_counts !== null &&\n      reaction_counts !== undefined &&\n      Object.keys(reaction_counts).length > 0\n    ) {\n      count = 0;\n      Object.keys(reaction_counts).map(\n        (key) => (count += reaction_counts[key]),\n      );\n    }\n    return count;\n  };\n\n  render() {\n    return (\n      <div\n        className={`str-chat__reaction-list ${\n          this.props.reverse ? 'str-chat__reaction-list--reverse' : ''\n        }`}\n        onClick={this.props.onClick}\n        ref={this.reactionList}\n      >\n        <ul>\n          {this._renderReactions(this.props.reactions)}\n          <li>\n            <span className=\"str-chat__reaction-list--counter\">\n              {this._getReactionCount()}\n            </span>\n          </li>\n        </ul>\n      </div>\n    );\n  }\n}\n","import React from 'react';\n\nexport class Tooltip extends React.PureComponent {\n  render() {\n    return <div className=\"str-chat__tooltip\">{this.props.children}</div>;\n  }\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport svg from '../assets/str-chat__loading-indicator.svg';\n\n/**\n * LoadingIndicator - Just a simple loading spinner..\n *\n * @example ./docs/LoadingIndicator.md\n * @extends PureComponent\n */\nexport class LoadingIndicator extends React.PureComponent {\n  static propTypes = {\n    /** The size of the loading icon */\n    size: PropTypes.number,\n    /** Set the color of the LoadingIndicator */\n    color: PropTypes.string,\n  };\n  static defaultProps = {\n    size: 15,\n    color: '#006CFF',\n  };\n\n  stopRef = React.createRef();\n\n  render() {\n    const { size, color } = this.props;\n    return (\n      <div\n        className={'str-chat__loading-indicator ' + color}\n        style={{ width: size, height: size }}\n      >\n        <svg\n          width={size}\n          height={size}\n          viewBox={`0 0 30 30`}\n          xmlns=\"http://www.w3.org/2000/svg\"\n        >\n          <defs>\n            <linearGradient x1=\"50%\" y1=\"0%\" x2=\"50%\" y2=\"100%\" id=\"a\">\n              <stop stopColor=\"#FFF\" stopOpacity=\"0\" offset=\"0%\" />\n              <stop\n                ref={this.stopRef}\n                offset=\"100%\"\n                stopColor={color}\n                stopOpacity=\"1\"\n                style={{ stopColor: color }}\n              />\n            </linearGradient>\n          </defs>\n          <path\n            d=\"M2.518 23.321l1.664-1.11A12.988 12.988 0 0 0 15 28c7.18 0 13-5.82 13-13S22.18 2 15 2V0c8.284 0 15 6.716 15 15 0 8.284-6.716 15-15 15-5.206 0-9.792-2.652-12.482-6.679z\"\n            fill=\"url(#a)\"\n            fillRule=\"evenodd\"\n          />\n        </svg>\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Lightbox from 'react-images';\n\n/**\n * Gallery - displays up to 6 images in a simple responsive grid with a lightbox to view the images.\n * @example ./docs/Gallery.md\n * @extends PureComponent\n */\nexport class Gallery extends React.PureComponent {\n  static propTypes = {\n    images: PropTypes.array.isRequired,\n  };\n\n  state = {\n    lightboxIsOpen: false,\n    imageIndex: 0,\n  };\n\n  openLightbox = (i) => {\n    this.setState({\n      lightboxIsOpen: true,\n      imageIndex: i,\n    });\n  };\n  closeLightbox = () => {\n    this.setState({\n      lightboxIsOpen: false,\n      imageIndex: 0,\n    });\n  };\n\n  gotoPrevLightboxImage = () => {\n    this.setState({\n      imageIndex: this.state.imageIndex - 1,\n    });\n  };\n  gotoNextLightboxImage = () => {\n    this.setState({\n      imageIndex: this.state.imageIndex + 1,\n    });\n  };\n\n  render() {\n    const { images } = this.props;\n    const formattedArray = images.map((image) => ({\n      src: image.image_url,\n    }));\n\n    return (\n      <div className=\"str-chat__gallery\">\n        {images.slice(0, 3).map((image, i) => (\n          <div\n            className=\"str-chat__gallery-image\"\n            key={`gallery-image-${i}`}\n            onClick={() => this.openLightbox(i)}\n          >\n            <img src={image.image_url} />\n          </div>\n        ))}\n        {images.length > 3 && (\n          <div\n            className=\"str-chat__gallery-placeholder\"\n            style={{\n              background: `url(${images[3].image_url}) top left no-repeat`,\n              backgroundSize: 'cover',\n            }}\n            onClick={() => this.openLightbox(3)}\n          >\n            <p>{images.length - 3} more</p>\n          </div>\n        )}\n        <Lightbox\n          images={formattedArray}\n          isOpen={this.state.lightboxIsOpen}\n          onClickPrev={this.gotoPrevLightboxImage}\n          onClickNext={this.gotoNextLightboxImage}\n          onClose={this.closeLightbox}\n          backdropClosesModal\n          currentImage={this.state.imageIndex}\n        />\n      </div>\n    );\n  }\n}\n","import React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { NimbleEmoji } from 'emoji-mart';\n\nimport { Avatar } from './Avatar';\n\nimport { defaultMinimalEmojis, emojiSetDef, emojiData } from '../utils';\n\n/**\n * ReactionSelector - A component for selecting a reaction. Examples are love, wow, like etc.\n *\n * @example ./docs/ReactionSelector.md\n * @extends PureComponent\n */\nexport class ReactionSelector extends PureComponent {\n  static propTypes = {\n    /** Object containgin latest reactions */\n    latest_reactions: PropTypes.array.isRequired,\n    /** Object containing the reaction counts */\n    reaction_counts: PropTypes.object,\n    /** Callback to handle the reaction */\n    handleReaction: PropTypes.func.isRequired,\n    /** Set the direction to either left or right */\n    direction: PropTypes.oneOf(['left', 'right']),\n    /** Enable the avatar display */\n    detailedView: PropTypes.bool,\n    /** Provide a list of reaction options [{name: 'angry', emoji: 'angry'}] */\n    reactionOptions: PropTypes.array,\n\n    reverse: PropTypes.bool,\n  };\n\n  static defaultProps = {\n    detailedView: true,\n    reactionOptions: defaultMinimalEmojis,\n    reverse: false,\n    emojiSetDef,\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      showTooltip: false,\n      users: [],\n      position: 0,\n      arrowPosition: 0,\n      positionCalculated: false,\n    };\n    this.reactionSelector = React.createRef();\n    this.reactionSelectorInner = React.createRef();\n    this.reactionSelectorTooltip = React.createRef();\n  }\n\n  showTooltip = async (e, users) => {\n    const target = e.target.getBoundingClientRect();\n    await this.setState(\n      () => ({\n        showTooltip: true,\n        users,\n      }),\n      async () => {\n        await this.setTooltipPosition(target);\n        await this.setArrowPosition(target);\n      },\n    );\n  };\n\n  hideTooltip = () => {\n    this.setState(() => ({\n      showTooltip: false,\n      users: [],\n      arrowPosition: 0,\n      position: 0,\n      positionCaculated: false,\n    }));\n  };\n\n  getUsersPerReaction = (reactions, type) => {\n    const filtered =\n      reactions && reactions.filter((item) => item.type === type);\n    return filtered;\n  };\n\n  getLatestUser = (reactions, type) => {\n    const filtered = this.getUsersPerReaction(reactions, type);\n    if (filtered && filtered[0] && filtered[0].user) {\n      return filtered[0].user;\n    } else {\n      return 'NotFound';\n    }\n  };\n\n  getUserNames = (reactions, type) => {\n    const filtered = this.getUsersPerReaction(reactions, type);\n    const users = filtered && filtered.map((item) => item.user || 'NotFound');\n    return users;\n  };\n\n  getContainerDimensions = () =>\n    this.reactionSelector.current.getBoundingClientRect();\n  getToolTipDimensions = () =>\n    this.reactionSelectorTooltip.current.getBoundingClientRect();\n\n  setTooltipPosition = async (target) => {\n    const container = await this.getContainerDimensions();\n    const tooltip = await this.getToolTipDimensions();\n    let position;\n\n    if (tooltip.width === container.width || tooltip.x < container.x) {\n      position = 0;\n    } else {\n      position =\n        target.left + target.width / 2 - container.left - tooltip.width / 2;\n    }\n\n    await this.setState(() => ({\n      position,\n    }));\n  };\n\n  setArrowPosition = async (target) => {\n    const tooltip = this.reactionSelectorTooltip.current.getBoundingClientRect();\n    const position = target.x - tooltip.x + target.width / 2;\n\n    await this.setState(() => ({\n      arrowPosition: position,\n      positionCaculated: true,\n    }));\n  };\n\n  renderReactionItems = () => {\n    const { reaction_counts, latest_reactions } = this.props;\n    const lis = this.props.reactionOptions.map((reaction) => {\n      const users = this.getUserNames(latest_reactions, reaction.id);\n      const latestUser = this.getLatestUser(latest_reactions, reaction.id);\n\n      const count = reaction_counts && reaction_counts[reaction.id];\n\n      return (\n        <li\n          key={`item-${reaction.id}`}\n          className=\"str-chat__message-reactions-list-item\"\n          data-text={reaction.id}\n          onClick={this.props.handleReaction.bind(this, reaction.id)}\n        >\n          {Boolean(count) && this.props.detailedView && (\n            <React.Fragment>\n              <div\n                className=\"latest-user\"\n                onMouseEnter={(e) => this.showTooltip(e, users)}\n                onMouseLeave={this.hideTooltip}\n              >\n                {latestUser !== 'NotFound' ? (\n                  <Avatar\n                    image={latestUser.image}\n                    alt={latestUser.id}\n                    size={20}\n                    name={latestUser.id}\n                  />\n                ) : (\n                  <div className=\"latest-user-not-found\" />\n                )}\n              </div>\n            </React.Fragment>\n          )}\n          <NimbleEmoji emoji={reaction} {...emojiSetDef} data={emojiData} />\n\n          {Boolean(count) && this.props.detailedView && (\n            <span className=\"str-chat__message-reactions-list-item__count\">\n              {count || ''}\n            </span>\n          )}\n        </li>\n      );\n    });\n    return lis;\n  };\n\n  renderUsers = (users) =>\n    users.map((user, i) => {\n      let text = user.name || user.id;\n      if (i + 1 < users.length) {\n        text += ', ';\n      }\n      return (\n        <span className=\"latest-user-username\" key={`key-${i}-${user}`}>\n          {text}\n        </span>\n      );\n    });\n\n  render() {\n    return (\n      <div\n        className={`str-chat__reaction-selector ${\n          this.props.reverse ? 'str-chat__reaction-selector--reverse' : ''\n        }`}\n        ref={this.reactionSelector}\n      >\n        {this.props.detailedView && (\n          <div\n            className=\"str-chat__reaction-selector-tooltip\"\n            ref={this.reactionSelectorTooltip}\n            style={{\n              visibility: this.state.showTooltip ? 'visible' : 'hidden',\n              left: this.state.position,\n              opacity:\n                this.state.showTooltip && this.state.positionCaculated\n                  ? 1\n                  : 0.01,\n            }}\n          >\n            <div className=\"arrow\" style={{ left: this.state.arrowPosition }} />\n            {this.renderUsers(this.state.users)}\n          </div>\n        )}\n\n        <ul className=\"str-chat__message-reactions-list\">\n          {this.renderReactionItems()}\n        </ul>\n      </div>\n    );\n  }\n}\n","import React from 'react';\n\nimport PropTypes from 'prop-types';\n\nexport class MessageRepliesCountButton extends React.PureComponent {\n  static propTypes = {\n    labelSingle: PropTypes.string,\n    labelPlural: PropTypes.string,\n    reply_count: PropTypes.number,\n    onClick: PropTypes.func,\n  };\n  static defaultProps = {\n    labelSingle: 'reply',\n    labelPlural: 'replies',\n    reply_count: 0,\n  };\n\n  render() {\n    const { reply_count, labelSingle, labelPlural } = this.props;\n    if (reply_count && reply_count !== 0) {\n      return (\n        <button\n          className=\"str-chat__message-replies-count-button\"\n          onClick={this.props.onClick}\n        >\n          <svg width=\"18\" height=\"15\" xmlns=\"http://www.w3.org/2000/svg\">\n            <path\n              d=\"M.56 10.946H.06l-.002-.498L.025.92a.5.5 0 1 1 1-.004l.032 9.029H9.06v-4l9 4.5-9 4.5v-4H.56z\"\n              fillRule=\"nonzero\"\n            />\n          </svg>\n          {reply_count} {reply_count === 1 ? labelSingle : labelPlural}\n        </button>\n      );\n    }\n    return null;\n  }\n}\n","import React from 'react';\n\nexport class Modal extends React.PureComponent {\n  innerRef = React.createRef();\n\n  componentDidMount() {\n    document.addEventListener('keyPress', this.handleEscKey, false);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('keyPress', this.handleEscKey, false);\n  }\n\n  handleEscKey(e) {\n    if (e.keyCode === 27) {\n      this.props.onClose();\n      document.removeEventListener('keyPress', this.handleEscKey, false);\n    }\n  }\n\n  handleClick = (e) => {\n    if (!this.innerRef.current.contains(e.target)) {\n      this.props.onClose();\n      document.removeEventListener('keyPress', this.handleEscKey, false);\n    }\n  };\n\n  render() {\n    const openClasses = this.props.open\n      ? 'str-chat__modal--open'\n      : 'str-chat__modal--closed';\n    return (\n      <div\n        className={`str-chat__modal ${openClasses}`}\n        onClick={this.handleClick}\n      >\n        <div className=\"str-chat__modal__close-button\">\n          Close\n          <svg width=\"10\" height=\"10\" xmlns=\"http://www.w3.org/2000/svg\">\n            <path\n              d=\"M9.916 1.027L8.973.084 5 4.058 1.027.084l-.943.943L4.058 5 .084 8.973l.943.943L5 5.942l3.973 3.974.943-.943L5.942 5z\"\n              fillRule=\"evenodd\"\n            />\n          </svg>\n        </div>\n        <div className=\"str-chat__modal__inner\" ref={this.innerRef}>\n          {this.props.children}\n        </div>\n      </div>\n    );\n  }\n}\n","import React from 'react';\n\nexport const ChatContext = React.createContext({ client: null });\n\nexport function withChatContext(OriginalComponent) {\n  const ContextAwareComponent = function ContextComponent(props) {\n    return (\n      <ChatContext.Consumer>\n        {(context) => {\n          const mergedProps = { ...context, ...props };\n          return <OriginalComponent {...mergedProps} />;\n        }}\n      </ChatContext.Consumer>\n    );\n  };\n  ContextAwareComponent.displayName =\n    OriginalComponent.displayName || OriginalComponent.name || 'Component';\n  ContextAwareComponent.displayName = ContextAwareComponent.displayName.replace(\n    'Base',\n    '',\n  );\n\n  return ContextAwareComponent;\n}\n\nexport const ChannelContext = React.createContext({});\n\nexport function withChannelContext(OriginalComponent) {\n  const ContextAwareComponent = function ContextComponent(props) {\n    return (\n      <ChannelContext.Consumer>\n        {(channelContext) => (\n          <OriginalComponent {...channelContext} {...props} />\n        )}\n      </ChannelContext.Consumer>\n    );\n  };\n  ContextAwareComponent.displayName =\n    OriginalComponent.displayName || OriginalComponent.name || 'Component';\n  ContextAwareComponent.displayName = ContextAwareComponent.displayName.replace(\n    'Base',\n    '',\n  );\n\n  return ContextAwareComponent;\n}\n","export const KEY_CODES = {\n  ESC: 27,\n  UP: 38,\n  DOWN: 40,\n  ENTER: 13,\n  TAB: 9,\n  SPACE: 32,\n};\n\n// This is self-made key shortcuts manager, used for caching key strokes\nclass Listener {\n  constructor() {\n    this.index = 0;\n    this.listeners = {};\n    this.refCount = 0;\n\n    this.f = (e) => {\n      const code = e.keyCode || e.which;\n      Object.values(this.listeners).forEach(({ keyCode, fn }) => {\n        if (keyCode.includes(code)) fn(e);\n      });\n    };\n  }\n\n  startListen = () => {\n    if (!this.refCount) {\n      // prevent multiple listeners in case of multiple TextareaAutocomplete components on page\n      document.addEventListener('keydown', this.f);\n    }\n    this.refCount++;\n  };\n\n  stopListen = () => {\n    this.refCount--;\n    if (!this.refCount) {\n      // prevent disable listening in case of multiple TextareaAutocomplete components on page\n      document.removeEventListener('keydown', this.f);\n    }\n  };\n\n  add = (keyCodes, fn) => {\n    let keyCode = keyCodes;\n\n    if (typeof keyCode !== 'object') keyCode = [keyCode];\n\n    this.listeners[this.index] = {\n      keyCode,\n      fn,\n    };\n\n    this.index += 1;\n\n    return this.index;\n  };\n\n  remove = (id) => {\n    delete this.listeners[id];\n  };\n\n  removeAll = () => {\n    this.listeners = {};\n    this.index = 0;\n  };\n}\n\nexport default new Listener();\n","//\n\nimport React from 'react';\n\nexport default class Item extends React.Component {\n  selectItem = () => {\n    const { item, onSelectHandler } = this.props;\n    onSelectHandler(item);\n  };\n\n  render() {\n    const {\n      component: Component,\n      style,\n      onClickHandler,\n      item,\n      selected,\n      className,\n      innerRef,\n    } = this.props;\n\n    return (\n      <li className={`rta__item ${className || ''}`} style={style}>\n        <div\n          className={`rta__entity ${\n            selected === true ? 'rta__entity--selected' : ''\n          }`}\n          role=\"button\"\n          tabIndex={0}\n          onClick={onClickHandler}\n          onFocus={this.selectItem}\n          onMouseEnter={this.selectItem}\n          /* $FlowFixMe */\n          ref={innerRef}\n        >\n          <Component selected={selected} entity={item} />\n        </div>\n      </li>\n    );\n  }\n}\n","//\n\nimport React from 'react';\n\nimport Listeners, { KEY_CODES } from './listener';\nimport Item from './Item';\n\nexport default class List extends React.Component {\n  state = {\n    selectedItem: null,\n  };\n\n  cachedValues = null;\n\n  componentDidMount() {\n    this.listeners.push(\n      Listeners.add([KEY_CODES.DOWN, KEY_CODES.UP], this.scroll),\n      Listeners.add([KEY_CODES.ENTER, KEY_CODES.TAB], this.onPressEnter),\n    );\n\n    const { values } = this.props;\n    if (values && values[0]) this.selectItem(values[0]);\n  }\n\n  UNSAFE_componentWillReceiveProps({ values }) {\n    const newValues = values.map((val) => this.getId(val)).join('');\n\n    if (this.cachedValues !== newValues && values && values[0]) {\n      this.selectItem(values[0]);\n      this.cachedValues = newValues;\n    }\n  }\n\n  componentWillUnmount() {\n    let listener;\n    while (this.listeners.length) {\n      listener = this.listeners.pop();\n      Listeners.remove(listener);\n    }\n  }\n\n  onPressEnter = (e) => {\n    if (e && e.preventDefault) {\n      e.preventDefault();\n    }\n\n    const { values } = this.props;\n\n    this.modifyText(values[this.getPositionInList()]);\n  };\n\n  getPositionInList = () => {\n    const { values } = this.props;\n    const { selectedItem } = this.state;\n\n    if (!selectedItem) return 0;\n\n    return values.findIndex((a) => this.getId(a) === this.getId(selectedItem));\n  };\n\n  getId = (item) => {\n    const textToReplace = this.props.getTextToReplace(item);\n    if (textToReplace.key) {\n      return textToReplace.key;\n    }\n\n    if (typeof item === 'string' || !item.key) {\n      return textToReplace.text;\n    }\n\n    return item.key;\n  };\n\n  listeners = [];\n\n  itemsRef = {};\n\n  modifyText = (value) => {\n    if (!value) return;\n\n    const { onSelect, getTextToReplace, getSelectedItem } = this.props;\n\n    onSelect(getTextToReplace(value));\n    if (getSelectedItem) {\n      getSelectedItem(value);\n    }\n  };\n\n  selectItem = (item, keyboard = false) => {\n    this.setState({ selectedItem: item }, () => {\n      if (keyboard) {\n        this.props.dropdownScroll(this.itemsRef[this.getId(item)]);\n      }\n    });\n  };\n\n  scroll = (e) => {\n    if (e && e.preventDefault) {\n      e.preventDefault();\n    }\n\n    const { values } = this.props;\n\n    const code = e.keyCode || e.which;\n\n    const oldPosition = this.getPositionInList();\n    let newPosition;\n    switch (code) {\n      case KEY_CODES.DOWN:\n        newPosition = oldPosition + 1;\n        break;\n      case KEY_CODES.UP:\n        newPosition = oldPosition - 1;\n        break;\n      default:\n        newPosition = oldPosition;\n        break;\n    }\n\n    newPosition =\n      ((newPosition % values.length) + values.length) % values.length; // eslint-disable-line\n    this.selectItem(\n      values[newPosition],\n      [KEY_CODES.DOWN, KEY_CODES.UP].includes(code),\n    );\n  };\n\n  isSelected = (item) => {\n    const { selectedItem } = this.state;\n    if (!selectedItem) return false;\n\n    return this.getId(selectedItem) === this.getId(item);\n  };\n\n  renderHeader = (value) => {\n    if (value[0] === '/') {\n      return `Commands matching <strong>${value.replace('/', '')}</strong>`;\n    }\n\n    if (value[0] === ':') {\n      return `Emoji matching <strong>${value.replace(':', '')}</strong>`;\n    }\n\n    if (value[0] === '@') {\n      return `Searching for people`;\n    }\n  };\n\n  render() {\n    const {\n      values,\n      component,\n      style,\n      itemClassName,\n      className,\n      itemStyle,\n    } = this.props;\n\n    return (\n      <ul className={`rta__list ${className || ''}`} style={style}>\n        <li\n          className=\"rta__list-header\"\n          dangerouslySetInnerHTML={{\n            __html: this.renderHeader(this.props.value),\n          }}\n        />\n        {values.map((item) => (\n          <Item\n            key={this.getId(item)}\n            innerRef={(ref) => {\n              this.itemsRef[this.getId(item)] = ref;\n            }}\n            selected={this.isSelected(item)}\n            item={item}\n            className={itemClassName}\n            style={itemStyle}\n            onClickHandler={this.onPressEnter}\n            onSelectHandler={this.selectItem}\n            component={component}\n          />\n        ))}\n      </ul>\n    );\n  }\n}\n","//\n\nexport function defaultScrollToItem(container, item) {\n  const itemHeight = parseInt(\n    getComputedStyle(item).getPropertyValue('height'),\n    10,\n  );\n\n  const containerHight =\n    parseInt(getComputedStyle(container).getPropertyValue('height'), 10) -\n    itemHeight;\n\n  const itemOffsetTop = item.offsetTop;\n  const actualScrollTop = container.scrollTop;\n\n  if (\n    itemOffsetTop < actualScrollTop + containerHight &&\n    actualScrollTop < itemOffsetTop\n  ) {\n    return;\n  }\n\n  // eslint-disable-next-line\n  container.scrollTop = itemOffsetTop;\n}\n","//\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport getCaretCoordinates from 'textarea-caret';\nimport CustomEvent from 'custom-event';\n\nimport Listeners, { KEY_CODES } from './listener';\nimport List from './List';\n\nimport { defaultScrollToItem } from './utils';\n\nimport Textarea from 'react-textarea-autosize';\n\nconst DEFAULT_CARET_POSITION = 'next';\n\nconst errorMessage = (message) =>\n  console.error(\n    `RTA: dataProvider fails: ${message}\n    \\nCheck the documentation or create issue if you think it's bug. https://github.com/webscopeio/react-textarea-autocomplete/issues`,\n  );\n\nclass ReactTextareaAutocomplete extends React.Component {\n  static defaultProps = {\n    closeOnClickOutside: true,\n    movePopupAsYouType: false,\n    value: '',\n    minChar: 1,\n    scrollToItem: true,\n  };\n\n  constructor(props) {\n    super(props);\n\n    const { loadingComponent, trigger, value } = this.props;\n\n    // TODO: it would be better to have the parent control state...\n    // if (value) this.state.value = value;\n\n    this._createRegExp();\n\n    if (!loadingComponent) {\n      throw new Error('RTA: loadingComponent is not defined');\n    }\n\n    if (!trigger) {\n      throw new Error('RTA: trigger is not defined');\n    }\n    this.state = {\n      top: null,\n      left: null,\n      currentTrigger: null,\n      actualToken: '',\n      data: null,\n      value: value || '',\n      dataLoading: false,\n      selectionEnd: 0,\n      selectionStart: 0,\n      component: null,\n      listenerIndex: 0,\n    };\n  }\n\n  componentDidMount() {\n    Listeners.add(KEY_CODES.ESC, () => this._closeAutocomplete());\n    Listeners.add(KEY_CODES.SPACE, () => this._onSpace());\n    const listenerIndex = Listeners.add(KEY_CODES.ENTER, (e) =>\n      this._onEnter(e),\n    );\n    this.setState({\n      listenerIndex,\n    });\n    Listeners.startListen();\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    this._update(nextProps);\n  }\n\n  componentWillUnmount() {\n    Listeners.stopListen();\n    Listeners.remove(this.state.listenerIndex);\n  }\n\n  getSelectionPosition = () => {\n    if (!this.textareaRef) return null;\n\n    return {\n      selectionStart: this.textareaRef.selectionStart,\n      selectionEnd: this.textareaRef.selectionEnd,\n    };\n  };\n\n  getSelectedText = () => {\n    if (!this.textareaRef) return null;\n    const { selectionStart, selectionEnd } = this.textareaRef;\n\n    if (selectionStart === selectionEnd) return null;\n\n    return this.state.value.substr(\n      selectionStart,\n      selectionEnd - selectionStart,\n    );\n  };\n\n  setCaretPosition = (position = 0) => {\n    if (!this.textareaRef) return;\n\n    this.textareaRef.focus();\n    this.textareaRef.setSelectionRange(position, position);\n  };\n\n  getCaretPosition = () => {\n    if (!this.textareaRef) {\n      return 0;\n    }\n\n    const position = this.textareaRef.selectionEnd;\n    return position;\n  };\n\n  // handle the on-enter behaviour\n  _onEnter = (event) => {\n    const trigger = this.state.currentTrigger;\n    if (!this.textareaRef) {\n      return;\n    }\n    const hasFocus = this.textareaRef.matches(':focus');\n\n    // don't submit if the element has focus or the shift key is pressed\n    if (!hasFocus || event.shiftKey === true) {\n      return;\n    }\n    if (!trigger) {\n      // trigger a submit\n      this._replaceWord();\n      if (this.textareaRef) {\n        this.textareaRef.selectionEnd = 0;\n      }\n      this.props.handleSubmit(event);\n    }\n  };\n\n  // handle the on-space behaviour\n  _onSpace = () => {\n    if (!this.props.replaceWord) {\n      return;\n    }\n\n    if (!this.textareaRef) {\n      return;\n    }\n    const hasFocus = this.textareaRef.matches(':focus');\n\n    // don't change characters if the element doesn't have focus\n    if (!hasFocus) {\n      return;\n    }\n    this._replaceWord();\n  };\n\n  _replaceWord = () => {\n    const lastWordRegex = /([^\\s]+)(\\s*)$/;\n    const { value } = this.state;\n    const match = lastWordRegex.exec(value.slice(0, this.getCaretPosition()));\n    const lastWord = match && match[1];\n    if (!lastWord) {\n      return;\n    }\n    const spaces = match[2];\n\n    const newWord = this.props.replaceWord(lastWord);\n    if (newWord == null) {\n      return;\n    }\n    const textBeforeWord = value.slice(\n      0,\n      this.getCaretPosition() - match[0].length,\n    );\n    const textAfterCaret = value.slice(this.getCaretPosition(), -1);\n    const newText = textBeforeWord + newWord + spaces + textAfterCaret;\n    this.setState(\n      {\n        value: newText,\n      },\n      () => {\n        // fire onChange event after successful selection\n        const e = new CustomEvent('change', { bubbles: true });\n        this.textareaRef.dispatchEvent(e);\n        if (this.props.onChange) this.props.onChange(e);\n      },\n    );\n  };\n\n  _onSelect = (newToken) => {\n    const { selectionEnd, currentTrigger, value: textareaValue } = this.state;\n    const { onChange, trigger } = this.props;\n\n    if (!currentTrigger) return;\n\n    const computeCaretPosition = (position, token, startToken) => {\n      switch (position) {\n        case 'start':\n          return startToken;\n        case 'next':\n        case 'end':\n          return startToken + token.length;\n        default:\n          if (!Number.isInteger(position)) {\n            throw new Error(\n              'RTA: caretPosition should be \"start\", \"next\", \"end\" or number.',\n            );\n          }\n\n          return position;\n      }\n    };\n\n    const textToModify = textareaValue.slice(0, selectionEnd);\n\n    const startOfTokenPosition = textToModify.search(\n      /**\n       * It's important to escape the currentTrigger char for chars like [, (,...\n       */\n      new RegExp(\n        `\\\\${currentTrigger}${`[^\\\\${currentTrigger}${\n          trigger[currentTrigger].allowWhitespace ? '' : '\\\\s'\n        }]`}*$`,\n      ),\n    );\n\n    // we add space after emoji is selected if a caret position is next\n    const newTokenString =\n      newToken.caretPosition === 'next' ? `${newToken.text} ` : newToken.text;\n\n    const newCaretPosition = computeCaretPosition(\n      newToken.caretPosition,\n      newTokenString,\n      startOfTokenPosition,\n    );\n\n    const modifiedText =\n      textToModify.substring(0, startOfTokenPosition) + newTokenString;\n\n    // set the new textarea value and after that set the caret back to its position\n    this.setState(\n      {\n        value: textareaValue.replace(textToModify, modifiedText),\n        dataLoading: false,\n      },\n      () => {\n        // fire onChange event after successful selection\n        const e = new CustomEvent('change', { bubbles: true });\n        this.textareaRef.dispatchEvent(e);\n        if (onChange) onChange(e);\n\n        this.setCaretPosition(newCaretPosition);\n      },\n    );\n    this._closeAutocomplete();\n  };\n\n  _getItemOnSelect = () => {\n    const { currentTrigger } = this.state;\n    const triggerSettings = this._getCurrentTriggerSettings();\n\n    if (!currentTrigger || !triggerSettings) return null;\n\n    const { callback } = triggerSettings;\n\n    if (!callback) return null;\n\n    return (item) => {\n      if (typeof callback !== 'function') {\n        throw new Error(\n          'Output functor is not defined! You have to define \"output\" function. https://github.com/webscopeio/react-textarea-autocomplete#trigger-type',\n        );\n      }\n      if (callback) {\n        const selectedItem = callback(item, currentTrigger);\n\n        return selectedItem;\n      }\n      return null;\n    };\n  };\n\n  _getTextToReplace = () => {\n    const { currentTrigger, actualToken } = this.state;\n    const triggerSettings = this._getCurrentTriggerSettings();\n\n    if (!currentTrigger || !triggerSettings) return null;\n\n    const { output } = triggerSettings;\n\n    return (item) => {\n      if (\n        typeof item === 'object' &&\n        (!output || typeof output !== 'function')\n      ) {\n        throw new Error(\n          'Output functor is not defined! If you are using items as object you have to define \"output\" function. https://github.com/webscopeio/react-textarea-autocomplete#trigger-type',\n        );\n      }\n\n      if (output) {\n        const textToReplace = output(item, currentTrigger);\n\n        if (!textToReplace || typeof textToReplace === 'number') {\n          throw new Error(\n            `Output functor should return string or object in shape {text: string, caretPosition: string | number}.\\nGot \"${String(\n              textToReplace,\n            )}\". Check the implementation for trigger \"${currentTrigger}\" and its token \"${actualToken}\"\\n\\nSee https://github.com/webscopeio/react-textarea-autocomplete#trigger-type for more informations.\\n`,\n          );\n        }\n\n        if (typeof textToReplace === 'string') {\n          return {\n            text: textToReplace,\n            caretPosition: DEFAULT_CARET_POSITION,\n          };\n        }\n\n        if (!textToReplace.text) {\n          throw new Error(\n            `Output \"text\" is not defined! Object should has shape {text: string, caretPosition: string | number}. Check the implementation for trigger \"${currentTrigger}\" and its token \"${actualToken}\"\\n`,\n          );\n        }\n\n        if (!textToReplace.caretPosition) {\n          throw new Error(\n            `Output \"caretPosition\" is not defined! Object should has shape {text: string, caretPosition: string | number}. Check the implementation for trigger \"${currentTrigger}\" and its token \"${actualToken}\"\\n`,\n          );\n        }\n\n        return textToReplace;\n      }\n\n      if (typeof item !== 'string') {\n        throw new Error('Output item should be string\\n');\n      }\n\n      return {\n        text: `${currentTrigger}${item}${currentTrigger}`,\n        caretPosition: DEFAULT_CARET_POSITION,\n      };\n    };\n  };\n\n  _getCurrentTriggerSettings = () => {\n    const { currentTrigger } = this.state;\n\n    if (!currentTrigger) return null;\n\n    return this.props.trigger[currentTrigger];\n  };\n\n  _getValuesFromProvider = () => {\n    const { currentTrigger, actualToken } = this.state;\n    const triggerSettings = this._getCurrentTriggerSettings();\n\n    if (!currentTrigger || !triggerSettings) {\n      return;\n    }\n\n    const { dataProvider, component } = triggerSettings;\n\n    if (typeof dataProvider !== 'function') {\n      throw new Error('Trigger provider has to be a function!');\n    }\n\n    this.setState({\n      dataLoading: true,\n    });\n\n    // Modified: send the full text to support / style commands\n    let providedData = dataProvider(actualToken, this.state.value);\n\n    if (!(providedData instanceof Promise)) {\n      providedData = Promise.resolve(providedData);\n    }\n\n    providedData\n      .then((data) => {\n        if (!Array.isArray(data)) {\n          throw new Error('Trigger provider has to provide an array!');\n        }\n\n        if (typeof component !== 'function') {\n          throw new Error('Component should be defined!');\n        }\n\n        // throw away if we resolved old trigger\n        if (currentTrigger !== this.state.currentTrigger) return;\n\n        // if we haven't resolved any data let's close the autocomplete\n        if (!data.length) {\n          this._closeAutocomplete();\n          return;\n        }\n\n        this.setState({\n          dataLoading: false,\n          data,\n          component,\n        });\n      })\n      .catch((e) => errorMessage(e.message));\n  };\n\n  _getSuggestions = () => {\n    const { currentTrigger, data } = this.state;\n\n    if (!currentTrigger || !data || (data && !data.length)) return null;\n\n    return data;\n  };\n\n  _createRegExp = () => {\n    const { trigger } = this.props;\n\n    // negative lookahead to match only the trigger + the actual token = \"bladhwd:adawd:word test\" => \":word\"\n    // https://stackoverflow.com/a/8057827/2719917\n    this.tokenRegExp = new RegExp(\n      `([${Object.keys(trigger).join('')}])(?:(?!\\\\1)[^\\\\s])*$`,\n    );\n  };\n\n  // TODO: This is an anti pattern in react, should come up with a better way\n  _update({ value, trigger }) {\n    const { value: oldValue } = this.state;\n    const { trigger: oldTrigger } = this.props;\n\n    if (value !== oldValue || !oldValue) this.setState({ value });\n    /**\n     * check if trigger chars are changed, if so, change the regexp accordingly\n     */\n    if (Object.keys(trigger).join('') !== Object.keys(oldTrigger).join('')) {\n      this._createRegExp();\n    }\n  }\n\n  /**\n   * Close autocomplete, also clean up trigger (to avoid slow promises)\n   */\n  _closeAutocomplete = () => {\n    this.setState({\n      data: null,\n      dataLoading: false,\n      currentTrigger: null,\n      top: null,\n      left: null,\n    });\n  };\n\n  _cleanUpProps = () => {\n    const props = { ...this.props };\n    const notSafe = [\n      'loadingComponent',\n      'containerStyle',\n      'minChar',\n      'scrollToItem',\n      'ref',\n      'innerRef',\n      'onChange',\n      'onCaretPositionChange',\n      'className',\n      'value',\n      'trigger',\n      'listStyle',\n      'itemStyle',\n      'containerStyle',\n      'loaderStyle',\n      'className',\n      'containerClassName',\n      'listClassName',\n      'itemClassName',\n      'loaderClassName',\n      'closeOnClickOutside',\n      'dropdownStyle',\n      'dropdownClassName',\n      'movePopupAsYouType',\n      'handleSubmit',\n      'replaceWord',\n      'grow',\n    ];\n\n    // eslint-disable-next-line\n    for (const prop in props) {\n      if (notSafe.includes(prop)) delete props[prop];\n    }\n\n    return props;\n  };\n\n  _changeHandler = (e) => {\n    const {\n      trigger,\n      onChange,\n      minChar,\n      onCaretPositionChange,\n      movePopupAsYouType,\n    } = this.props;\n    const { top, left } = this.state;\n\n    const textarea = e.target;\n    const { selectionEnd, selectionStart } = textarea;\n    const value = textarea.value;\n\n    if (onChange) {\n      e.persist();\n      onChange(e);\n    }\n\n    if (onCaretPositionChange) {\n      const caretPosition = this.getCaretPosition();\n      onCaretPositionChange(caretPosition);\n    }\n\n    this.setState({\n      value,\n    });\n\n    let tokenMatch = this.tokenRegExp.exec(value.slice(0, selectionEnd));\n    let lastToken = tokenMatch && tokenMatch[0];\n\n    let currentTrigger =\n      (lastToken && Object.keys(trigger).find((a) => a === lastToken[0])) ||\n      null;\n\n    /*\n     if we lost the trigger token or there is no following character we want to close\n     the autocomplete\n    */\n    if (\n      (!lastToken || lastToken.length <= minChar) &&\n      // check if our current trigger disallows whitespace\n      ((this.state.currentTrigger &&\n        !trigger[this.state.currentTrigger].allowWhitespace) ||\n        !this.state.currentTrigger)\n    ) {\n      this._closeAutocomplete();\n      return;\n    }\n\n    /**\n     * This code has to be sync that is the reason why we obtain the currentTrigger\n     * from currentTrigger not this.state.currentTrigger\n     *\n     * Check if the currently typed token has to be afterWhitespace, or not.\n     */\n    if (\n      currentTrigger &&\n      value[tokenMatch.index - 1] &&\n      (trigger[currentTrigger].afterWhitespace &&\n        !value[tokenMatch.index - 1].match(/\\s/))\n    ) {\n      this._closeAutocomplete();\n      return;\n    }\n\n    /**\n      If our current trigger allows whitespace\n      get the correct token for DataProvider, so we need to construct new RegExp\n     */\n    if (\n      this.state.currentTrigger &&\n      trigger[this.state.currentTrigger].allowWhitespace\n    ) {\n      tokenMatch = new RegExp(\n        `\\\\${this.state.currentTrigger}[^${this.state.currentTrigger}]*$`,\n      ).exec(value.slice(0, selectionEnd));\n      lastToken = tokenMatch && tokenMatch[0];\n\n      if (!lastToken) {\n        this._closeAutocomplete();\n        return;\n      }\n\n      currentTrigger =\n        Object.keys(trigger).find((a) => a === lastToken[0]) || null;\n    }\n\n    const actualToken = lastToken.slice(1);\n\n    // if trigger is not configured step out from the function, otherwise proceed\n    if (!currentTrigger) {\n      return;\n    }\n\n    if (\n      movePopupAsYouType ||\n      (top === null && left === null) ||\n      // if we have single char - trigger it means we want to re-position the autocomplete\n      lastToken.length === 1\n    ) {\n      const { top: newTop, left: newLeft } = getCaretCoordinates(\n        textarea,\n        selectionEnd,\n      );\n\n      this.setState({\n        // make position relative to textarea\n        top: newTop - this.textareaRef.scrollTop || 0,\n        left: newLeft,\n      });\n    }\n\n    this.setState(\n      {\n        selectionEnd,\n        selectionStart,\n        currentTrigger,\n        actualToken,\n      },\n      () => {\n        try {\n          this._getValuesFromProvider();\n        } catch (err) {\n          errorMessage(err.message);\n        }\n      },\n    );\n  };\n\n  _selectHandler = (e) => {\n    const { onCaretPositionChange, onSelect } = this.props;\n\n    if (onCaretPositionChange) {\n      const caretPosition = this.getCaretPosition();\n      onCaretPositionChange(caretPosition);\n    }\n\n    if (onSelect) {\n      e.persist();\n      onSelect(e);\n    }\n  };\n\n  _onClickAndBlurHandler = (e) => {\n    const { closeOnClickOutside, onBlur } = this.props;\n\n    // If this is a click: e.target is the textarea, and e.relatedTarget is the thing\n    // that was actually clicked. If we clicked inside the autoselect dropdown, then\n    // that's not a blur, from the autoselect's point of view, so then do nothing.\n    const el = e.relatedTarget;\n    if (\n      this.dropdownRef &&\n      el instanceof Node &&\n      this.dropdownRef.contains(el)\n    ) {\n      return;\n    }\n\n    if (closeOnClickOutside) {\n      this._closeAutocomplete();\n    }\n\n    if (onBlur) {\n      e.persist();\n      onBlur(e);\n    }\n  };\n\n  _onScrollHandler = () => {\n    this._closeAutocomplete();\n  };\n\n  _dropdownScroll = (item) => {\n    const { scrollToItem } = this.props;\n\n    if (!scrollToItem) return;\n\n    if (scrollToItem === true) {\n      defaultScrollToItem(this.dropdownRef, item);\n      return;\n    }\n\n    if (typeof scrollToItem !== 'function' || scrollToItem.length !== 2) {\n      throw new Error(\n        '`scrollToItem` has to be boolean (true for default implementation) or function with two parameters: container, item.',\n      );\n    }\n\n    scrollToItem(this.dropdownRef, item);\n  };\n\n  render() {\n    const {\n      loadingComponent: Loader,\n      style,\n      className,\n      itemStyle,\n      listClassName,\n      itemClassName,\n      dropdownClassName,\n      dropdownStyle,\n      containerStyle,\n      containerClassName,\n      loaderStyle,\n      loaderClassName,\n    } = this.props;\n    const { dataLoading, currentTrigger, component, value } = this.state;\n\n    const suggestionData = this._getSuggestions();\n    const textToReplace = this._getTextToReplace();\n    const selectedItem = this._getItemOnSelect();\n\n    let maxRows = 10;\n    if (!this.props.grow) {\n      maxRows = 1;\n    }\n\n    return (\n      <div\n        className={`rta ${\n          dataLoading === true ? 'rta--loading' : ''\n        } ${containerClassName || ''}`}\n        style={containerStyle}\n      >\n        {(dataLoading || suggestionData) && currentTrigger && (\n          <div\n            ref={(ref) => {\n              // $FlowFixMe\n              this.dropdownRef = ref;\n            }}\n            style={{ ...dropdownStyle }}\n            className={`rta__autocomplete ${dropdownClassName || ''}`}\n          >\n            {suggestionData && component && textToReplace && (\n              <List\n                value={value}\n                values={suggestionData}\n                component={component}\n                className={listClassName}\n                itemClassName={itemClassName}\n                itemStyle={itemStyle}\n                getTextToReplace={textToReplace}\n                getSelectedItem={selectedItem}\n                onSelect={this._onSelect}\n                dropdownScroll={this._dropdownScroll}\n              />\n            )}\n            {dataLoading && (\n              <div\n                className={`rta__loader ${\n                  suggestionData !== null\n                    ? 'rta__loader--suggestion-data'\n                    : 'rta__loader--empty-suggestion-data'\n                } ${loaderClassName || ''}`}\n                style={loaderStyle}\n              >\n                <Loader data={suggestionData} />\n              </div>\n            )}\n          </div>\n        )}\n\n        <Textarea\n          {...this._cleanUpProps()}\n          inputRef={(ref) => {\n            this.props.innerRef && this.props.innerRef(ref);\n            this.textareaRef = ref;\n          }}\n          maxRows={maxRows}\n          className={`rta__textarea ${className || ''}`}\n          onChange={this._changeHandler}\n          onSelect={this._selectHandler}\n          onScroll={this._onScrollHandler}\n          onClick={\n            // The textarea itself is outside the autoselect dropdown.\n            this._onClickAndBlurHandler\n          }\n          onBlur={this._onClickAndBlurHandler}\n          onFocus={this.props.onFocus}\n          value={value}\n          style={style}\n        />\n      </div>\n    );\n  }\n}\n\nconst triggerPropsCheck = ({ trigger }) => {\n  if (!trigger) return Error('Invalid prop trigger. Prop missing.');\n\n  const triggers = Object.entries(trigger);\n\n  for (let i = 0; i < triggers.length; i += 1) {\n    const [triggerChar, settings] = triggers[i];\n\n    if (typeof triggerChar !== 'string' || triggerChar.length !== 1) {\n      return Error(\n        'Invalid prop trigger. Keys of the object has to be string / one character.',\n      );\n    }\n\n    // $FlowFixMe\n    const triggerSetting = settings;\n\n    const {\n      component,\n      dataProvider,\n      output,\n      callback,\n      afterWhitespace,\n      allowWhitespace,\n    } = triggerSetting;\n\n    if (!component || typeof component !== 'function') {\n      return Error('Invalid prop trigger: component should be defined.');\n    }\n\n    if (!dataProvider || typeof dataProvider !== 'function') {\n      return Error('Invalid prop trigger: dataProvider should be defined.');\n    }\n\n    if (output && typeof output !== 'function') {\n      return Error('Invalid prop trigger: output should be a function.');\n    }\n\n    if (callback && typeof callback !== 'function') {\n      return Error('Invalid prop trigger: callback should be a function.');\n    }\n\n    if (afterWhitespace && allowWhitespace) {\n      return Error(\n        'Invalid prop trigger: afterWhitespace and allowWhitespace can be used together',\n      );\n    }\n  }\n\n  return null;\n};\n\nReactTextareaAutocomplete.propTypes = {\n  loadingComponent: PropTypes.func.isRequired,\n  minChar: PropTypes.number,\n  onChange: PropTypes.func,\n  onSelect: PropTypes.func,\n  onBlur: PropTypes.func,\n  onCaretPositionChange: PropTypes.func,\n  className: PropTypes.string,\n  containerStyle: PropTypes.object,\n  containerClassName: PropTypes.string,\n  closeOnClickOutside: PropTypes.bool,\n  style: PropTypes.object,\n  listStyle: PropTypes.object,\n  itemStyle: PropTypes.object,\n  loaderStyle: PropTypes.object,\n  dropdownStyle: PropTypes.object,\n  listClassName: PropTypes.string,\n  itemClassName: PropTypes.string,\n  loaderClassName: PropTypes.string,\n  dropdownClassName: PropTypes.string,\n  value: PropTypes.string,\n  trigger: triggerPropsCheck, //eslint-disable-line\n};\n\nexport default ReactTextareaAutocomplete;\n","import React, { PureComponent } from 'react';\n\nexport class EmoticonItem extends PureComponent {\n  render() {\n    return (\n      <div className=\"str-chat__emoji-item\">\n        <span className=\"str-chat__emoji-item--entity\">\n          {this.props.entity.native}\n        </span>\n        <span className=\"str-chat__emoji-item--name\">\n          {this.props.entity.name}\n        </span>\n        <span className=\"str-chat__emoji-item--char\">\n          {this.props.entity.char}\n        </span>\n      </div>\n    );\n  }\n}\n","import React, { PureComponent } from 'react';\nimport { Avatar } from './Avatar';\n\nexport class UserItem extends PureComponent {\n  render() {\n    const u = this.props.entity;\n    return (\n      <div className=\"str-chat__user-item\">\n        <Avatar size={20} image={u.image} />\n        <div>\n          <strong>{u.name}</strong> {!u.name ? u.id : ''}\n        </div>\n      </div>\n    );\n  }\n}\n","import React, { PureComponent } from 'react';\n\nexport class CommandItem extends PureComponent {\n  render() {\n    const c = this.props.entity;\n\n    return (\n      <div className=\"str-chat__slash-command\">\n        <span className=\"str-chat__slash-command-header\">\n          <strong>{c.name}</strong> {c.args}\n        </span>\n        <br />\n        <span className=\"str-chat__slash-command-description\">\n          {c.description}\n        </span>\n      </div>\n    );\n  }\n}\n","import React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\nimport AutoCompleteTextarea from './AutoCompleteTextarea';\nimport { LoadingIndicator } from './LoadingIndicator';\n\n// import '@webscopeio/react-textarea-autocomplete/style.css';\nimport { emojiIndex } from 'emoji-mart';\n\nimport { EmoticonItem } from './EmoticonItem';\nimport { UserItem } from './UserItem';\nimport { CommandItem } from './CommandItem';\n/**\n * Textarea component with included autocomplete options. You can set your own commands and\n * @example ./docs/ChatAutoComplete.md\n */\nexport class ChatAutoComplete extends PureComponent {\n  static propTypes = {\n    /** The number of rows you want the textarea to have */\n    rows: PropTypes.number,\n    /** Grow the number of rows of the textarea while you're typing */\n    grow: PropTypes.bool,\n    /** Make the textarea disabled */\n    disabled: PropTypes.bool,\n    /** The value of the textarea */\n    value: PropTypes.string,\n    /** Function to run on pasting within the textarea */\n    onPaste: PropTypes.func,\n    /** Function that runs on submit */\n    handleSubmit: PropTypes.func,\n    /** Function that runs on change */\n    onChange: PropTypes.func,\n    /** Placeholder for the textare */\n    placeholder: PropTypes.string,\n    /** What loading component to use for the auto complete when loading results. */\n    LoadingIndicator: PropTypes.node,\n    /** function to set up your triggers for autocomplete(eg. '@' for mentions, '/' for commands) */\n    trigger: PropTypes.func,\n    /** Minimum number of Character */\n    minChar: PropTypes.number,\n  };\n\n  static defaultProps = {\n    rows: 3,\n  };\n\n  getTriggers() {\n    return {\n      ':': {\n        dataProvider: (q) => {\n          if (q.length === 0 || q.charAt(0).match(/[^a-zA-Z0-9+-]/)) {\n            return [];\n          }\n          const emojis = emojiIndex.search(q) || [];\n          return emojis.slice(0, 10);\n        },\n        component: EmoticonItem,\n        output: (entity) => ({\n          key: entity.id,\n          text: `${entity.native}`,\n          caretPosition: 'next',\n        }),\n      },\n      '@': {\n        dataProvider: (q) => {\n          const matchingUsers = this.props.users.filter((user) => {\n            if (\n              user.name !== undefined &&\n              user.name.toLowerCase().indexOf(q.toLowerCase()) !== -1\n            ) {\n              return true;\n            } else if (user.id.toLowerCase().indexOf(q.toLowerCase()) !== -1) {\n              return true;\n            } else {\n              return false;\n            }\n          });\n          return matchingUsers.slice(0, 10);\n        },\n        component: UserItem,\n        output: (entity) => ({\n          key: entity.id,\n          text: `@${entity.name || entity.id}`,\n          caretPosition: 'next',\n        }),\n        callback: (item) => this.props.onSelectItem(item),\n      },\n      '/': {\n        dataProvider: (q, text) => {\n          if (text.indexOf('/') !== 0) {\n            return [];\n          }\n          const selectedCommands = this.props.commands.filter(\n            (c) => c.name.indexOf(q) !== -1,\n          );\n\n          // sort alphabetically unless the you're matching the first char\n          selectedCommands.sort((a, b) => {\n            let nameA = a.name.toLowerCase();\n            let nameB = b.name.toLowerCase();\n            if (nameA.indexOf(q) === 0) {\n              nameA = `0${nameA}`;\n            }\n            if (nameB.indexOf(q) === 0) {\n              nameB = `0${nameB}`;\n            }\n            if (nameA < nameB) {\n              return -1;\n            }\n            if (nameA > nameB) {\n              return 1;\n            }\n\n            return 0;\n          });\n\n          return selectedCommands.slice(0, 10);\n        },\n        component: CommandItem,\n        output: (entity) => ({\n          key: entity.id,\n          text: `/${entity.name}`,\n          caretPosition: 'next',\n        }),\n      },\n    };\n  }\n\n  emojiReplace(word) {\n    const found = emojiIndex.search(word) || [];\n    for (const emoji of found.slice(0, 10)) {\n      if (emoji.emoticons.includes(word)) {\n        return emoji.native;\n      }\n    }\n  }\n\n  render() {\n    const { innerRef } = this.props;\n    return (\n      <AutoCompleteTextarea\n        loadingComponent={LoadingIndicator}\n        trigger={this.getTriggers()}\n        replaceWord={this.emojiReplace}\n        minChar={0}\n        innerRef={\n          innerRef &&\n          ((ref) => {\n            innerRef.current = ref;\n          })\n        }\n        onFocus={this.props.onFocus}\n        rows={this.props.rows}\n        className=\"str-chat__textarea__textarea\"\n        containerClassName=\"str-chat__textarea\"\n        dropdownClassName=\"str-chat__emojisearch\"\n        listClassName=\"str-chat__emojisearch__list\"\n        itemClassName=\"str-chat__emojisearch__item\"\n        placeholder={this.props.placeholder}\n        onChange={this.props.onChange}\n        handleSubmit={this.props.handleSubmit}\n        onPaste={this.props.onPaste}\n        value={this.props.value}\n        grow={this.props.grow}\n        disabled={this.props.disabled}\n      />\n    );\n  }\n}\n","import React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\nimport { ChatAutoComplete } from './ChatAutoComplete';\nimport { formatArray } from '../utils';\n\nimport {\n  ImageDropzone,\n  ImagePreviewer,\n  FilePreviewer,\n  FileUploadButton,\n} from 'react-file-utils';\n\nimport { Picker } from 'emoji-mart';\n\n/**\n * MessageInputLarge - Large Message Input to be used for the MessageInput.\n * @example ./docs/MessageInputLarge.md\n */\nexport class MessageInputLarge extends PureComponent {\n  static propTypes = {\n    /** Set focus to the text input if this is enabled */\n    focus: PropTypes.bool.isRequired,\n    /** Grow the textarea while you're typing */\n    grow: PropTypes.bool.isRequired,\n    /** Make the textarea disabled */\n    disabled: PropTypes.bool,\n  };\n\n  renderUploads = () => (\n    <>\n      {this.props.imageOrder.length > 0 && (\n        <ImagePreviewer\n          imageUploads={this.props.imageOrder.map(\n            (id) => this.props.imageUploads[id],\n          )}\n          handleRemove={this.props.removeImage}\n          handleRetry={this.props.uploadImage}\n          handleFiles={this.props.uploadNewFiles}\n          multiple={this.props.multipleUploads}\n          disabled={\n            this.props.numberOfUploads >= this.props.maxNumberOfFiles\n              ? true\n              : false\n          }\n        />\n      )}\n      {this.props.fileOrder.length > 0 && (\n        <FilePreviewer\n          uploads={this.props.fileOrder.map((id) => this.props.fileUploads[id])}\n          handleRemove={this.props.removeFile}\n          handleRetry={this.props.uploadFile}\n          handleFiles={this.props.uploadNewFiles}\n        />\n      )}\n    </>\n  );\n\n  renderEmojiPicker = () => {\n    if (this.props.emojiPickerIsOpen) {\n      return (\n        <div\n          className=\"str-chat__input--emojipicker\"\n          ref={this.props.emojiPickerRef}\n        >\n          <Picker\n            emoji=\"point_up\"\n            title=\"Pick your emoji…\"\n            onSelect={this.props.onSelectEmoji}\n            color=\"#006CFF\"\n            showPreview={false}\n          />\n        </div>\n      );\n    }\n  };\n\n  render() {\n    return (\n      <div style={{ position: 'relative', zIndex: 100, width: '100%' }}>\n        <ImageDropzone\n          accept={this.props.acceptedFiles}\n          multiple={this.props.multipleUploads}\n          disabled={\n            this.props.numberOfUploads >= this.props.maxNumberOfFiles\n              ? true\n              : false\n          }\n          handleFiles={this.props.uploadNewFiles}\n        >\n          <div className=\"str-chat__input\">\n            {this.renderUploads()}\n            {this.renderEmojiPicker()}\n            <ChatAutoComplete\n              users={this.props.getUsers()}\n              commands={this.props.getCommands()}\n              innerRef={this.props.textareaRef}\n              handleSubmit={(e) => this.props.handleSubmit(e)}\n              onChange={this.props.handleChange}\n              onSelectItem={this.props.onSelectItem}\n              value={this.props.text}\n              rows={1}\n              placeholder=\"Type your message\"\n              onPaste={this.props.onPaste}\n              grow={this.props.grow}\n              disabled={this.props.disabled}\n            />\n\n            <span\n              className=\"str-chat__input-emojiselect\"\n              onClick={this.props.openEmojiPicker}\n            >\n              <svg width=\"14\" height=\"14\" xmlns=\"http://www.w3.org/2000/svg\">\n                <path\n                  d=\"M11.108 8.05a.496.496 0 0 1 .212.667C10.581 10.147 8.886 11 7 11c-1.933 0-3.673-.882-4.33-2.302a.497.497 0 0 1 .9-.417C4.068 9.357 5.446 10 7 10c1.519 0 2.869-.633 3.44-1.738a.495.495 0 0 1 .668-.212zm.792-1.826a.477.477 0 0 1-.119.692.541.541 0 0 1-.31.084.534.534 0 0 1-.428-.194c-.106-.138-.238-.306-.539-.306-.298 0-.431.168-.54.307A.534.534 0 0 1 9.538 7a.544.544 0 0 1-.31-.084.463.463 0 0 1-.117-.694c.33-.423.742-.722 1.394-.722.653 0 1.068.3 1.396.724zm-7 0a.477.477 0 0 1-.119.692.541.541 0 0 1-.31.084.534.534 0 0 1-.428-.194c-.106-.138-.238-.306-.539-.306-.299 0-.432.168-.54.307A.533.533 0 0 1 2.538 7a.544.544 0 0 1-.31-.084.463.463 0 0 1-.117-.694c.33-.423.742-.722 1.394-.722.653 0 1.068.3 1.396.724zM7 0a7 7 0 1 1 0 14A7 7 0 0 1 7 0zm4.243 11.243A5.96 5.96 0 0 0 13 7a5.96 5.96 0 0 0-1.757-4.243A5.96 5.96 0 0 0 7 1a5.96 5.96 0 0 0-4.243 1.757A5.96 5.96 0 0 0 1 7a5.96 5.96 0 0 0 1.757 4.243A5.96 5.96 0 0 0 7 13a5.96 5.96 0 0 0 4.243-1.757z\"\n                  fillRule=\"evenodd\"\n                />\n              </svg>\n            </span>\n\n            <FileUploadButton\n              multiple={this.props.multipleUploads}\n              disabled={\n                this.props.numberOfUploads >= this.props.maxNumberOfFiles\n                  ? true\n                  : false\n              }\n              accepts={this.props.acceptedFiles}\n              handleFiles={this.props.uploadNewFiles}\n            >\n              <span className=\"str-chat__input-fileupload\">\n                <svg width=\"14\" height=\"14\" xmlns=\"http://www.w3.org/2000/svg\">\n                  <path\n                    d=\"M7 .5c3.59 0 6.5 2.91 6.5 6.5s-2.91 6.5-6.5 6.5S.5 10.59.5 7 3.41.5 7 .5zm0 12c3.031 0 5.5-2.469 5.5-5.5S10.031 1.5 7 1.5A5.506 5.506 0 0 0 1.5 7c0 3.034 2.469 5.5 5.5 5.5zM7.506 3v3.494H11v1.05H7.506V11h-1.05V7.544H3v-1.05h3.456V3h1.05z\"\n                    fillRule=\"nonzero\"\n                  />\n                </svg>\n              </span>\n            </FileUploadButton>\n          </div>\n          <div>\n            <div className=\"str-chat__input-footer\">\n              <span\n                className={`str-chat__input-footer--count ${\n                  !this.props.watcher_count\n                    ? 'str-chat__input-footer--count--hidden'\n                    : ''\n                }`}\n              >\n                {this.props.watcher_count} online\n              </span>\n              <span className=\"str-chat__input-footer--typing\">\n                {formatArray(this.props.typing)}\n              </span>\n            </div>\n          </div>\n        </ImageDropzone>\n      </div>\n    );\n  }\n}\n","import React, { PureComponent } from 'react';\nimport { withChannelContext } from '../context';\nimport PropTypes from 'prop-types';\nimport { MessageInputLarge } from './MessageInputLarge';\nimport Immutable from 'seamless-immutable';\nimport { generateRandomId } from '../utils';\nimport uniq from 'lodash/uniq';\nimport {\n  dataTransferItemsHaveFiles,\n  dataTransferItemsToFiles,\n} from 'react-file-utils';\nimport { logChatPromiseExecution } from 'stream-chat';\n\n/**\n * MessageInput - Input a new message, support for all the rich features such as image uploads, @mentions, emoticons etc.\n * @example ./docs/MessageInput.md\n * @extends PureComponent\n */\nclass MessageInput extends PureComponent {\n  constructor(props) {\n    super(props);\n\n    const imageOrder = [];\n    const imageUploads = {};\n    const fileOrder = [];\n    const fileUploads = {};\n    const attachments = [];\n    const mentioned_users = [];\n    let text = '';\n    if (props.message) {\n      text = props.message.text;\n      for (const attach of props.message.attachments) {\n        if (attach.type === 'image') {\n          const id = generateRandomId();\n          imageOrder.push(id);\n          imageUploads[id] = {\n            id,\n            url: attach.image_url,\n            state: 'finished',\n            file: { name: attach.fallback },\n          };\n        } else if (attach.type === 'file') {\n          const id = generateRandomId();\n          fileOrder.push(id);\n          fileUploads[id] = {\n            id,\n            url: attach.asset_url,\n            state: 'finished',\n            file: {\n              name: attach.title,\n              type: attach.mime_type,\n              size: attach.file_size,\n            },\n          };\n        } else {\n          attachments.push(attach);\n        }\n      }\n      for (const mention of props.message.mentioned_users) {\n        mentioned_users.push(mention.id);\n      }\n    }\n\n    this.state = {\n      text,\n      attachments,\n      imageOrder,\n      imageUploads: Immutable(imageUploads),\n      fileOrder,\n      fileUploads: Immutable(fileUploads),\n      emojiPickerIsOpen: false,\n      filePanelIsOpen: false,\n      mentioned_users,\n      numberOfUploads: 0,\n    };\n\n    this.textareaRef = React.createRef();\n    this.emojiPickerRef = React.createRef();\n    this.panelRef = React.createRef();\n  }\n\n  static propTypes = {\n    /** Set focus to the text input if this is enabled */\n    focus: PropTypes.bool.isRequired,\n    /** Disable input */\n    disabled: PropTypes.bool.isRequired,\n    /** Grow the textarea while you're typing */\n    grow: PropTypes.bool.isRequired,\n    /** Via Context: the channel that we're sending the message to */\n    channel: PropTypes.object.isRequired,\n    /** Via Context: the users currently typing, passed from the Channel component */\n    typing: PropTypes.object.isRequired,\n\n    // /** Set textarea to be disabled */\n    // disabled: PropTypes.bool,\n\n    /** The parent message object when replying on a thread */\n    parent: PropTypes.object,\n\n    /** The component handling how the input is rendered */\n    Input: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n\n    /** Override image upload request */\n    doImageUploadRequest: PropTypes.func,\n\n    /** Override file upload request */\n    doFileUploadRequest: PropTypes.func,\n  };\n\n  static defaultProps = {\n    focus: false,\n    disabled: false,\n    grow: true,\n    Input: MessageInputLarge,\n  };\n\n  componentDidMount() {\n    if (this.props.focus) {\n      this.textareaRef.current.focus();\n    }\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('click', this.closeEmojiPicker, false);\n    document.removeEventListener('click', this.hideFilePanel, false);\n  }\n\n  openEmojiPicker = () => {\n    if (!this.state.showEmojiPicker) {\n      this.setState(\n        () => ({\n          emojiPickerIsOpen: true,\n        }),\n        () => {\n          document.addEventListener('click', this.closeEmojiPicker, false);\n        },\n      );\n    }\n  };\n\n  closeEmojiPicker = (e) => {\n    if (\n      this.emojiPickerRef.current &&\n      !this.emojiPickerRef.current.contains(e.target)\n    ) {\n      this.setState(\n        {\n          emojiPickerIsOpen: false,\n        },\n        () => {\n          document.removeEventListener('click', this.closeEmojiPicker, false);\n        },\n      );\n    }\n  };\n\n  onSelectEmoji = (emoji) => this.insertText(emoji.native);\n\n  insertText = async (textToInsert) => {\n    let newCursorPosition;\n\n    await this.setState((prevState) => {\n      const prevText = prevState.text;\n      const textareaElement = this.textareaRef.current;\n\n      if (!textareaElement) {\n        return { text: prevText + textToInsert };\n      }\n      // Insert emoji at previous cursor position\n      const { selectionStart, selectionEnd } = textareaElement;\n      newCursorPosition = selectionStart + textToInsert.length;\n      return {\n        text:\n          prevText.slice(0, selectionStart) +\n          textToInsert +\n          prevText.slice(selectionEnd),\n      };\n    });\n\n    const textareaElement = this.textareaRef.current;\n    if (!textareaElement || newCursorPosition == null) {\n      return;\n    }\n    // Update cursorPosition\n    textareaElement.selectionStart = newCursorPosition;\n    textareaElement.selectionEnd = newCursorPosition;\n  };\n\n  getCommands = () => {\n    const config = this.props.channel.getConfig();\n    const allCommands = config.commands;\n    return allCommands;\n  };\n\n  getUsers = () => {\n    const users = [];\n\n    const members = this.props.channel.state.members;\n    const watchers = this.props.channel.state.watchers;\n\n    if (members && Object.values(members).length) {\n      Object.values(members).forEach((member) => users.push(member.user));\n    }\n\n    if (watchers && Object.values(watchers).length) {\n      users.push(...Object.values(watchers));\n    }\n\n    // make sure we don't list users twice\n    const userMap = {};\n    for (const user of users) {\n      if (user !== undefined && !userMap[user.id]) {\n        userMap[user.id] = user;\n      }\n    }\n    const usersArray = Object.values(userMap);\n    return usersArray;\n  };\n\n  handleChange = (event) => {\n    event.preventDefault();\n    if (!event || !event.target) {\n      return '';\n    }\n\n    const text = event.target.value;\n    this.setState({ text });\n    if (text) {\n      logChatPromiseExecution(\n        this.props.channel.keystroke(),\n        'start typing event',\n      );\n    }\n  };\n\n  handleSubmit = (event) => {\n    event.preventDefault();\n    const editing = !!this.props.message;\n    const trimmedMessage = this.state.text.trim();\n    const isEmptyMessage =\n      trimmedMessage === '' ||\n      trimmedMessage === '>' ||\n      trimmedMessage === '``````' ||\n      trimmedMessage === '``' ||\n      trimmedMessage === '**' ||\n      trimmedMessage === '____' ||\n      trimmedMessage === '__' ||\n      trimmedMessage === '****';\n    const hasFiles =\n      this.state.imageOrder.length > 0 || this.state.fileOrder.length > 0;\n    if (isEmptyMessage && !hasFiles) {\n      return;\n    }\n    const text = this.state.text;\n    // the channel component handles the actual sending of the message\n    const attachments = [...this.state.attachments];\n    for (const id of this.state.imageOrder) {\n      const image = this.state.imageUploads[id];\n      if (!image || image.state === 'failed') {\n        continue;\n      }\n      if (image.state === 'uploading') {\n        // TODO: show error to user that they should wait until image is uploaded\n        return;\n      }\n      attachments.push({\n        type: 'image',\n        image_url: image.url,\n        fallback: image.file.name,\n      });\n    }\n    for (const id of this.state.fileOrder) {\n      const upload = this.state.fileUploads[id];\n      if (!upload || upload.state === 'failed') {\n        continue;\n      }\n      if (upload.state === 'uploading') {\n        // TODO: show error to user that they should wait until image is uploaded\n        return;\n      }\n      attachments.push({\n        type: 'file',\n        asset_url: upload.url,\n        title: upload.file.name,\n        mime_type: upload.file.type,\n        file_size: upload.file.size,\n      });\n    }\n\n    if (editing) {\n      const { id } = this.props.message;\n      const updatedMessage = { id };\n      updatedMessage.text = text;\n      updatedMessage.attachments = attachments;\n      updatedMessage.mentioned_users = this.state.mentioned_users;\n      // TODO: Remove this line and show an error when submit fails\n      this.props.clearEditingState();\n\n      const updateMessagePromise = this.props.client\n        .updateMessage(updatedMessage)\n        .then(() => {\n          this.props.clearEditingState();\n        });\n      logChatPromiseExecution(updateMessagePromise, 'update message');\n    } else {\n      const sendMessagePromise = this.props.sendMessage({\n        text,\n        attachments,\n        mentioned_users: uniq(this.state.mentioned_users),\n        parent: this.props.parent,\n      });\n      logChatPromiseExecution(sendMessagePromise, 'send message');\n      this.setState({\n        text: '',\n        mentioned_users: [],\n        imageUploads: Immutable({}),\n        imageOrder: [],\n        fileUploads: Immutable({}),\n        fileOrder: [],\n      });\n    }\n\n    logChatPromiseExecution(this.props.channel.stopTyping(), 'stop typing');\n  };\n\n  _uploadNewFiles = (files) => {\n    for (const file of files) {\n      if (file.type.startsWith('image/')) {\n        this._uploadNewImage(file);\n      } else if (file instanceof File && !this.props.noFiles) {\n        this._uploadNewFile(file);\n      } else {\n        return;\n      }\n    }\n  };\n\n  _uploadNewImage = async (file) => {\n    const id = generateRandomId();\n\n    await this.setState((prevState) => ({\n      numberOfUploads: prevState.numberOfUploads + 1,\n      imageOrder: prevState.imageOrder.concat(id),\n      imageUploads: prevState.imageUploads.setIn([id], {\n        id,\n        file,\n        state: 'uploading',\n      }),\n    }));\n    if (FileReader) {\n      // TODO: Possibly use URL.createObjectURL instead. However, then we need\n      // to release the previews when not used anymore though.\n      const reader = new FileReader();\n      reader.onload = (event) => {\n        this.setState((prevState) => ({\n          imageUploads: prevState.imageUploads.setIn(\n            [id, 'previewUri'],\n            event.target.result,\n          ),\n        }));\n      };\n      reader.readAsDataURL(file);\n    }\n    return this._uploadImage(id);\n  };\n\n  _uploadNewFile = async (file) => {\n    const id = generateRandomId();\n\n    await this.setState((prevState) => ({\n      numberOfUploads: prevState.numberOfUploads + 1,\n      fileOrder: prevState.fileOrder.concat(id),\n      fileUploads: prevState.fileUploads.setIn([id], {\n        id,\n        file,\n        state: 'uploading',\n      }),\n    }));\n\n    return this._uploadFile(id);\n  };\n\n  _uploadImage = async (id) => {\n    const img = this.state.imageUploads[id];\n    if (!img) {\n      return;\n    }\n    const { file } = img;\n\n    await this.setState((prevState) => ({\n      imageUploads: prevState.imageUploads.setIn([id, 'state'], 'uploading'),\n    }));\n\n    let response = {};\n    response = {};\n    try {\n      if (this.props.doImageUploadRequest) {\n        response = await this.props.doImageUploadRequest(\n          file,\n          this.props.channel,\n        );\n      } else {\n        response = await this.props.channel.sendImage(file);\n      }\n    } catch (e) {\n      console.warn(e);\n      let alreadyRemoved = false;\n      await this.setState((prevState) => {\n        const image = prevState.imageUploads[id];\n        if (!image) {\n          alreadyRemoved = true;\n          return {\n            numberOfUploads: prevState.numberOfUploads - 1,\n          };\n        }\n        return {\n          imageUploads: prevState.imageUploads.setIn([id, 'state'], 'failed'),\n          numberOfUploads: prevState.numberOfUploads - 1,\n        };\n      });\n\n      if (!alreadyRemoved) {\n        this.props.errorHandler(e, 'upload-image', {\n          feedGroup: this.props.feedGroup,\n          userId: this.props.userId,\n        });\n      }\n      return;\n    }\n    this.setState((prevState) => ({\n      imageUploads: prevState.imageUploads\n        .setIn([id, 'state'], 'finished')\n        .setIn([id, 'url'], response.file),\n    }));\n  };\n\n  _uploadFile = async (id) => {\n    const upload = this.state.fileUploads[id];\n    if (!upload) {\n      return;\n    }\n    const { file } = upload;\n    await this.setState((prevState) => ({\n      imageUploads: prevState.imageUploads.setIn([id, 'state'], 'uploading'),\n    }));\n\n    let response = {};\n    response = {};\n    try {\n      if (this.props.doFileUploadRequest) {\n        response = await this.props.doFileUploadRequest(\n          file,\n          this.props.channel,\n        );\n      } else {\n        response = await this.props.channel.sendFile(file);\n      }\n    } catch (e) {\n      console.warn(e);\n      let alreadyRemoved = false;\n      await this.setState((prevState) => {\n        const image = prevState.imageUploads[id];\n        if (!image) {\n          alreadyRemoved = true;\n          return {\n            numberOfUploads: prevState.numberOfUploads - 1,\n          };\n        }\n        return {\n          numberOfUploads: prevState.numberOfUploads - 1,\n          fileUploads: prevState.fileUploads.setIn([id, 'state'], 'failed'),\n        };\n      });\n      if (!alreadyRemoved) {\n        this.props.errorHandler(e, 'upload-file', {\n          feedGroup: this.props.feedGroup,\n          userId: this.props.userId,\n        });\n      }\n    }\n    this.setState((prevState) => ({\n      fileUploads: prevState.fileUploads\n        .setIn([id, 'state'], 'finished')\n        .setIn([id, 'url'], response.file),\n    }));\n  };\n\n  _removeImage = (id) => {\n    // TODO: cancel upload if still uploading\n    this.setState((prevState) => {\n      const img = prevState.imageUploads[id];\n      if (!img) {\n        return {};\n      }\n      return {\n        numberOfUploads: prevState.numberOfUploads - 1,\n        imageUploads: prevState.imageUploads.set(id, undefined), // remove\n        imageOrder: prevState.imageOrder.filter((_id) => id !== _id),\n      };\n    });\n  };\n\n  _removeFile = (id) => {\n    // TODO: cancel upload if still uploading\n    this.setState((prevState) => {\n      const upload = prevState.fileUploads[id];\n      if (!upload) {\n        return {};\n      }\n      return {\n        numberOfUploads: prevState.numberOfUploads - 1,\n        fileUploads: prevState.fileUploads.set(id, undefined), // remove\n        fileOrder: prevState.fileOrder.filter((_id) => id !== _id),\n      };\n    });\n  };\n\n  _onPaste = async (event) => {\n    // TODO: Move this handler to package with ImageDropzone\n    const { items } = event.clipboardData;\n    if (!dataTransferItemsHaveFiles(items)) {\n      return;\n    }\n\n    event.preventDefault();\n    // Get a promise for the plain text in case no files are\n    // found. This needs to be done here because chrome cleans\n    // up the DataTransferItems after resolving of a promise.\n    let plainTextPromise;\n    for (const item of items) {\n      if (item.kind === 'string' && item.type === 'text/plain') {\n        plainTextPromise = new Promise((resolve) => {\n          item.getAsString((s) => {\n            resolve(s);\n          });\n        });\n        break;\n      }\n    }\n\n    const fileLikes = await dataTransferItemsToFiles(items);\n    if (fileLikes.length) {\n      this._uploadNewFiles(fileLikes);\n      return;\n    }\n    // fallback to regular text paste\n    if (plainTextPromise) {\n      const s = await plainTextPromise;\n      this.insertText(s);\n    }\n  };\n\n  _onSelectItem = (item) => {\n    this.setState((prevState) => ({\n      mentioned_users: [...prevState.mentioned_users, item.id],\n    }));\n  };\n\n  render() {\n    const { Input } = this.props;\n    const handlers = {\n      uploadNewFiles: this._uploadNewFiles,\n      removeImage: this._removeImage,\n      uploadImage: this._uploadImage,\n      removeFile: this._removeFile,\n      uploadFile: this._uploadFile,\n      emojiPickerRef: this.emojiPickerRef,\n      panelRef: this.panelRef,\n      textareaRef: this.textareaRef,\n      onSelectEmoji: this.onSelectEmoji,\n      getUsers: this.getUsers,\n      getCommands: this.getCommands,\n      handleSubmit: this.handleSubmit,\n      handleChange: this.handleChange,\n      onPaste: this._onPaste,\n      onSelectItem: this._onSelectItem,\n      openEmojiPicker: this.openEmojiPicker,\n    };\n    return <Input {...this.props} {...this.state} {...handlers} />;\n  }\n}\n\nMessageInput = withChannelContext(MessageInput);\nexport { MessageInput };\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { ChatAutoComplete } from './ChatAutoComplete';\nimport { Picker } from 'emoji-mart';\nimport {\n  ImageDropzone,\n  ImagePreviewer,\n  FilePreviewer,\n  FileUploadButton,\n} from 'react-file-utils';\n\n/**\n * @example ./docs/EditMessageForm.md\n */\nexport class EditMessageForm extends React.Component {\n  static propTypes = {\n    /** Set focus to the text input if this is enabled */\n    focus: PropTypes.bool,\n    /** Grow the textarea while you're typing */\n    grow: PropTypes.bool,\n    /** Disable the textarea */\n    disabled: PropTypes.bool,\n  };\n\n  static defaultProps = {\n    grow: true,\n    focus: false,\n    disabled: false,\n  };\n\n  renderUploads = () => (\n    <>\n      {this.props.imageOrder.length > 0 && (\n        <ImagePreviewer\n          imageUploads={this.props.imageOrder.map(\n            (id) => this.props.imageUploads[id],\n          )}\n          handleRemove={this.props.removeImage}\n          handleRetry={this.props.uploadImage}\n          handleFiles={this.props.uploadNewFiles}\n          multiple={this.props.multipleUploads}\n          disabled={\n            this.props.numberOfUploads >= this.props.maxNumberOfFiles\n              ? true\n              : false\n          }\n        />\n      )}\n      {this.props.fileOrder.length > 0 && (\n        <FilePreviewer\n          uploads={this.props.fileOrder.map((id) => this.props.fileUploads[id])}\n          handleRemove={this.props.removeFile}\n          handleRetry={this.props.uploadFile}\n          handleFiles={this.props.uploadNewFiles}\n        />\n      )}\n    </>\n  );\n\n  renderEmojiPicker = () => {\n    if (this.props.emojiPickerIsOpen) {\n      return (\n        <div\n          className=\"str-chat__small-message-input-emojipicker\"\n          ref={this.props.emojiPickerRef}\n        >\n          <Picker\n            emoji=\"point_up\"\n            title=\"Pick your emoji…\"\n            onSelect={this.props.onSelectEmoji}\n            color=\"#006CFF\"\n            showPreview={false}\n          />\n        </div>\n      );\n    }\n  };\n\n  render() {\n    return (\n      <div className=\"str-chat__edit-message-form\">\n        <ImageDropzone\n          accept={this.props.acceptedFiles}\n          multiple={this.props.multipleUploads}\n          disabled={\n            this.props.numberOfUploads >= this.props.maxNumberOfFiles\n              ? true\n              : false\n          }\n          handleFiles={this.props.uploadNewFiles}\n        >\n          <form onSubmit={this.props.handleSubmit}>\n            {this.renderEmojiPicker()}\n            {this.renderUploads()}\n            {this.props.emojiPickerIsOpen && (\n              <div\n                className=\"str-chat__input--emojipicker\"\n                ref={this.props.emojiPickerRef}\n              >\n                <Picker\n                  emoji=\"point_up\"\n                  title=\"Pick your emoji…\"\n                  onSelect={this.props.onSelectEmoji}\n                  color=\"#006CFF\"\n                />\n              </div>\n            )}\n            <ChatAutoComplete\n              users={this.props.getUsers()}\n              commands={this.props.getCommands()}\n              innerRef={this.props.textareaRef}\n              handleSubmit={this.props.handleSubmit}\n              onChange={this.props.handleChange}\n              onSelectItem={this.props.onSelectItem}\n              value={this.props.text}\n              rows={1}\n              onPaste={this.props.onPaste}\n              grow={this.props.grow}\n            />\n            <div className=\"str-chat__message-team-form-footer\">\n              <div className=\"str-chat__edit-message-form-options\">\n                <span\n                  className=\"str-chat__input-emojiselect\"\n                  onClick={this.props.openEmojiPicker}\n                >\n                  <svg\n                    width=\"14\"\n                    height=\"14\"\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                  >\n                    <path\n                      d=\"M11.108 8.05a.496.496 0 0 1 .212.667C10.581 10.147 8.886 11 7 11c-1.933 0-3.673-.882-4.33-2.302a.497.497 0 0 1 .9-.417C4.068 9.357 5.446 10 7 10c1.519 0 2.869-.633 3.44-1.738a.495.495 0 0 1 .668-.212zm.792-1.826a.477.477 0 0 1-.119.692.541.541 0 0 1-.31.084.534.534 0 0 1-.428-.194c-.106-.138-.238-.306-.539-.306-.298 0-.431.168-.54.307A.534.534 0 0 1 9.538 7a.544.544 0 0 1-.31-.084.463.463 0 0 1-.117-.694c.33-.423.742-.722 1.394-.722.653 0 1.068.3 1.396.724zm-7 0a.477.477 0 0 1-.119.692.541.541 0 0 1-.31.084.534.534 0 0 1-.428-.194c-.106-.138-.238-.306-.539-.306-.299 0-.432.168-.54.307A.533.533 0 0 1 2.538 7a.544.544 0 0 1-.31-.084.463.463 0 0 1-.117-.694c.33-.423.742-.722 1.394-.722.653 0 1.068.3 1.396.724zM7 0a7 7 0 1 1 0 14A7 7 0 0 1 7 0zm4.243 11.243A5.96 5.96 0 0 0 13 7a5.96 5.96 0 0 0-1.757-4.243A5.96 5.96 0 0 0 7 1a5.96 5.96 0 0 0-4.243 1.757A5.96 5.96 0 0 0 1 7a5.96 5.96 0 0 0 1.757 4.243A5.96 5.96 0 0 0 7 13a5.96 5.96 0 0 0 4.243-1.757z\"\n                      fillRule=\"evenodd\"\n                    />\n                  </svg>\n                </span>\n                <FileUploadButton\n                  multiple={this.props.multipleUploads}\n                  disabled={\n                    this.props.numberOfUploads >= this.props.maxNumberOfFiles\n                      ? true\n                      : false\n                  }\n                  accepts={this.props.acceptedFiles}\n                  handleFiles={this.props.uploadNewFiles}\n                >\n                  <span className=\"str-chat__input-fileupload\">\n                    <svg\n                      width=\"14\"\n                      height=\"14\"\n                      xmlns=\"http://www.w3.org/2000/svg\"\n                    >\n                      <path\n                        d=\"M7 .5c3.59 0 6.5 2.91 6.5 6.5s-2.91 6.5-6.5 6.5S.5 10.59.5 7 3.41.5 7 .5zm0 12c3.031 0 5.5-2.469 5.5-5.5S10.031 1.5 7 1.5A5.506 5.506 0 0 0 1.5 7c0 3.034 2.469 5.5 5.5 5.5zM7.506 3v3.494H11v1.05H7.506V11h-1.05V7.544H3v-1.05h3.456V3h1.05z\"\n                        fillRule=\"nonzero\"\n                      />\n                    </svg>\n                  </span>\n                </FileUploadButton>\n              </div>\n              <div>\n                <button onClick={this.props.clearEditingState}>Cancel</button>\n                <button type=\"submit\">Send</button>\n              </div>\n            </div>\n          </form>\n        </ImageDropzone>\n      </div>\n    );\n  }\n}\n","import React, { PureComponent } from 'react';\nimport { Attachment } from './Attachment';\nimport { MessageActionsBox } from './MessageActionsBox';\nimport { ReactionsList } from './ReactionsList';\nimport { Avatar } from './Avatar';\nimport { Tooltip } from './Tooltip';\nimport { LoadingIndicator } from './LoadingIndicator';\nimport { Gallery } from './Gallery';\nimport { ReactionSelector } from './ReactionSelector';\nimport { MessageRepliesCountButton } from './MessageRepliesCountButton';\nimport { Modal } from './Modal';\nimport { MessageInput } from './MessageInput';\nimport { EditMessageForm } from './EditMessageForm';\n\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\n\nimport { isOnlyEmojis, renderText } from '../utils';\n\n/**\n * MessageSimple - Render component, should be used together with the Message component\n *\n * @example ./docs/MessageSimple.md\n * @extends PureComponent\n */\nexport class MessageSimple extends PureComponent {\n  static propTypes = {\n    /** The message object */\n    message: PropTypes.object,\n    /** The attachment component */\n    Attachment: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n    /** The message component, most logic is delegated to this component */\n    Message: PropTypes.oneOfType([\n      PropTypes.node,\n      PropTypes.func,\n      PropTypes.object,\n    ]).isRequired,\n    /** render HTML instead of markdown. Posting HTML is only allowed server-side */\n    unsafeHTML: PropTypes.bool,\n  };\n\n  static defaultProps = {\n    Attachment,\n  };\n\n  state = {\n    isFocused: false,\n    actionsBoxOpen: false,\n    showDetailedReactions: false,\n  };\n\n  messageActionsRef = React.createRef();\n  reactionSelectorRef = React.createRef();\n\n  _onClickOptionsAction = () => {\n    this.setState(\n      {\n        actionsBoxOpen: true,\n      },\n      () => document.addEventListener('click', this.hideOptions, false),\n    );\n  };\n\n  _hideOptions = () => {\n    this.setState({\n      actionsBoxOpen: false,\n    });\n    document.removeEventListener('click', this.hideOptions, false);\n  };\n\n  _clickReactionList = () => {\n    this.setState(\n      () => ({\n        showDetailedReactions: true,\n      }),\n      () => {\n        document.addEventListener('click', this._closeDetailedReactions);\n        document.addEventListener('touchend', this._closeDetailedReactions);\n      },\n    );\n  };\n\n  _closeDetailedReactions = (e) => {\n    if (\n      !this.reactionSelectorRef.current.reactionSelector.current.contains(\n        e.target,\n      )\n    ) {\n      this.setState(\n        () => ({\n          showDetailedReactions: false,\n        }),\n        () => {\n          document.removeEventListener('click', this._closeDetailedReactions);\n          document.removeEventListener(\n            'touchend',\n            this._closeDetailedReactions,\n          );\n        },\n      );\n    } else {\n      return {};\n    }\n  };\n\n  componentWillUnmount() {\n    if (!this.props.message.deleted_at) {\n      document.removeEventListener('click', this._closeDetailedReactions);\n      document.removeEventListener('touchend', this._closeDetailedReactions);\n    }\n  }\n\n  isMine() {\n    return this.props.Message.isMyMessage(this.props.message);\n  }\n\n  formatArray = (arr) => {\n    let outStr = '';\n    const slicedArr = arr\n      .filter((item) => item.id !== this.props.client.user.id)\n      .map((item) => item.name || item.id)\n      .slice(0, 5);\n    const restLength = arr.length - slicedArr.length;\n    const lastStr = restLength > 0 ? ' and ' + restLength + ' more' : '';\n\n    if (slicedArr.length === 1) {\n      outStr = slicedArr[0] + ' ';\n    } else if (slicedArr.length === 2) {\n      //joins all with \"and\" but =no commas\n      //example: \"bob and sam\"\n      outStr = slicedArr.join(' and ') + ' ';\n    } else if (slicedArr.length > 2) {\n      //joins all with commas, but last one gets \", and\" (oxford comma!)\n      //example: \"bob, joe, and sam\"\n      outStr = slicedArr.join(', ') + lastStr;\n    }\n\n    return outStr;\n  };\n\n  renderStatus = () => {\n    const message = this.props;\n    if (!this.isMine() || this.props.message.type === 'error') {\n      return null;\n    }\n    const justReadByMe =\n      message.readBy.length === 1 &&\n      message.readBy[0].id === this.props.client.user.id;\n    if (this.props.message.status === 'sending') {\n      return (\n        <span className=\"str-chat__message-simple-status\">\n          <Tooltip>Sending...</Tooltip>\n          <LoadingIndicator />\n        </span>\n      );\n    } else if (\n      message.readBy.length !== 0 &&\n      !this.props.threadList &&\n      !justReadByMe\n    ) {\n      const lastReadUser = this.props.readBy.filter(\n        (item) => item.id !== this.props.client.user.id,\n      )[0];\n      return (\n        <span className=\"str-chat__message-simple-status\">\n          <Tooltip>{this.formatArray(message.readBy)}</Tooltip>\n          <Avatar\n            name={lastReadUser.name || lastReadUser.id}\n            image={lastReadUser.image}\n            size={15}\n          />\n          {message.readBy.length - 1 > 1 && (\n            <span className=\"str-chat__message-simple-status-number\">\n              {message.readBy.length - 1}\n            </span>\n          )}\n        </span>\n      );\n    } else if (\n      this.props.message.status === 'received' &&\n      this.props.message.id === this.props.lastReceivedId &&\n      !this.props.threadList\n    ) {\n      return (\n        <span className=\"str-chat__message-simple-status\">\n          <Tooltip>Delivered</Tooltip>\n          <svg width=\"16\" height=\"16\" xmlns=\"http://www.w3.org/2000/svg\">\n            <path\n              d=\"M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0zm3.72 6.633a.955.955 0 1 0-1.352-1.352L6.986 8.663 5.633 7.31A.956.956 0 1 0 4.28 8.663l2.029 2.028a.956.956 0 0 0 1.353 0l4.058-4.058z\"\n              fill=\"#006CFF\"\n              fillRule=\"evenodd\"\n            />\n          </svg>\n        </span>\n      );\n    } else {\n      return null;\n    }\n  };\n\n  renderMessageActions = () => {\n    const { Message } = this.props;\n    const messageActions = Message.getMessageActions();\n\n    if (messageActions.length === 0) {\n      return;\n    }\n\n    return (\n      <div\n        onClick={this._onClickOptionsAction}\n        className=\"str-chat__message-simple__actions__action str-chat__message-simple__actions__action--options\"\n      >\n        <MessageActionsBox\n          Message={this.props.Message}\n          open={this.state.actionsBoxOpen}\n          messageListRect={this.props.messageListRect}\n          mine={this.isMine()}\n        />\n        <svg\n          width=\"11\"\n          height=\"4\"\n          viewBox=\"0 0 11 4\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n        >\n          <path\n            d=\"M1.5 3a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm4 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm4 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z\"\n            fillRule=\"nonzero\"\n          />\n        </svg>\n      </div>\n    );\n  };\n  renderOptions() {\n    if (\n      this.props.message.type === 'error' ||\n      this.props.message.type === 'system' ||\n      this.props.message.type === 'ephemeral' ||\n      this.props.message.status === 'failed' ||\n      this.props.message.status === 'sending' ||\n      this.props.initialMessage\n    ) {\n      return;\n    }\n    if (this.isMine()) {\n      return (\n        <div className=\"str-chat__message-simple__actions\">\n          {this.renderMessageActions()}\n          {!this.props.threadList && this.props.channelConfig.replies && (\n            <div\n              onClick={this.props.openThread}\n              className=\"str-chat__message-simple__actions__action str-chat__message-simple__actions__action--thread\"\n            >\n              <svg width=\"14\" height=\"10\" xmlns=\"http://www.w3.org/2000/svg\">\n                <path\n                  d=\"M8.516 3c4.78 0 4.972 6.5 4.972 6.5-1.6-2.906-2.847-3.184-4.972-3.184v2.872L3.772 4.994 8.516.5V3zM.484 5l4.5-4.237v1.78L2.416 5l2.568 2.125v1.828L.484 5z\"\n                  fillRule=\"evenodd\"\n                />\n              </svg>\n            </div>\n          )}\n          {this.props.channelConfig.reactions && (\n            <div\n              className=\"str-chat__message-simple__actions__action str-chat__message-simple__actions__action--reactions\"\n              onClick={this._clickReactionList}\n            >\n              <svg\n                width=\"16\"\n                height=\"14\"\n                viewBox=\"0 0 16 14\"\n                xmlns=\"http://www.w3.org/2000/svg\"\n              >\n                <path\n                  d=\"M11.108 8.05a.496.496 0 0 1 .212.667C10.581 10.147 8.886 11 7 11c-1.933 0-3.673-.882-4.33-2.302a.497.497 0 0 1 .9-.417C4.068 9.357 5.446 10 7 10c1.519 0 2.869-.633 3.44-1.738a.495.495 0 0 1 .668-.212zm.792-1.826a.477.477 0 0 1-.119.692.541.541 0 0 1-.31.084.534.534 0 0 1-.428-.194c-.106-.138-.238-.306-.539-.306-.298 0-.431.168-.54.307A.534.534 0 0 1 9.538 7a.544.544 0 0 1-.31-.084.463.463 0 0 1-.117-.694c.33-.423.742-.722 1.394-.722.653 0 1.068.3 1.396.724zm-7 0a.477.477 0 0 1-.119.692.541.541 0 0 1-.31.084.534.534 0 0 1-.428-.194c-.106-.138-.238-.306-.539-.306-.299 0-.432.168-.54.307A.533.533 0 0 1 2.538 7a.544.544 0 0 1-.31-.084.463.463 0 0 1-.117-.694c.33-.423.742-.722 1.394-.722.653 0 1.068.3 1.396.724zM7 0a7 7 0 1 1 0 14A7 7 0 0 1 7 0zm4.243 11.243A5.96 5.96 0 0 0 13 7a5.96 5.96 0 0 0-1.757-4.243A5.96 5.96 0 0 0 7 1a5.96 5.96 0 0 0-4.243 1.757A5.96 5.96 0 0 0 1 7a5.96 5.96 0 0 0 1.757 4.243A5.96 5.96 0 0 0 7 13a5.96 5.96 0 0 0 4.243-1.757z\"\n                  fillRule=\"evenodd\"\n                />\n              </svg>\n            </div>\n          )}\n        </div>\n      );\n    } else {\n      return (\n        <div className=\"str-chat__message-simple__actions\">\n          {this.props.channelConfig.reactions && (\n            <div\n              className=\"str-chat__message-simple__actions__action str-chat__message-simple__actions__action--reactions\"\n              onClick={this._clickReactionList}\n            >\n              <svg width=\"14\" height=\"14\" xmlns=\"http://www.w3.org/2000/svg\">\n                <path\n                  d=\"M11.108 8.05a.496.496 0 0 1 .212.667C10.581 10.147 8.886 11 7 11c-1.933 0-3.673-.882-4.33-2.302a.497.497 0 0 1 .9-.417C4.068 9.357 5.446 10 7 10c1.519 0 2.869-.633 3.44-1.738a.495.495 0 0 1 .668-.212zm.792-1.826a.477.477 0 0 1-.119.692.541.541 0 0 1-.31.084.534.534 0 0 1-.428-.194c-.106-.138-.238-.306-.539-.306-.298 0-.431.168-.54.307A.534.534 0 0 1 9.538 7a.544.544 0 0 1-.31-.084.463.463 0 0 1-.117-.694c.33-.423.742-.722 1.394-.722.653 0 1.068.3 1.396.724zm-7 0a.477.477 0 0 1-.119.692.541.541 0 0 1-.31.084.534.534 0 0 1-.428-.194c-.106-.138-.238-.306-.539-.306-.299 0-.432.168-.54.307A.533.533 0 0 1 2.538 7a.544.544 0 0 1-.31-.084.463.463 0 0 1-.117-.694c.33-.423.742-.722 1.394-.722.653 0 1.068.3 1.396.724zM7 0a7 7 0 1 1 0 14A7 7 0 0 1 7 0zm4.243 11.243A5.96 5.96 0 0 0 13 7a5.96 5.96 0 0 0-1.757-4.243A5.96 5.96 0 0 0 7 1a5.96 5.96 0 0 0-4.243 1.757A5.96 5.96 0 0 0 1 7a5.96 5.96 0 0 0 1.757 4.243A5.96 5.96 0 0 0 7 13a5.96 5.96 0 0 0 4.243-1.757z\"\n                  fillRule=\"evenodd\"\n                />\n              </svg>\n            </div>\n          )}\n          {!this.props.threadList && this.props.channelConfig.replies && (\n            <div\n              onClick={this.props.openThread}\n              className=\"str-chat__message-simple__actions__action str-chat__message-simple__actions__action--thread\"\n            >\n              <svg width=\"14\" height=\"10\" xmlns=\"http://www.w3.org/2000/svg\">\n                <path\n                  d=\"M8.516 3c4.78 0 4.972 6.5 4.972 6.5-1.6-2.906-2.847-3.184-4.972-3.184v2.872L3.772 4.994 8.516.5V3zM.484 5l4.5-4.237v1.78L2.416 5l2.568 2.125v1.828L.484 5z\"\n                  fillRule=\"evenodd\"\n                />\n              </svg>\n            </div>\n          )}\n          {this.renderMessageActions()}\n        </div>\n      );\n    }\n  }\n\n  render() {\n    const { message } = this.props;\n    const Attachment = this.props.Attachment;\n    const when = moment(message.created_at).calendar();\n\n    const messageClasses = this.isMine()\n      ? 'str-chat__message str-chat__message--me str-chat__message-simple str-chat__message-simple--me'\n      : 'str-chat__message str-chat__message-simple';\n\n    const hasAttachment = Boolean(\n      message && message.attachments && message.attachments.length,\n    );\n    const images =\n      hasAttachment &&\n      message.attachments.filter((item) => item.type === 'image');\n    const hasReactions = Boolean(\n      message.latest_reactions && message.latest_reactions.length,\n    );\n\n    if (message.type === 'message.read' || message.type === 'message.date') {\n      return null;\n    }\n\n    if (message.deleted_at) {\n      return (\n        <React.Fragment>\n          <div\n            key={message.id}\n            className={`${messageClasses} str-chat__message--deleted ${message.type} `}\n          >\n            <div className=\"str-chat__message--deleted-inner\">\n              This message was deleted...\n            </div>\n          </div>\n        </React.Fragment>\n      );\n    }\n\n    return (\n      <React.Fragment>\n        {this.props.editing && (\n          <Modal\n            open={this.props.editing}\n            onClose={this.props.clearEditingState}\n          >\n            <MessageInput\n              Input={EditMessageForm}\n              message={this.props.message}\n              clearEditingState={this.props.clearEditingState}\n              updateMessage={this.props.updateMessage}\n            />\n          </Modal>\n        )}\n        <div\n          key={message.id}\n          className={`\n\t\t\t\t\t\t${messageClasses}\n\t\t\t\t\t\tstr-chat__message--${message.type}\n\t\t\t\t\t\tstr-chat__message--${message.status}\n\t\t\t\t\t\t${message.text ? 'str-chat__message--has-text' : 'has-no-text'}\n\t\t\t\t\t\t${hasAttachment ? 'str-chat__message--has-attachment' : ''}\n\t\t\t\t\t\t${hasReactions ? 'str-chat__message--with-reactions' : ''}\n\t\t\t\t\t`.trim()}\n          onMouseLeave={this._hideOptions}\n          ref={this.messageRef}\n        >\n          {this.renderStatus()}\n\n          <Avatar\n            image={message.user.image}\n            name={message.user.name || message.user.id}\n          />\n          <div\n            className=\"str-chat__message-inner\"\n            onClick={\n              message.status === 'failed'\n                ? this.props.retrySendMessage.bind(this, message)\n                : null\n            }\n          >\n            {!message.text && (\n              <React.Fragment>\n                {this.renderOptions()}\n                {/* if reactions show them */}\n                {hasReactions > 0 && !this.state.showDetailedReactions && (\n                  <ReactionsList\n                    reactions={message.latest_reactions}\n                    reaction_counts={message.reaction_counts}\n                    onClick={this._clickReactionList}\n                    reverse={true}\n                  />\n                )}\n                {this.state.showDetailedReactions && (\n                  <ReactionSelector\n                    mine={this.isMine()}\n                    handleReaction={this.props.handleReaction}\n                    actionsEnabled={this.props.actionsEnabled}\n                    detailedView\n                    reaction_counts={message.reaction_counts}\n                    latest_reactions={message.latest_reactions}\n                    messageList={this.props.messageListRect}\n                    ref={this.reactionSelectorRef}\n                  />\n                )}\n              </React.Fragment>\n            )}\n\n            <div className=\"str-chat__message-attachment-container\">\n              {hasAttachment &&\n                message.attachments.map((attachment, index) => {\n                  if (attachment.type === 'image' && images.length > 1)\n                    return null;\n\n                  return (\n                    <Attachment\n                      key={`${message.id}-${index}`}\n                      attachment={attachment}\n                      actionHandler={this.props.handleAction}\n                    />\n                  );\n                })}\n            </div>\n            {images.length > 1 && <Gallery images={images} />}\n\n            {message.text && (\n              <div className=\"str-chat__message-text\">\n                <div\n                  className={`\n\t\t\t\t\t\t\t\t\tstr-chat__message-text-inner str-chat__message-simple-text-inner\n\t\t\t\t\t\t\t\t\t${this.state.isFocused ? 'str-chat__message-text-inner--focused' : ''}\n\t\t\t\t\t\t\t\t\t${hasAttachment ? 'str-chat__message-text-inner--has-attachment' : ''}\n\t\t\t\t\t\t\t\t\t${\n                    isOnlyEmojis(message.text)\n                      ? 'str-chat__message-simple-text-inner--is-emoji'\n                      : ''\n                  }\n                `.trim()}\n                  onMouseOver={this.props.onMentionsHoverMessage}\n                  onClick={this.props.onMentionsClickMessage}\n                >\n                  {message.type === 'error' && (\n                    <div className=\"str-chat__simple-message--error-message\">\n                      Error · Unsent\n                    </div>\n                  )}\n                  {message.status === 'failed' && (\n                    <div className=\"str-chat__simple-message--error-message\">\n                      Message Failed · Click to try again\n                    </div>\n                  )}\n\n                  {this.props.unsafeHTML ? (\n                    <div dangerouslySetInnerHTML={{ __html: message.html }} />\n                  ) : (\n                    renderText(message)\n                  )}\n\n                  {/* if reactions show them */}\n                  {hasReactions > 0 && !this.state.showDetailedReactions && (\n                    <ReactionsList\n                      reactions={message.latest_reactions}\n                      reaction_counts={message.reaction_counts}\n                      onClick={this._clickReactionList}\n                      reverse={true}\n                    />\n                  )}\n                  {this.state.showDetailedReactions && (\n                    <ReactionSelector\n                      mine={this.isMine()}\n                      handleReaction={this.props.handleReaction}\n                      actionsEnabled={this.props.actionsEnabled}\n                      detailedView\n                      reaction_counts={message.reaction_counts}\n                      latest_reactions={message.latest_reactions}\n                      messageList={this.props.messageListRect}\n                      ref={this.reactionSelectorRef}\n                    />\n                  )}\n                </div>\n\n                {message.text && this.renderOptions()}\n              </div>\n            )}\n            {!this.props.threadList && message.reply_count !== 0 && (\n              <div className=\"str-chat__message-simple-reply-button\">\n                <MessageRepliesCountButton\n                  onClick={this.props.openThread}\n                  reply_count={message.reply_count}\n                />\n              </div>\n            )}\n            <div\n              className={`str-chat__message-data str-chat__message-simple-data`}\n            >\n              {!this.isMine() ? (\n                <span className=\"str-chat__message-simple-name\">\n                  {message.user.name || message.user.id}\n                </span>\n              ) : null}\n              <span className=\"str-chat__message-simple-timestamp\">{when}</span>\n            </div>\n          </div>\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n","import React, { Component } from 'react';\n\nimport { MessageSimple } from './MessageSimple';\nimport PropTypes from 'prop-types';\nimport { Attachment } from './Attachment';\n\nimport deepequal from 'deep-equal';\nimport { MESSAGE_ACTIONS } from '../utils';\n\n// import diff from 'shallow-diff';\n\n/**\n * Message - A high level component which implements all the logic required for a message.\n * The actual rendering of the message is delegated via the \"Message\" property\n *\n * @example ./docs/Message.md\n * @extends Component\n */\nexport class Message extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: false,\n    };\n  }\n\n  static propTypes = {\n    /** The message object */\n    message: PropTypes.object.isRequired,\n    /** The client connection object for connecting to Stream */\n    client: PropTypes.object.isRequired,\n    /** The current channel this message is displayed in */\n    channel: PropTypes.object.isRequired,\n    /** A list of users that have read this message **/\n    readBy: PropTypes.array,\n    /** groupStyles, a list of styles to apply to this message. ie. top, bottom, single etc */\n    groupStyles: PropTypes.array,\n    /** Editing, if the message is currently being edited */\n    editing: PropTypes.bool,\n    /** The message rendering component, the Message component delegates its rendering logic to this component */\n    Message: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n    /** Allows you to overwrite the attachment component */\n    Attachment: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n    /** render HTML instead of markdown. Posting HTML is only allowed server-side */\n    unsafeHTML: PropTypes.bool,\n    /**\n     * Array of allowed actions on message. e.g. ['edit', 'delete', 'mute', 'flag']\n     * If all the actions need to be disabled, empty array or false should be provided as value of prop.\n     * */\n    messageActions: PropTypes.oneOfType([PropTypes.bool, PropTypes.array]),\n    /**\n     * Function that returns message/text as string to be shown as notification, when request for flagging a message is succesful\n     *\n     * This function should accept following params:\n     *\n     * @param message A [message object](https://getstream.io/chat/docs/#message_format) which is flagged.\n     *\n     * */\n    getFlagMessageSuccessNotification: PropTypes.func,\n    /**\n     * Function that returns message/text as string to be shown as notification, when request for flagging a message runs into error\n     *\n     * This function should accept following params:\n     *\n     * @param message A [message object](https://getstream.io/chat/docs/#message_format) which is flagged.\n     *\n     * */\n    getFlagMessageErrorNotification: PropTypes.func,\n    /**\n     * Function that returns message/text as string to be shown as notification, when request for muting a user is succesful\n     *\n     * This function should accept following params:\n     *\n     * @param user A user object which is being muted\n     *\n     * */\n    getMuteUserSuccessNotification: PropTypes.func,\n    /**\n     * Function that returns message/text as string to be shown as notification, when request for muting a user runs into error\n     *\n     * This function should accept following params:\n     *\n     * @param user A user object which is being muted\n     *\n     * */\n    getMuteUserErrorNotification: PropTypes.func,\n  };\n\n  static defaultProps = {\n    Message: MessageSimple,\n    readBy: [],\n    groupStyles: [],\n    Attachment,\n    editing: false,\n    messageActions: Object.keys(MESSAGE_ACTIONS),\n  };\n\n  shouldComponentUpdate(nextProps) {\n    // since there are many messages its important to only rerender messages when needed.\n    let shouldUpdate = nextProps.message !== this.props.message;\n    let reason = '';\n    if (shouldUpdate) {\n      reason = 'message';\n    }\n    // read state is the next most likely thing to change..\n    if (!shouldUpdate && !deepequal(nextProps.readBy, this.props.readBy)) {\n      shouldUpdate = true;\n      reason = 'readBy';\n    }\n    // group style often changes for the last 3 messages...\n    if (\n      !shouldUpdate &&\n      !deepequal(nextProps.groupStyles, this.props.groupStyles)\n    ) {\n      shouldUpdate = true;\n      reason = 'groupStyles';\n    }\n\n    // if lastreceivedId changesm, message should update.\n    if (\n      !shouldUpdate &&\n      !deepequal(nextProps.lastReceivedId, this.props.lastReceivedId)\n    ) {\n      shouldUpdate = true;\n      reason = 'lastReceivedId';\n    }\n\n    // editing is the last one which can trigger a change..\n    if (!shouldUpdate && nextProps.editing !== this.props.editing) {\n      shouldUpdate = true;\n      reason = 'editing';\n    }\n\n    // editing is the last one which can trigger a change..\n    if (\n      !shouldUpdate &&\n      nextProps.messageListRect !== this.props.messageListRect\n    ) {\n      shouldUpdate = true;\n      reason = 'messageListRect';\n    }\n\n    if (shouldUpdate && reason) {\n      // console.log(\n      //   'message',\n      //   nextProps.message.id,\n      //   'shouldUpdate',\n      //   shouldUpdate,\n      //   reason,\n      // );\n      // console.log(reason, diff(this.props, nextProps));\n    }\n\n    return shouldUpdate;\n  }\n\n  isMyMessage = (message) => this.props.client.user.id === message.user.id;\n  isAdmin = () => this.props.client.user.role === 'admin';\n\n  canEditMessage = (message) => this.isMyMessage(message) || this.isAdmin();\n\n  canDeleteMessage = (message) => this.isMyMessage(message) || this.isAdmin();\n\n  /**\n   * Following function validates a function which returns notification message.\n   * It validates if the first parameter is function and also if return value of function is string or no.\n   *\n   * @param func {Function}\n   * @param args {Array} Arguments to be provided to func while executing.\n   */\n  validateAndGetNotificationMessage = (func, args) => {\n    if (!func || typeof func !== 'function') return false;\n\n    const returnValue = func.apply(null, args);\n\n    if (typeof returnValue !== 'string') return false;\n\n    return returnValue;\n  };\n\n  handleFlag = async (event) => {\n    event.preventDefault();\n\n    const {\n      getFlagMessageSuccessNotification,\n      getFlagMessageErrorNotification,\n    } = this.props;\n    const message = this.props.message;\n\n    try {\n      await this.props.client.flagMessage(message.id);\n      const successMessage = this.validateAndGetNotificationMessage(\n        getFlagMessageSuccessNotification,\n        [message],\n      );\n      this.props.addNotification(\n        successMessage\n          ? successMessage\n          : 'Message has been succesfully flagged',\n        'success',\n      );\n    } catch (e) {\n      const errorMessage = this.validateAndGetNotificationMessage(\n        getFlagMessageErrorNotification,\n        [message],\n      );\n      this.props.addNotification(\n        errorMessage\n          ? errorMessage\n          : 'Error adding flag: Either the flag already exist or there is issue with network connection ...',\n        'error',\n      );\n    }\n  };\n\n  handleMute = async (event) => {\n    event.preventDefault();\n\n    const {\n      getMuteUserSuccessNotification,\n      getMuteUserErrorNotification,\n    } = this.props;\n    const message = this.props.message;\n\n    try {\n      await this.props.client.muteUser(message.user.id);\n      const successMessage = this.validateAndGetNotificationMessage(\n        getMuteUserSuccessNotification,\n        [message.user],\n      );\n\n      this.props.addNotification(\n        successMessage\n          ? successMessage\n          : `User with id ${message.user.id} has been muted`,\n        'success',\n      );\n    } catch (e) {\n      const errorMessage = this.validateAndGetNotificationMessage(\n        getMuteUserErrorNotification,\n        [message.user],\n      );\n\n      this.props.addNotification(\n        errorMessage ? errorMessage : 'Error muting a user ...',\n        'error',\n      );\n    }\n  };\n\n  handleEdit = () => {\n    this.props.setEditingState(this.props.message);\n  };\n\n  handleDelete = async (event) => {\n    event.preventDefault();\n    const message = this.props.message;\n    const data = await this.props.client.deleteMessage(message.id);\n    this.props.updateMessage(data.message);\n  };\n\n  handleReaction = async (reactionType, event) => {\n    if (event !== undefined && event.preventDefault) {\n      event.preventDefault();\n    }\n\n    let userExistingReaction = null;\n\n    const currentUser = this.props.client.userID;\n\n    for (const reaction of this.props.message.own_reactions) {\n      // own user should only ever contain the current user id\n      // just in case we check to prevent bugs with message updates from breaking reactions\n      if (currentUser === reaction.user.id && reaction.type === reactionType) {\n        userExistingReaction = reaction;\n      } else if (currentUser !== reaction.user.id) {\n        console.warn(\n          `message.own_reactions contained reactions from a different user, this indicates a bug`,\n        );\n      }\n    }\n\n    const originalMessage = this.props.message;\n    let reactionChangePromise;\n\n    /*\n    - Add the reaction to the local state\n    - Make the API call in the background\n    - If it fails, revert to the old message...\n     */\n    if (userExistingReaction) {\n      // this.props.channel.state.removeReaction(userExistingReaction);\n\n      reactionChangePromise = this.props.channel.deleteReaction(\n        this.props.message.id,\n        userExistingReaction.type,\n      );\n    } else {\n      // add the reaction\n      const messageID = this.props.message.id;\n\n      const reaction = { type: reactionType };\n\n      // this.props.channel.state.addReaction(tmpReaction, this.props.message);\n      reactionChangePromise = this.props.channel.sendReaction(\n        messageID,\n        reaction,\n      );\n    }\n\n    try {\n      // only wait for the API call after the state is updated\n      await reactionChangePromise;\n    } catch (e) {\n      // revert to the original message if the API call fails\n      this.props.updateMessage(originalMessage);\n    }\n  };\n\n  handleAction = async (name, value, event) => {\n    event.preventDefault();\n    const messageID = this.props.message.id;\n    const formData = {};\n    formData[name] = value;\n\n    const data = await this.props.channel.sendAction(messageID, formData);\n\n    if (data && data.message) {\n      this.props.updateMessage(data.message);\n    } else {\n      this.props.removeMessage(this.props.message);\n    }\n  };\n\n  handleRetry = async (message) => {\n    await this.props.retrySendMessage(message);\n  };\n\n  onMentionsClick = (e) => {\n    if (typeof this.props.onMentionsClick !== 'function') {\n      return;\n    }\n    this.props.onMentionsClick(e, this.props.message.mentioned_users);\n  };\n\n  onMentionsHover = (e) => {\n    if (typeof this.props.onMentionsHover !== 'function') {\n      return;\n    }\n    this.props.onMentionsHover(e, this.props.message.mentioned_users);\n  };\n\n  getMessageActions = () => {\n    const { message, messageActions: messageActionsProps } = this.props;\n    const messageActionsAfterPermission = [];\n    let messageActions = [];\n\n    if (messageActionsProps && typeof messageActionsProps === 'boolean') {\n      // If value of messageActionsProps is true, then populate all the possible values\n      messageActions = Object.keys(MESSAGE_ACTIONS);\n    } else if (messageActionsProps && messageActionsProps.length >= 0) {\n      messageActions = [...messageActionsProps];\n    } else {\n      return [];\n    }\n\n    if (\n      this.canEditMessage(message) &&\n      messageActions.indexOf(MESSAGE_ACTIONS.edit) > -1\n    ) {\n      messageActionsAfterPermission.push(MESSAGE_ACTIONS.edit);\n    }\n\n    if (\n      this.canDeleteMessage(message) &&\n      messageActions.indexOf(MESSAGE_ACTIONS.delete) > -1\n    ) {\n      messageActionsAfterPermission.push(MESSAGE_ACTIONS.delete);\n    }\n\n    if (\n      !this.isMyMessage(message) &&\n      messageActions.indexOf(MESSAGE_ACTIONS.flag) > -1\n    ) {\n      messageActionsAfterPermission.push(MESSAGE_ACTIONS.flag);\n    }\n\n    if (\n      !this.isMyMessage(message) &&\n      messageActions.indexOf(MESSAGE_ACTIONS.mute) > -1\n    ) {\n      messageActionsAfterPermission.push(MESSAGE_ACTIONS.mute);\n    }\n\n    return messageActionsAfterPermission;\n  };\n\n  render() {\n    const config = this.props.channel.getConfig();\n    const message = this.props.message;\n\n    const actionsEnabled =\n      message.type === 'regular' && message.status === 'received';\n\n    const Component = this.props.Message;\n    return (\n      <Component\n        {...this.props}\n        actionsEnabled={actionsEnabled}\n        Message={this}\n        handleReaction={this.handleReaction}\n        getMessageActions={this.getMessageActions}\n        handleFlag={this.handleFlag}\n        handleMute={this.handleMute}\n        handleAction={this.handleAction}\n        handleRetry={this.handleRetry}\n        isMyMessage={this.isMyMessage}\n        openThread={\n          this.props.openThread && this.props.openThread.bind(this, message)\n        }\n        channelConfig={config}\n        onMentionsClickMessage={this.onMentionsClick}\n        onMentionsHoverMessage={this.onMentionsHover}\n      />\n    );\n  }\n}\n","/* eslint-disable */\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nexport class ReverseInfiniteScroll extends Component {\n  static propTypes = {\n    children: PropTypes.node.isRequired,\n    element: PropTypes.node,\n    hasMore: PropTypes.bool,\n    initialLoad: PropTypes.bool,\n    isReverse: PropTypes.bool,\n    loader: PropTypes.node,\n    loadMore: PropTypes.func.isRequired,\n    pageStart: PropTypes.number,\n    ref: PropTypes.func,\n    threshold: PropTypes.number,\n    useCapture: PropTypes.bool,\n    useWindow: PropTypes.bool,\n    className: PropTypes.string,\n  };\n\n  static defaultProps = {\n    element: 'div',\n    hasMore: false,\n    initialLoad: true,\n    pageStart: 0,\n    ref: null,\n    threshold: 250,\n    useWindow: true,\n    isReverse: true,\n    useCapture: false,\n    loader: null,\n    className: 'str-chat__reverse-infinite-scroll',\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.scrollListener = this.scrollListener.bind(this);\n    this.scrollEventCount = 0;\n  }\n\n  componentDidMount() {\n    this.pageLoaded = this.props.pageStart;\n    this.attachScrollListener();\n  }\n\n  componentWillUnmount() {\n    this.detachScrollListener();\n    this.detachMousewheelListener();\n  }\n\n  // Set a defaut loader for all your `InfiniteScroll` components\n  setDefaultLoader(loader) {\n    this.defaultLoader = loader;\n  }\n\n  detachMousewheelListener() {\n    let scrollEl = window;\n    if (this.props.useWindow === false) {\n      scrollEl = this.scrollComponent.parentNode;\n    }\n\n    scrollEl.removeEventListener(\n      'mousewheel',\n      this.mousewheelListener,\n      this.props.useCapture,\n    );\n  }\n\n  detachScrollListener() {\n    let scrollEl = window;\n    if (this.props.useWindow === false) {\n      scrollEl = this.getParentElement(this.scrollComponent);\n    }\n\n    scrollEl.removeEventListener(\n      'scroll',\n      this.scrollListener,\n      this.props.useCapture,\n    );\n    scrollEl.removeEventListener(\n      'resize',\n      this.scrollListener,\n      this.props.useCapture,\n    );\n  }\n\n  getParentElement(el) {\n    return el && el.parentNode;\n  }\n\n  filterProps(props) {\n    return props;\n  }\n\n  attachScrollListener() {\n    if (\n      !this.props.hasMore ||\n      this.props.isLoading ||\n      !this.getParentElement(this.scrollComponent)\n    ) {\n      return;\n    }\n\n    let scrollEl = window;\n    if (this.props.useWindow === false) {\n      scrollEl = this.getParentElement(this.scrollComponent);\n    }\n\n    scrollEl.addEventListener(\n      'mousewheel',\n      this.mousewheelListener,\n      this.props.useCapture,\n    );\n    scrollEl.addEventListener(\n      'scroll',\n      this.scrollListener,\n      this.props.useCapture,\n    );\n    scrollEl.addEventListener(\n      'resize',\n      this.scrollListener,\n      this.props.useCapture,\n    );\n\n    if (this.props.initialLoad) {\n      this.scrollListener();\n    }\n  }\n\n  mousewheelListener(e) {\n    // Prevents Chrome hangups\n    // See: https://stackoverflow.com/questions/47524205/random-high-content-download-time-in-chrome/47684257#47684257\n    if (e.deltaY === 1) {\n      e.preventDefault();\n    }\n  }\n\n  scrollListener() {\n    const el = this.scrollComponent;\n    const scrollEl = window;\n    const parentNode = this.getParentElement(el);\n    this.scrollEventCount += 1;\n\n    let offset;\n    const reverseOffset = parentNode.scrollTop;\n    const standardOffset =\n      el.scrollHeight - parentNode.scrollTop - parentNode.clientHeight;\n    if (this.props.isReverse) {\n      offset = reverseOffset;\n    } else {\n      offset = standardOffset;\n    }\n    if (this.props.listenToScroll) {\n      this.props.listenToScroll(standardOffset, reverseOffset);\n    }\n\n    // a reverse infinite scroll element always starts out at position 0\n    // this counter prevent you from loading content before the user even scrolled\n    if (this.scrollEventCount < 2) {\n      return;\n    }\n\n    // prevent crazy repeat requests in case you don't have more\n    if (!this.props.hasMore || this.props.isLoading) {\n      return;\n    }\n\n    // Here we make sure the element is visible as well as checking the offset\n    if (\n      offset < Number(this.props.threshold) &&\n      (el && el.offsetParent !== null)\n    ) {\n      //this.detachScrollListener();\n      // Call loadMore after detachScrollListener to allow for non-async loadMore functions\n      if (typeof this.props.loadMore === 'function') {\n        this.props.loadMore((this.pageLoaded += 1));\n      }\n    }\n  }\n\n  calculateOffset(el, scrollTop) {\n    if (!el) {\n      return 0;\n    }\n\n    return (\n      this.calculateTopPosition(el) +\n      (el.offsetHeight - scrollTop - window.innerHeight)\n    );\n  }\n\n  calculateTopPosition(el) {\n    if (!el) {\n      return 0;\n    }\n    return el.offsetTop + this.calculateTopPosition(el.offsetParent);\n  }\n\n  render() {\n    const renderProps = this.filterProps(this.props);\n    const {\n      children,\n      element,\n      hasMore,\n      initialLoad,\n      isReverse,\n      loader,\n      loadMore,\n      pageStart,\n      ref,\n      threshold,\n      useCapture,\n      useWindow,\n      listenToScroll,\n      isLoading,\n      ...props\n    } = renderProps;\n\n    props.ref = (node) => {\n      this.scrollComponent = node;\n      if (ref) {\n        ref(node);\n      }\n    };\n\n    const childrenArray = [children];\n    if (isLoading) {\n      if (loader) {\n        isReverse ? childrenArray.unshift(loader) : childrenArray.push(loader);\n      } else if (this.defaultLoader) {\n        isReverse\n          ? childrenArray.unshift(this.defaultLoader)\n          : childrenArray.push(this.defaultLoader);\n      }\n    }\n    return React.createElement(element, props, childrenArray);\n  }\n}\n","import React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\n\nexport class MessageNotification extends PureComponent {\n  static propTypes = {\n    /** If we should show the notification or not */\n    showNotification: PropTypes.bool,\n    /** Onclick handler */\n    onClick: PropTypes.func.isRequired,\n  };\n\n  static defaultProps = {\n    showNotification: true,\n  };\n\n  render() {\n    if (!this.props.showNotification) {\n      return null;\n    } else {\n      return (\n        <button\n          className=\"str-chat__message-notification\"\n          onClick={this.props.onClick}\n        >\n          {this.props.children}\n        </button>\n      );\n    }\n  }\n}\n","import React from 'react';\nimport Moment from 'moment';\nimport PropTypes from 'prop-types';\n\n/**\n * DateSeparator - A simple date seperator\n *\n * @example ./docs/DateSeparator.md\n * @extends PureComponent\n */\nexport class DateSeparator extends React.PureComponent {\n  static propTypes = {\n    /** The date to format */\n    date: PropTypes.instanceOf(Date),\n    /** Set the position of the date in the separator */\n    position: PropTypes.oneOf(['left', 'center', 'right']),\n    /** Override the default formatting of the date. This is a function that has access to the original date object. Returns a string or Node  */\n    formatDate: PropTypes.func,\n  };\n\n  static defaultProps = {\n    position: 'right',\n  };\n  render() {\n    const { position } = this.props;\n    if (!Date.parse(this.props.date)) {\n      return null;\n    }\n    return (\n      <div className=\"str-chat__date-separator\">\n        {(position === 'right' || position === 'center') && (\n          <hr className=\"str-chat__date-separator-line\" />\n        )}\n        <div className=\"str-chat__date-separator-date\">\n          {this.props.formatDate\n            ? this.props.formatDate(this.props.date)\n            : Moment(this.props.date.toISOString()).calendar(null, {\n                lastDay: '[Yesterday]',\n                sameDay: '[Today]',\n                nextDay: '[Tomorrow]',\n                lastWeek: '[Last] dddd',\n                nextWeek: 'dddd',\n                sameElse: 'L',\n              })}\n        </div>\n        {(position === 'left' || position === 'center') && (\n          <hr className=\"str-chat__date-separator-line\" />\n        )}\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport moment from 'moment';\nimport { Avatar } from './Avatar';\n\nexport class EventComponent extends React.PureComponent {\n  render() {\n    const { message } = this.props;\n    if (message.type === 'system') {\n      return (\n        <div className=\"str-chat__message--system\">\n          <div className=\"str-chat__message--system__text\">\n            <div className=\"str-chat__message--system__line\" />\n            <p>{message.text}</p>\n            <div className=\"str-chat__message--system__line\" />\n          </div>\n          <div className=\"str-chat__message--system__date\">\n            <strong>{moment(message.created_at).format('dddd')} </strong>\n            at {moment(message.created_at).format('hh:mm A')}\n          </div>\n        </div>\n      );\n    }\n\n    if (\n      message.type === 'channel.event' &&\n      (message.event.type === 'member.removed' ||\n        message.event.type === 'member.added')\n    ) {\n      let sentence;\n\n      switch (message.event.type) {\n        case 'member.removed':\n          sentence = `${message.event.user.name ||\n            message.event.user.id} was removed from the chat`;\n          break;\n        case 'member.added':\n          sentence = `${message.event.user.name ||\n            message.event.user.id} has joined the chat`;\n          break;\n        default:\n          break;\n      }\n      return (\n        <div className=\"str-chat__event-component__channel-event\">\n          <Avatar\n            image={message.event.user.image}\n            name={message.event.user.name || message.event.user.id}\n          />\n          <div className=\"str-chat__event-component__channel-event__content\">\n            <em className=\"str-chat__event-component__channel-event__sentence\">\n              {sentence}\n            </em>\n            <div className=\"str-chat__event-component__channel-event__date\">\n              {moment(message.created_at).format('LT')}\n            </div>\n          </div>\n        </div>\n      );\n    }\n\n    return null;\n  }\n}\n","import React, { PureComponent } from 'react';\nimport { Message } from './Message';\nimport { withChannelContext } from '../context';\nimport PropTypes from 'prop-types';\nimport { ReverseInfiniteScroll } from './ReverseInfiniteScroll';\nimport { MessageNotification } from './MessageNotification';\nimport { LoadingIndicator } from './LoadingIndicator';\nimport { DateSeparator } from './DateSeparator';\nimport { EventComponent } from './EventComponent';\nimport { KEY_CODES } from './AutoCompleteTextarea';\nimport deepequal from 'deep-equal';\nimport { MESSAGE_ACTIONS } from '../utils';\n\n/**\n * MessageList - The message list components renders a list of messages\n *\n * @example ./docs/MessageList.md\n * @extends PureComponent\n */\nclass MessageList extends PureComponent {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      newMessagesNotification: false,\n      editing: '',\n      online: true,\n      notifications: [],\n    };\n\n    this.bottomRef = React.createRef();\n    this.messageList = React.createRef();\n    this.messageRefs = {};\n    this.notificationTimeouts = [];\n  }\n  static propTypes = {\n    /** The attachment component to render, defaults to Attachment */\n    Attachment: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n    /** A list of immutable messages */\n    messages: PropTypes.array.isRequired,\n    /** Via Context: The channel object */\n    channel: PropTypes.object.isRequired,\n    /** Via Context: The function to update a message, handled by the Channel component */\n    updateMessage: PropTypes.func.isRequired,\n    /** Via Context: The function is called when the list scrolls */\n    listenToScroll: PropTypes.func,\n    /** Typing indicator component to render  */\n    TypingIndicator: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n    /** Date separator component to render  */\n    dateSeparator: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n    /** Turn off grouping of messages by user */\n    noGroupByUser: PropTypes.bool,\n    /** render HTML instead of markdown. Posting HTML is only allowed server-side */\n    unsafeHTML: PropTypes.bool,\n    /**\n     * Array of allowed actions on message. e.g. ['edit', 'delete', 'mute', 'flag']\n     * If all the actions need to be disabled, empty array or false should be provided as value of prop.\n     * */\n    messageActions: PropTypes.oneOfType([PropTypes.bool, PropTypes.array]),\n    /**\n     * Function that returns message/text as string to be shown as notification, when request for flagging a message is succesful\n     *\n     * This function should accept following params:\n     *\n     * @param message A [message object](https://getstream.io/chat/docs/#message_format) which is flagged.\n     *\n     * */\n    getFlagMessageSuccessNotification: PropTypes.func,\n    /**\n     * Function that returns message/text as string to be shown as notification, when request for flagging a message runs into error\n     *\n     * This function should accept following params:\n     *\n     * @param message A [message object](https://getstream.io/chat/docs/#message_format) which is flagged.\n     *\n     * */\n    getFlagMessageErrorNotification: PropTypes.func,\n    /**\n     * Function that returns message/text as string to be shown as notification, when request for muting a user is succesful\n     *\n     * This function should accept following params:\n     *\n     * @param user A user object which is being muted\n     *\n     * */\n    getMuteUserSuccessNotification: PropTypes.func,\n    /**\n     * Function that returns message/text as string to be shown as notification, when request for muting a user runs into error\n     *\n     * This function should accept following params:\n     *\n     * @param user A user object which is being muted\n     *\n     * */\n    getMuteUserErrorNotification: PropTypes.func,\n  };\n\n  static defaultProps = {\n    dateSeparator: DateSeparator,\n    unsafeHTML: false,\n    noGroupByUser: false,\n    messageActions: Object.keys(MESSAGE_ACTIONS),\n  };\n\n  connectionChanged = (event) => {\n    if (this.state.online !== event.online) {\n      this.setState({ online: event.online });\n    }\n  };\n\n  componentDidMount() {\n    // start at the bottom\n    this.scrollToBottom();\n    const messageListRect = this.messageList.current.getBoundingClientRect();\n\n    this.setState({\n      messageListRect,\n    });\n\n    this.props.client.on('connection.changed', this.connectionChanged);\n\n    document.addEventListener('keydown', this.keypress);\n  }\n\n  componentWillUnmount() {\n    this.props.client.off('connection.changed', this.connectionChanged);\n\n    document.removeEventListener('keydown', this.keypress);\n    this.notificationTimeouts.forEach((ct) => {\n      clearTimeout(ct);\n    });\n  }\n\n  getSnapshotBeforeUpdate(prevProps) {\n    if (this.props.threadList) {\n      return null;\n    }\n    // Are we adding new items to the list?\n    // Capture the scroll position so we can adjust scroll later.\n\n    if (\n      prevProps.messages.length < this.props.messages.length ||\n      !deepequal(this.props.eventHistory, prevProps.eventHistory)\n    ) {\n      const list = this.messageList.current;\n      const pos = list.scrollHeight - list.scrollTop;\n      return pos;\n    }\n    return null;\n  }\n\n  componentDidUpdate(prevProps, prevState, snapshot) {\n    // If we have a snapshot value, we've just added new items.\n    // Adjust scroll so these new items don't push the old ones out of view.\n    // (snapshot here is the value returned from getSnapshotBeforeUpdate)\n\n    if (snapshot !== null) {\n      const list = this.messageList.current;\n\n      // const scrollDown = () => {\n      //   list.scrollTop = list.scrollHeight - snapshot;\n      // };\n      // scrollDown();\n      // setTimeout(scrollDown, 100);\n\n      this.scrollToTarget(\n        list.scrollHeight - snapshot,\n        this.messageList.current,\n      );\n\n      // scroll down after images load again\n      if (\n        this.props.messages.length > 0 &&\n        this.props.messages[this.props.messages.length - 1].user.id !==\n          this.props.client.user.id\n      ) {\n        setTimeout(\n          () =>\n            this.scrollToTarget(\n              list.scrollHeight - snapshot,\n              this.messageList.current,\n            ),\n          100,\n        );\n      }\n    }\n\n    // handle new messages being sent/received\n    const currentLastMessage = this.props.messages[\n      this.props.messages.length - 1\n    ];\n    const previousLastMessage =\n      prevProps.messages[prevProps.messages.length - 1];\n    if (!previousLastMessage || !currentLastMessage) {\n      return;\n    }\n\n    const hasNewMessage = currentLastMessage.id !== previousLastMessage.id;\n    const userScrolledUp = this.userScrolledUp();\n    const isOwner = currentLastMessage.user.id === this.props.client.userID;\n\n    let scrollToBottom = false;\n\n    // always scroll down when it's your own message that you added...\n    if (hasNewMessage && isOwner) {\n      scrollToBottom = true;\n    } else if (hasNewMessage && !userScrolledUp) {\n      scrollToBottom = true;\n    }\n\n    if (scrollToBottom) {\n      this.scrollToBottom();\n    }\n\n    // Check the scroll position... if you're scrolled up show a little notification\n    if (\n      !scrollToBottom &&\n      hasNewMessage &&\n      !this.state.newMessagesNotification\n    ) {\n      this.setState({ newMessagesNotification: true });\n    }\n\n    // remove the scroll notification if we already scrolled down...\n    if (scrollToBottom && this.state.newMessagesNotification) {\n      this.setState({ newMessagesNotification: false });\n    }\n  }\n\n  keypress = (event) => {\n    if (event.keyCode === KEY_CODES.ESC && this.state.editing) {\n      this.clearEditingState();\n    }\n  };\n\n  scrollToBottom = () => {\n    this._scrollToRef(this.bottomRef, this.messageList);\n  };\n\n  _scrollToRef = (el, parent) => {\n    function scrollDown() {\n      if (el && el.current && parent && parent.current) {\n        this.scrollToTarget(el.current, parent.current);\n      }\n    }\n    scrollDown.call(this);\n    // scroll down after images load again\n    setTimeout(scrollDown.bind(this), 200);\n  };\n\n  /**\n   * target - target to scroll to (DOM element, scrollTop Number, 'top', or 'bottom'\n   * containerEl - DOM element for the container with scrollbars\n   * source: https://stackoverflow.com/a/48429314\n   */\n  scrollToTarget = (target, containerEl) => {\n    // Moved up here for readability:\n    const isElement = target && target.nodeType === 1,\n      isNumber = Object.prototype.toString.call(target) === '[object Number]';\n\n    if (isElement) {\n      containerEl.scrollTop = target.offsetTop;\n    } else if (isNumber) {\n      containerEl.scrollTop = target;\n    } else if (target === 'bottom') {\n      containerEl.scrollTop =\n        containerEl.scrollHeight - containerEl.offsetHeight;\n    } else if (target === 'top') {\n      containerEl.scrollTop = 0;\n    }\n  };\n\n  setEditingState = (message) => {\n    this.setState({\n      editing: message.id,\n    });\n  };\n\n  clearEditingState = (e) => {\n    if (e) {\n      e.preventDefault();\n    }\n    this.setState({\n      editing: '',\n    });\n  };\n\n  insertDates = (messages) => {\n    const newMessages = [];\n    for (const [i, message] of messages.entries()) {\n      if (message.type === 'message.read' || message.deleted_at) {\n        newMessages.push(message);\n        continue;\n      }\n      const messageDate = message.created_at.getDay();\n      let prevMessageDate = messageDate;\n      if (i > 0) {\n        prevMessageDate = messages[i - 1].created_at.getDay();\n      }\n\n      if (i === 0) {\n        newMessages.push(\n          { type: 'message.date', date: message.created_at },\n          message,\n        );\n      } else if (messageDate !== prevMessageDate) {\n        newMessages.push(\n          { type: 'message.date', date: message.created_at },\n          message,\n        );\n      } else {\n        newMessages.push(message);\n      }\n\n      const eventsNextToMessage = this.props.eventHistory[\n        message.id || 'first'\n      ];\n      if (eventsNextToMessage && eventsNextToMessage.length > 0) {\n        eventsNextToMessage.forEach((e) => {\n          newMessages.push({\n            type: 'channel.event',\n            event: e,\n          });\n        });\n      }\n    }\n\n    return newMessages;\n  };\n\n  goToNewMessages = async () => {\n    await this.scrollToBottom();\n    this.setState({\n      newMessagesNotification: false,\n    });\n  };\n\n  getReadStates = (messages) => {\n    // create object with empty array for each message id\n    const readData = {};\n    for (const message of messages) {\n      readData[message.id] = [];\n    }\n\n    for (const readState of Object.values(this.props.read)) {\n      if (readState.last_read == null) {\n        break;\n      }\n      let userLastReadMsgId;\n      for (const msg of messages) {\n        if (msg.updated_at < readState.last_read) {\n          userLastReadMsgId = msg.id;\n        }\n      }\n      if (userLastReadMsgId != null) {\n        readData[userLastReadMsgId] = [\n          ...readData[userLastReadMsgId],\n          readState.user,\n        ];\n      }\n    }\n    return readData;\n  };\n\n  userScrolledUp = () => this.scrollOffset > 310;\n\n  listenToScroll = (offset) => {\n    this.scrollOffset = offset;\n\n    if (this.state.newMessagesNotification && !this.userScrolledUp()) {\n      this.setState({\n        newMessagesNotification: false,\n      });\n    }\n  };\n\n  getLastReceived = (messages) => {\n    const l = messages.length;\n    let lastReceivedId = null;\n    for (let i = l; i > 0; i--) {\n      if (\n        messages[i] !== undefined &&\n        messages[i].status !== undefined &&\n        messages[i].status === 'received'\n      ) {\n        lastReceivedId = messages[i].id;\n        break;\n      }\n    }\n    return lastReceivedId;\n  };\n\n  getGroupStyles = (m) => {\n    const l = m.length;\n    const messageGroupStyles = {};\n\n    const messages = [...m];\n\n    for (let i = 0; i < l; i++) {\n      const previousMessage = messages[i - 1];\n      const message = messages[i];\n      const nextMessage = messages[i + 1];\n      const groupStyles = [];\n      if (message.type === 'message.date') {\n        continue;\n      }\n\n      if (message.type === 'channel.event') {\n        continue;\n      }\n\n      const userId = message.user.id;\n\n      const isTopMessage =\n        !previousMessage ||\n        previousMessage.type === 'message.date' ||\n        previousMessage.type === 'system' ||\n        previousMessage.type === 'channel.event' ||\n        previousMessage.attachments.length !== 0 ||\n        userId !== previousMessage.user.id ||\n        previousMessage.type === 'error' ||\n        previousMessage.deleted_at;\n\n      const isBottomMessage =\n        !nextMessage ||\n        nextMessage.type === 'message.date' ||\n        nextMessage.type === 'system' ||\n        nextMessage.type === 'channel.event' ||\n        nextMessage.attachments.length !== 0 ||\n        userId !== nextMessage.user.id ||\n        nextMessage.type === 'error' ||\n        nextMessage.deleted_at;\n\n      if (isTopMessage) {\n        groupStyles.push('top');\n      }\n\n      if (isBottomMessage) {\n        if (isTopMessage || message.deleted_at || message.type === 'error') {\n          groupStyles.splice(0, groupStyles.length);\n          groupStyles.push('single');\n        } else {\n          groupStyles.push('bottom');\n        }\n      }\n\n      if (!isTopMessage && !isBottomMessage) {\n        if (message.deleted_at || message.type === 'error') {\n          groupStyles.splice(0, groupStyles.length);\n          groupStyles.push('single');\n        } else {\n          groupStyles.splice(0, groupStyles.length);\n          groupStyles.push('middle');\n        }\n      }\n\n      if (message.attachments.length !== 0) {\n        groupStyles.splice(0, groupStyles.length);\n        groupStyles.push('single');\n      }\n\n      if (this.props.noGroupByUser) {\n        groupStyles.splice(0, groupStyles.length);\n        groupStyles.push('single');\n      }\n\n      messageGroupStyles[message.id] = groupStyles;\n    }\n\n    return messageGroupStyles;\n  };\n\n  _onMentionsHoverOrClick = (e, mentioned_users) => {\n    if (!this.props.onMentionsHover || !this.props.onMentionsClick) return;\n\n    const tagName = e.target.tagName.toLowerCase();\n    const textContent = e.target.innerHTML.replace('*', '');\n    if (tagName === 'strong' && textContent[0] === '@') {\n      const userName = textContent.replace('@', '');\n      const user = mentioned_users.find(\n        (user) => user.name === userName || user.id === userName,\n      );\n      if (this.props.onMentionsHover && e.type === 'mouseover') {\n        this.props.onMentionsHover(e, user);\n      }\n      if (this.props.onMentionsClick && e.type === 'click') {\n        this.props.onMentionsHover(e, user);\n      }\n    }\n  };\n\n  /**\n   * Adds a temporary notification to message list.\n   * Notification will be removed after 5 seconds.\n   *\n   * @param notificationText  Text of notification to be added\n   * @param type              Type of notification. success | error\n   */\n  addNotification = (notificationText, type) => {\n    if (typeof notificationText !== 'string') return;\n    if (type !== 'success' && type !== 'error') return;\n\n    const nextIndex = new Date();\n\n    const newNotifications = [...this.state.notifications];\n    newNotifications.push({\n      id: nextIndex,\n      text: notificationText,\n      type,\n    });\n    this.setState({\n      notifications: newNotifications,\n    });\n\n    // remove the notification after 5000 ms\n    const ct = setTimeout(() => {\n      const index = this.state.notifications.findIndex((notification) => {\n        if (notification.id === nextIndex) return true;\n        return false;\n      });\n      const newNotifications = [...this.state.notifications];\n      newNotifications.splice(index, 1);\n      this.setState({\n        notifications: newNotifications,\n      });\n    }, 5000);\n\n    this.notificationTimeouts.push(ct);\n  };\n\n  render() {\n    let allMessages = [...this.props.messages];\n\n    allMessages = this.insertDates(allMessages);\n\n    const messageGroupStyles = this.getGroupStyles(allMessages);\n\n    const TypingIndicator = this.props.TypingIndicator;\n    const DateSeparator = this.props.dateSeparator;\n\n    // sort by date\n    allMessages.sort(function(a, b) {\n      return a.created_at - b.created_at;\n    });\n\n    // get the readData\n    const readData = this.getReadStates(allMessages);\n\n    const lastReceivedId = this.getLastReceived(allMessages);\n    const elements = [];\n\n    // loop over the messages\n    for (const message of allMessages) {\n      if (message.id) {\n        this.messageRefs[message.id] = React.createRef();\n      }\n\n      if (message.type === 'message.date') {\n        if (this.props.threadList) {\n          continue;\n        }\n        elements.push(\n          <li key={message.date.toISOString() + '-i'}>\n            <DateSeparator date={message.date} />\n          </li>,\n        );\n      } else if (\n        message.type === 'channel.event' ||\n        message.type === 'system'\n      ) {\n        console.log;\n        elements.push(\n          <li\n            key={\n              message.type === 'system'\n                ? message.created_at\n                : message.type === 'channel.event'\n                ? message.event.created_at\n                : ''\n            }\n          >\n            <EventComponent message={message} />\n          </li>,\n        );\n      } else if (message.type !== 'message.read') {\n        let groupStyles = messageGroupStyles[message.id];\n        if (!groupStyles) {\n          groupStyles = [];\n        }\n        const readBy = readData[message.id] || [];\n\n        elements.push(\n          <li\n            className={`str-chat__li str-chat__li--${groupStyles}`}\n            key={message.id || message.created_at}\n            ref={this.messageRefs[message.id]}\n          >\n            <Message\n              client={this.props.client}\n              openThread={this.props.openThread}\n              members={this.props.members}\n              watchers={this.props.watchers}\n              message={message}\n              groupStyles={groupStyles}\n              readBy={readBy}\n              lastReceivedId={\n                lastReceivedId === message.id ? lastReceivedId : null\n              }\n              editing={\n                !!(this.state.editing && this.state.editing === message.id)\n              }\n              channel={this.props.channel}\n              threadList={this.props.threadList}\n              clearEditingState={this.clearEditingState}\n              setEditingState={this.setEditingState}\n              messageListRect={this.state.messageListRect}\n              retrySendMessage={this.props.retrySendMessage}\n              addNotification={this.addNotification}\n              updateMessage={this.props.updateMessage}\n              removeMessage={this.props.removeMessage}\n              Message={this.props.Message}\n              unsafeHTML={this.props.unsafeHTML}\n              Attachment={this.props.Attachment}\n              onMentionsClick={this.props.onMentionsClick}\n              onMentionsHover={this.props.onMentionsHover}\n              messageActions={this.props.messageActions}\n              getFlagMessageSuccessNotification={\n                this.props.getFlagMessageSuccessNotification\n              }\n              getFlagMessageErrorNotification={\n                this.props.getFlagMessageErrorNotification\n              }\n              getMuteUserSuccessNotification={\n                this.props.getMuteUserSuccessNotification\n              }\n              getMuteUserErrorNotification={\n                this.props.getMuteUserErrorNotification\n              }\n            />\n          </li>,\n        );\n      }\n    }\n    return (\n      <React.Fragment>\n        <div\n          className={`str-chat__list ${\n            this.props.threadList ? 'str-chat__list--thread' : ''\n          }`}\n          ref={this.messageList}\n        >\n          <ReverseInfiniteScroll\n            loadMore={this.props.loadMore}\n            hasMore={this.props.hasMore}\n            isLoading={this.props.loadingMore}\n            listenToScroll={this.listenToScroll}\n            useWindow={false}\n            loader={\n              <Center key=\"loadingindicator\">\n                <LoadingIndicator size={20} />\n              </Center>\n            }\n          >\n            <ul className=\"str-chat__ul\">{elements}</ul>\n            {this.props.TypingIndicator && (\n              <TypingIndicator\n                typing={this.props.typing}\n                client={this.props.client}\n              />\n            )}\n            <div key=\"bottom\" ref={this.bottomRef} />\n          </ReverseInfiniteScroll>\n        </div>\n\n        <div className=\"str-chat__list-notifications\">\n          {this.state.notifications.map((notification) => (\n            <Notification\n              active={true}\n              key={notification.id}\n              type={notification.type}\n            >\n              {notification.text}\n            </Notification>\n          ))}\n          <Notification active={!this.state.online} type=\"error\">\n            Connection failure, reconnecting now...\n          </Notification>\n\n          <MessageNotification\n            showNotification={this.state.newMessagesNotification}\n            onClick={() => this.goToNewMessages()}\n          >\n            New Messages!\n          </MessageNotification>\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nMessageList = withChannelContext(MessageList);\nexport { MessageList };\n\nconst Center = ({ children }) => (\n  <div style={{ width: 100 + '%', display: 'flex', justifyContent: 'center' }}>\n    {children}\n  </div>\n);\n\nconst Notification = ({ children, active, type }) => {\n  if (active) {\n    return (\n      <div className={`str-chat__custom-notification notification-${type}`}>\n        {children}\n      </div>\n    );\n  }\n  return null;\n};\n","import React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\nimport { ChatContext } from '../context';\n\n/**\n * Chat - Wrapper component for Chat. The needs to be placed around any other chat components.\n * This Chat component provides the ChatContext to all other components.\n *\n * The ChatContext provides the following props:\n *\n * - client (the client connection)\n * - channels (the list of channels)\n * - setActiveChannel (a function to set the currently active channel)\n * - channel (the currently active channel)\n *\n * It also exposes the withChatContext HOC which you can use to consume the ChatContext\n *\n * @example ./docs/Chat.md\n * @extends PureComponent\n */\n\nconst colors = ['light', 'dark'];\nconst baseUseCases = ['messaging', 'team', 'commerce', 'gaming', 'livestream'];\nconst themes = [];\n\nfor (const color of colors) {\n  for (const useCase of baseUseCases) {\n    themes.push(`${useCase} ${color}`);\n  }\n}\n\nexport class Chat extends PureComponent {\n  static propTypes = {\n    /** The StreamChat client object */\n    client: PropTypes.object.isRequired,\n    /** The theme 'messaging', 'team', 'commerce', 'gaming', 'livestream' plus either 'light' or 'dark' */\n    theme: PropTypes.oneOf(themes),\n  };\n\n  static defaultProps = {\n    theme: 'messaging light',\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      // currently active channel\n      channel: {},\n      error: false,\n    };\n  }\n\n  setActiveChannel = (channel, e) => {\n    if (e !== undefined && e.preventDefault) {\n      e.preventDefault();\n    }\n\n    this.setState(() => ({\n      channel,\n    }));\n  };\n\n  getContext = () => ({\n    client: this.props.client,\n    channel: this.state.channel,\n    setActiveChannel: this.setActiveChannel,\n    theme: this.props.theme,\n  });\n\n  render() {\n    return (\n      <ChatContext.Provider value={this.getContext()}>\n        {this.props.children}\n      </ChatContext.Provider>\n    );\n  }\n}\n","import React, { PureComponent } from 'react';\nimport { withChatContext, ChannelContext } from '../context';\n\nimport { LoadingIndicator } from './LoadingIndicator';\n\nimport uuidv4 from 'uuid/v4';\nimport PropTypes from 'prop-types';\nimport Immutable from 'seamless-immutable';\nimport Visibility from 'visibilityjs';\nimport { logChatPromiseExecution } from 'stream-chat';\nimport { MessageSimple } from './MessageSimple';\nimport { Attachment } from './Attachment';\nimport debounce from 'lodash/debounce';\nimport throttle from 'lodash/throttle';\n/**\n * Channel - Wrapper component for a channel. It needs to be place inside of the Chat component.\n * ChannelHeader, MessageList, Thread and MessageInput should be used as children of the Channel component.\n *\n * @example ./docs/Channel.md\n * @extends PureComponent\n */\nclass Channel extends PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = { error: false };\n  }\n  static propTypes = {\n    /** Which channel to connect to, will initialize the channel if it's not initialized yet */\n    channel: PropTypes.shape({\n      watch: PropTypes.func,\n    }).isRequired,\n    /** Client is passed automatically via the Chat Context */\n    client: PropTypes.object.isRequired,\n    /** The loading indicator to use */\n    LoadingIndicator: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n    Message: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n    Attachment: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n\n    /** Function to be called when a @mention is clicked. Function has access to the DOM event and the target user object */\n    onMentionsClick: PropTypes.func,\n    /** Function to be called when hovering over a @mention. Function has access to the DOM event and the target user object */\n    onMentionsHover: PropTypes.func,\n  };\n\n  static defaultProps = {\n    LoadingIndicator,\n    Message: MessageSimple,\n    Attachment,\n  };\n\n  render() {\n    if (!this.props.channel.cid) {\n      return null; // <div>Select a channel</div>;\n    }\n    // We use a wrapper to make sure the key variable is set.\n    // this ensures that if you switch channel the component is recreated\n    return <ChannelInner {...this.props} key={this.props.channel.cid} />;\n  }\n}\n\nclass ChannelInner extends PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      error: false,\n      // Loading the intial content of the channel\n      loading: true,\n      // Loading more messages\n      loadingMore: false,\n      hasMore: true,\n      messages: Immutable([]),\n      online: true,\n      typing: Immutable({}),\n      watchers: Immutable({}),\n      members: Immutable({}),\n      read: Immutable({}),\n      eventHistory: {},\n      thread: false,\n      threadMessages: [],\n      threadLoadingMore: false,\n      threadHasMore: true,\n    };\n\n    // hard limit to prevent you from scrolling faster than 1 page per 2 seconds\n    this._loadMoreFinishedDebounced = debounce(this.loadMoreFinished, 2000, {\n      leading: true,\n      trailing: true,\n    });\n\n    // hard limit to prevent you from scrolling faster than 1 page per 2 seconds\n    this._loadMoreThreadFinishedDebounced = debounce(\n      this.loadMoreThreadFinished,\n      2000,\n      {\n        leading: true,\n        trailing: true,\n      },\n    );\n\n    this._markReadThrottled = throttle(this.markRead, 500, {\n      leading: true,\n      trailing: true,\n    });\n    this._setStateThrottled = throttle(this.setState, 500, {\n      leading: true,\n      trailing: true,\n    });\n  }\n\n  static propTypes = {\n    /** Which channel to connect to */\n    channel: PropTypes.shape({\n      watch: PropTypes.func,\n    }).isRequired,\n    /** Client is passed via the Chat Context */\n    client: PropTypes.object.isRequired,\n    /** The loading indicator to use */\n    LoadingIndicator: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n  };\n\n  async componentDidMount() {\n    const channel = this.props.channel;\n    let errored = false;\n    if (!channel.initialized) {\n      try {\n        await channel.watch();\n      } catch (e) {\n        this.setState({ error: true });\n        errored = true;\n      }\n    }\n    this.originalTitle = document.title;\n    this.lastRead = new Date();\n    if (!errored) {\n      this.copyChannelState();\n      this.listenToChanges();\n    }\n  }\n\n  componentWillUnmount() {\n    this.props.client.off('connection.recovered', this.handleEvent);\n    this.props.channel.off(this.handleEvent);\n    this._loadMoreFinishedDebounced.cancel();\n    this._loadMoreThreadFinishedDebounced.cancel();\n\n    if (this.visibilityListener) {\n      Visibility.unbind(this.visibilityListener);\n    }\n  }\n\n  renderLoading = () => {\n    const Loader = this.props.LoadingIndicator;\n    return <Loader isLoading={true} />;\n  };\n\n  openThread = (message, e) => {\n    if (e && e.preventDefault) {\n      e.preventDefault();\n    }\n\n    const channel = this.props.channel;\n    const threadMessages = channel.state.threads[message.id] || [];\n\n    this.setState({\n      thread: message,\n      threadMessages,\n    });\n  };\n\n  loadMoreThread = async () => {\n    // prevent duplicate loading events...\n    if (this.state.threadLoadingMore) return;\n    this.setState({\n      threadLoadingMore: true,\n    });\n    const channel = this.props.channel;\n    const parentID = this.state.thread.id;\n    const oldMessages = channel.state.threads[parentID] || [];\n    const oldestMessageID = oldMessages[0] ? oldMessages[0].id : null;\n    const limit = 50;\n    const queryResponse = await channel.getReplies(parentID, {\n      limit,\n      id_lt: oldestMessageID,\n    });\n\n    const hasMore = queryResponse.messages.length === limit;\n\n    const threadMessages = channel.state.threads[parentID] || [];\n\n    // next set loadingMore to false so we can start asking for more data...\n    this._loadMoreThreadFinishedDebounced(hasMore, threadMessages);\n  };\n\n  loadMoreThreadFinished = (threadHasMore, threadMessages) => {\n    this.setState({\n      threadLoadingMore: false,\n      threadHasMore,\n      threadMessages,\n    });\n  };\n\n  closeThread = (e) => {\n    if (e && e.preventDefault) {\n      e.preventDefault();\n    }\n\n    this.setState({\n      thread: null,\n      threadMessages: [],\n    });\n  };\n\n  copyChannelState() {\n    const channel = this.props.channel;\n\n    this.setState({\n      messages: channel.state.messages,\n      read: channel.state.read,\n      watchers: channel.state.watchers,\n      members: channel.state.members,\n      watcher_count: channel.state.watcher_count,\n      loading: false,\n      typing: {},\n    });\n\n    channel.markRead();\n  }\n\n  updateMessage = (updatedMessage, extraState) => {\n    const channel = this.props.channel;\n\n    extraState = extraState || {};\n\n    // adds the message to the local channel state..\n    // this adds to both the main channel state as well as any reply threads\n    channel.state.addMessageSorted(updatedMessage);\n\n    // update the Channel component state\n    if (this.state.thread && updatedMessage.parent_id) {\n      extraState.threadMessages =\n        channel.state.threads[updatedMessage.parent_id] || [];\n    }\n    this.setState({ messages: channel.state.messages, ...extraState });\n  };\n\n  removeMessage = (message) => {\n    const channel = this.props.channel;\n    channel.state.removeMessage(message);\n    this.setState({ messages: channel.state.messages });\n  };\n\n  removeEphemeralMessages() {\n    const c = this.props.channel;\n    c.state.selectRegularMessages();\n    this.setState({ messages: c.state.messages });\n  }\n\n  createMessagePreview = (text, attachments, parent, mentioned_users) => {\n    // create a preview of the message\n    const clientSideID = `${this.props.client.userID}-` + uuidv4();\n    const message = {\n      text,\n      html: text,\n      __html: text,\n      //id: tmpID,\n      id: clientSideID,\n      type: 'regular',\n      status: 'sending',\n      user: {\n        id: this.props.client.userID,\n        ...this.props.client.user,\n      },\n      created_at: new Date(),\n      attachments,\n      mentioned_users,\n      reactions: [],\n    };\n\n    if (parent && parent.id) {\n      message.parent_id = parent.id;\n    }\n    return message;\n  };\n\n  _sendMessage = async (message) => {\n    const { text, attachments, id, parent_id, mentioned_users } = message;\n    const messageData = {\n      text,\n      attachments,\n      mentioned_users,\n      id,\n      parent_id,\n    };\n\n    try {\n      const messageResponse = await this.props.channel.sendMessage(messageData);\n      // replace it after send is completed\n      if (messageResponse.message) {\n        messageResponse.message.status = 'received';\n        this.updateMessage(messageResponse.message);\n      }\n    } catch (error) {\n      // set the message to failed..\n      message.status = 'failed';\n      this.updateMessage(message);\n    }\n  };\n\n  sendMessage = async ({\n    text,\n    attachments = [],\n    mentioned_users = [],\n    parent,\n  }) => {\n    // remove error messages upon submit\n    this.props.channel.state.filterErrorMessages();\n\n    // create a local preview message to show in the UI\n    const messagePreview = this.createMessagePreview(\n      text,\n      attachments,\n      parent,\n      mentioned_users,\n    );\n\n    // first we add the message to the UI\n    this.updateMessage(messagePreview, {\n      messageInput: '',\n      commands: [],\n      userAutocomplete: [],\n    });\n\n    await this._sendMessage(messagePreview);\n  };\n\n  retrySendMessage = async (message) => {\n    // set the message status to sending\n    message = message.asMutable();\n    message.status = 'sending';\n    this.updateMessage(message);\n    // actually try to send the message...\n    await this._sendMessage(message);\n  };\n\n  handleEvent = (e) => {\n    const { channel } = this.props;\n    let threadMessages = [];\n    const threadState = {};\n    if (this.state.thread) {\n      threadMessages = channel.state.threads[this.state.thread.id] || [];\n      threadState['threadMessages'] = threadMessages;\n    }\n\n    if (\n      this.state.thread &&\n      e.message &&\n      e.message.id === this.state.thread.id\n    ) {\n      threadState['thread'] = channel.state.messageToImmutable(e.message);\n    }\n\n    if (Object.keys(threadState).length > 0) {\n      // TODO: in theory we should do 1 setState call not 2,\n      // However the setStateThrottled doesn't support this\n      this.setState(threadState);\n    }\n\n    if (e.type === 'message.new') {\n      let mainChannelUpdated = true;\n      if (e.message.parent_id && !e.message.show_in_channel) {\n        mainChannelUpdated = false;\n      }\n\n      if (\n        mainChannelUpdated &&\n        e.message.user.id !== this.props.client.userID\n      ) {\n        if (Visibility.state() === 'visible') {\n          this._markReadThrottled(channel);\n        } else {\n          const unread = channel.countUnread(this.lastRead);\n          document.title = `(${unread}) ${this.originalTitle}`;\n        }\n      }\n    }\n\n    if (e.type === 'member.added') {\n      this.addToEventHistory(e);\n    }\n\n    if (e.type === 'member.removed') {\n      this.addToEventHistory(e);\n    }\n\n    this._setStateThrottled({\n      messages: channel.state.messages,\n      watchers: channel.state.watchers,\n      read: channel.state.read,\n      typing: channel.state.typing,\n      watcher_count: channel.state.watcher_count,\n    });\n  };\n\n  addToEventHistory = (e) => {\n    this.setState((prevState) => {\n      if (!prevState.messages) {\n        return;\n      }\n      const lastMessageId =\n        prevState.messages[prevState.messages.length - 1].id;\n      if (!prevState.eventHistory[lastMessageId])\n        return {\n          ...prevState,\n          eventHistory: {\n            ...prevState.eventHistory,\n            [lastMessageId]: [e],\n          },\n        };\n\n      return {\n        ...prevState,\n        eventHistory: {\n          ...prevState.eventHistory,\n          [lastMessageId]: [...prevState.eventHistory[lastMessageId], e],\n        },\n      };\n    });\n  };\n\n  markRead = (channel) => {\n    if (!channel.getConfig().read_events) {\n      return;\n    }\n    this.lastRead = new Date();\n\n    logChatPromiseExecution(channel.markRead(), 'mark read');\n\n    if (this.originalTitle) {\n      document.title = this.originalTitle;\n    }\n  };\n\n  listenToChanges() {\n    // The more complex sync logic is done in chat.js\n    // listen to client.connection.recovered and all channel events\n    this.props.client.on('connection.recovered', this.handleEvent);\n    const channel = this.props.channel;\n    channel.on(this.handleEvent);\n    this.boundMarkRead = this.markRead.bind(this, channel);\n    this.visibilityListener = Visibility.change((e, state) => {\n      if (state === 'visible') {\n        this.boundMarkRead();\n      }\n    });\n  }\n\n  loadMore = async () => {\n    // prevent duplicate loading events...\n    if (this.state.loadingMore) return;\n    this.setState({ loadingMore: true });\n\n    const oldestID = this.state.messages[0] ? this.state.messages[0].id : null;\n    const perPage = 100;\n    let queryResponse;\n    try {\n      queryResponse = await this.props.channel.query({\n        messages: { limit: perPage, id_lt: oldestID },\n      });\n    } catch (e) {\n      console.warn('message pagination request failed with error', e);\n      this.setState({ loadingMore: false });\n      return;\n    }\n    const hasMore = queryResponse.messages.length === perPage;\n\n    this._loadMoreFinishedDebounced(hasMore, this.props.channel.state.messages);\n  };\n\n  _onMentionsHoverOrClick = (e, mentioned_users) => {\n    if (!this.props.onMentionsHover && !this.props.onMentionsClick) return;\n\n    const tagName = e.target.tagName.toLowerCase();\n    const textContent = e.target.innerHTML.replace('*', '');\n    if (tagName === 'strong' && textContent[0] === '@') {\n      const userName = textContent.replace('@', '');\n      const user = mentioned_users.find(\n        (user) => user.name === userName || user.id === userName,\n      );\n      if (\n        this.props.onMentionsHover &&\n        typeof this.props.onMentionsHover === 'function' &&\n        e.type === 'mouseover'\n      ) {\n        this.props.onMentionsHover(e, user);\n      }\n      if (\n        this.props.onMentionsClick &&\n        e.type === 'click' &&\n        typeof this.props.onMentionsClick === 'function'\n      ) {\n        this.props.onMentionsClick(e, user);\n      }\n    }\n  };\n\n  loadMoreFinished = (hasMore, messages) => {\n    this.setState({\n      loadingMore: false,\n      hasMore,\n      messages,\n    });\n  };\n\n  getContext = () => ({\n    ...this.state,\n    client: this.props.client,\n    channel: this.props.channel,\n    Message: this.props.Message,\n    Attachment: this.props.Attachment,\n    multipleUploads: this.props.multipleUploads,\n    acceptedFiles: this.props.acceptedFiles,\n    maxNumberOfFiles: this.props.maxNumberOfFiles,\n    updateMessage: this.updateMessage,\n    removeMessage: this.removeMessage,\n    sendMessage: this.sendMessage,\n    retrySendMessage: this.retrySendMessage,\n    resetNotification: this.resetNotification,\n\n    loadMore: this.loadMore,\n    listenToScroll: this.listenToScroll,\n\n    // thread related\n    openThread: this.openThread,\n    closeThread: this.closeThread,\n    loadMoreThread: this.loadMoreThread,\n    onMentionsClick: this._onMentionsHoverOrClick,\n    onMentionsHover: this._onMentionsHoverOrClick,\n  });\n\n  renderComponent = () => this.props.children;\n\n  render() {\n    let core;\n    if (this.state.error) {\n      core = <div>Error: {this.state.error.message}</div>;\n    } else if (this.state.loading) {\n      core = <LoadingIndicator size={25} isLoading={true} />;\n    } else if (!this.props.channel || !this.props.channel.watch) {\n      core = <div>Channel Missing</div>;\n    } else {\n      core = (\n        <ChannelContext.Provider value={this.getContext()}>\n          <div className=\"str-chat__container\">{this.renderComponent()}</div>\n        </ChannelContext.Provider>\n      );\n    }\n\n    return (\n      <div className={`str-chat str-chat-channel ${this.props.theme}`}>\n        {core}\n      </div>\n    );\n  }\n}\n\nChannel = withChatContext(Channel);\n\nexport { Channel };\n","import React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\nimport { Avatar } from './Avatar';\nimport { withChannelContext } from '../context';\n\n/**\n * ChannelHeader - Render some basic information about this channel\n *\n * @example ./docs/ChannelHeader.md\n * @extends PureComponent\n */\nclass ChannelHeader extends PureComponent {\n  static propTypes = {\n    /** Via Context: the channel to render */\n    channel: PropTypes.object.isRequired,\n    /** Set title manually */\n    title: PropTypes.string,\n    /** Via Context: the number of users watching users */\n    watcher_count: PropTypes.number,\n    /** Show a little indicator that the channel is live right now */\n    live: PropTypes.bool,\n  };\n\n  render() {\n    return (\n      <div className=\"str-chat__header-livestream\">\n        {this.props.channel.data.image && (\n          <Avatar\n            image={this.props.channel.data.image}\n            shape=\"rounded\"\n            size={this.props.channel.type === 'commerce' ? 60 : 40}\n          />\n        )}\n        <div className=\"str-chat__header-livestream-left\">\n          <p className=\"str-chat__header-livestream-left--title\">\n            {this.props.title || this.props.channel.data.name}{' '}\n            {this.props.live && (\n              <span className=\"str-chat__header-livestream-left--livelabel\">\n                live\n              </span>\n            )}\n          </p>\n          {this.props.channel.data.subtitle && (\n            <p className=\"str-chat__header-livestream-left--subtitle\">\n              {this.props.channel.data.subtitle}\n            </p>\n          )}\n          <p className=\"str-chat__header-livestream-left--members\">\n            {!this.props.live && this.props.channel.data.member_count > 0 && (\n              <>{this.props.channel.data.member_count} members, </>\n            )}\n            {this.props.watcher_count} online\n          </p>\n        </div>\n        <div className=\"str-chat__header-livestream-right\">\n          <div className=\"str-chat__header-livestream-right-button-wrapper\">\n            <a\n              href=\"https://getstream.io/chat/\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              className=\"str-chat__square-button str-chat__header-livestream-right-button--info\"\n            >\n              <svg width=\"4\" height=\"14\" xmlns=\"http://www.w3.org/2000/svg\">\n                <path\n                  d=\"M3 13h1v.5H0V13h1V5.5H0V5h3v8zM1.994 3.516A1.507 1.507 0 1 1 1.995.502a1.507 1.507 0 0 1-.001 3.014z\"\n                  fillRule=\"evenodd\"\n                />\n              </svg>\n            </a>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nChannelHeader = withChannelContext(ChannelHeader);\nexport { ChannelHeader };\n","import React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\nimport { ChatAutoComplete } from './ChatAutoComplete';\n\nimport {\n  ImageDropzone,\n  ImagePreviewer,\n  FilePreviewer,\n  FileUploadButton,\n} from 'react-file-utils';\n\nimport { Picker } from 'emoji-mart';\n\n/**\n * MessageInputFlat - Large Message Input to be used for the MessageInput.\n * @example ./docs/MessageInputFlat.md\n */\nexport class MessageInputFlat extends PureComponent {\n  static propTypes = {\n    /** Set focus to the text input if this is enabled */\n    focus: PropTypes.bool,\n    /** Grow the textarea while you're typing */\n    grow: PropTypes.bool,\n    /** Disable the textarea */\n    disabled: PropTypes.bool,\n  };\n\n  static defaultProps = {\n    grow: true,\n    disabled: false,\n  };\n\n  renderUploads = () => (\n    <>\n      {this.props.imageOrder.length > 0 && (\n        <ImagePreviewer\n          imageUploads={this.props.imageOrder.map(\n            (id) => this.props.imageUploads[id],\n          )}\n          handleRemove={this.props.removeImage}\n          handleRetry={this.props.uploadImage}\n          handleFiles={this.props.uploadNewFiles}\n          multiple={this.props.multipleUploads}\n          disabled={\n            this.props.numberOfUploads >= this.props.maxNumberOfFiles\n              ? true\n              : false\n          }\n        />\n      )}\n      {this.props.fileOrder.length > 0 && (\n        <div className=\"str-chat__file-uploads\">\n          <FilePreviewer\n            uploads={this.props.fileOrder.map(\n              (id) => this.props.fileUploads[id],\n            )}\n            handleRemove={this.props.removeFile}\n            handleRetry={this.props.uploadFile}\n            handleFiles={this.props.uploadNewFiles}\n          />\n        </div>\n      )}\n    </>\n  );\n\n  renderEmojiPicker = () => {\n    if (this.props.emojiPickerIsOpen) {\n      return (\n        <div\n          className=\"str-chat__input-flat--emojipicker\"\n          ref={this.props.emojiPickerRef}\n        >\n          <Picker\n            emoji=\"point_up\"\n            title=\"Pick your emoji…\"\n            onSelect={this.props.onSelectEmoji}\n            color=\"#006CFF\"\n            showPreview={false}\n          />\n        </div>\n      );\n    }\n  };\n\n  render() {\n    return (\n      <div\n        className=\"str-chat__input-flat\"\n        style={{ position: 'relative', zIndex: 100, width: '100%' }}\n      >\n        <ImageDropzone\n          accept={this.props.acceptedFiles}\n          multiple={this.props.multipleUploads}\n          disabled={\n            this.props.numberOfUploads >= this.props.maxNumberOfFiles\n              ? true\n              : false\n          }\n          handleFiles={this.props.uploadNewFiles}\n        >\n          <div className=\"str-chat__input-flat-wrapper\">\n            {this.renderUploads()}\n            {this.renderEmojiPicker()}\n\n            <ChatAutoComplete\n              users={this.props.getUsers()}\n              commands={this.props.getCommands()}\n              innerRef={this.props.textareaRef}\n              handleSubmit={(e) => this.props.handleSubmit(e)}\n              onSelectItem={this.props.onSelectItem}\n              onChange={this.props.handleChange}\n              value={this.props.text}\n              rows={1}\n              placeholder=\"Type your message\"\n              onPaste={this.props.onPaste}\n              grow={this.props.grow}\n              onFocus={this.props.onFocus}\n              disabled={this.props.disabled}\n            />\n\n            <span\n              className=\"str-chat__input-flat-emojiselect\"\n              onClick={this.props.openEmojiPicker}\n            >\n              <svg width=\"28\" height=\"28\" xmlns=\"http://www.w3.org/2000/svg\">\n                <path\n                  d=\"M22.217 16.1c.483.25.674.849.423 1.334C21.163 20.294 17.771 22 14 22c-3.867 0-7.347-1.765-8.66-4.605a.994.994 0 0 1 .9-1.407c.385 0 .739.225.9.575C8.135 18.715 10.892 20 14 20c3.038 0 5.738-1.267 6.879-3.476a.99.99 0 0 1 1.338-.424zm1.583-3.652c.341.443.235 1.064-.237 1.384a1.082 1.082 0 0 1-.62.168c-.338 0-.659-.132-.858-.389-.212-.276-.476-.611-1.076-.611-.598 0-.864.337-1.08.614-.197.254-.517.386-.854.386-.224 0-.438-.045-.62-.167-.517-.349-.578-.947-.235-1.388.66-.847 1.483-1.445 2.789-1.445 1.305 0 2.136.6 2.79 1.448zm-14 0c.341.443.235 1.064-.237 1.384a1.082 1.082 0 0 1-.62.168c-.339 0-.659-.132-.858-.389C7.873 13.335 7.61 13 7.01 13c-.598 0-.864.337-1.08.614-.197.254-.517.386-.854.386-.224 0-.438-.045-.62-.167-.518-.349-.579-.947-.235-1.388C4.88 11.598 5.703 11 7.01 11c1.305 0 2.136.6 2.79 1.448zM14 0c7.732 0 14 6.268 14 14s-6.268 14-14 14S0 21.732 0 14 6.268 0 14 0zm8.485 22.485A11.922 11.922 0 0 0 26 14c0-3.205-1.248-6.219-3.515-8.485A11.922 11.922 0 0 0 14 2a11.922 11.922 0 0 0-8.485 3.515A11.922 11.922 0 0 0 2 14c0 3.205 1.248 6.219 3.515 8.485A11.922 11.922 0 0 0 14 26c3.205 0 6.219-1.248 8.485-3.515z\"\n                  fillRule=\"evenodd\"\n                />\n              </svg>\n            </span>\n            <FileUploadButton\n              multiple={this.props.multipleUploads}\n              disabled={\n                this.props.numberOfUploads >= this.props.maxNumberOfFiles\n                  ? true\n                  : false\n              }\n              accepts={this.props.acceptedFiles}\n              handleFiles={this.props.uploadNewFiles}\n            >\n              <span className=\"str-chat__input-flat-fileupload\">\n                <svg width=\"14\" height=\"14\" xmlns=\"http://www.w3.org/2000/svg\">\n                  <path\n                    d=\"M1.667.333h10.666c.737 0 1.334.597 1.334 1.334v10.666c0 .737-.597 1.334-1.334 1.334H1.667a1.333 1.333 0 0 1-1.334-1.334V1.667C.333.93.93.333 1.667.333zm2 1.334a1.667 1.667 0 1 0 0 3.333 1.667 1.667 0 0 0 0-3.333zm-2 9.333v1.333h10.666v-4l-2-2-4 4-2-2L1.667 11z\"\n                    fillRule=\"nonzero\"\n                  />\n                </svg>\n              </span>\n            </FileUploadButton>\n          </div>\n        </ImageDropzone>\n      </div>\n    );\n  }\n}\n","import React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { ChatAutoComplete } from './ChatAutoComplete';\nimport { Picker } from 'emoji-mart';\n\nimport {\n  ImageDropzone,\n  ImagePreviewer,\n  FilePreviewer,\n  FileUploadButton,\n} from 'react-file-utils';\n\n/**\n * MessageInputSmall - compact design to be used for the MessageInput. It has all the features of MessageInput minus the typing indicator.\n * @example ./docs/MessageInputSmall.md\n */\nexport class MessageInputSmall extends PureComponent {\n  static propTypes = {\n    /** Set focus to the text input if this is enabled */\n    focus: PropTypes.bool.isRequired,\n    /** Grow the textarea while you're typing */\n    grow: PropTypes.bool.isRequired,\n    /** Make the textarea disabled */\n    disabled: PropTypes.bool,\n  };\n\n  renderUploads = () => (\n    <>\n      {this.props.imageOrder.length > 0 && (\n        <ImagePreviewer\n          imageUploads={this.props.imageOrder.map(\n            (id) => this.props.imageUploads[id],\n          )}\n          handleRemove={this.props.removeImage}\n          handleRetry={this.props.uploadImage}\n          handleFiles={this.props.uploadNewFiles}\n          multiple={this.props.multipleUploads}\n          disabled={\n            this.props.numberOfUploads >= this.props.maxNumberOfFiles\n              ? true\n              : false\n          }\n        />\n      )}\n      {this.props.fileOrder.length > 0 && (\n        <FilePreviewer\n          uploads={this.props.fileOrder.map((id) => this.props.fileUploads[id])}\n          handleRemove={this.props.removeFile}\n          handleRetry={this.props.uploadFile}\n          handleFiles={this.props.uploadNewFiles}\n        />\n      )}\n    </>\n  );\n\n  renderEmojiPicker = () => {\n    if (this.props.emojiPickerIsOpen) {\n      return (\n        <div\n          className=\"str-chat__small-message-input-emojipicker\"\n          ref={this.props.emojiPickerRef}\n        >\n          <Picker\n            emoji=\"point_up\"\n            title=\"Pick your emoji…\"\n            onSelect={this.props.onSelectEmoji}\n            color=\"#006CFF\"\n            showPreview={false}\n          />\n        </div>\n      );\n    }\n  };\n\n  render() {\n    return (\n      <div style={{ position: 'relative', zIndex: 0, width: '100%' }}>\n        <ImageDropzone\n          accept={this.props.acceptedFiles}\n          multiple={this.props.multipleUploads}\n          disabled={\n            this.props.numberOfUploads >= this.props.maxNumberOfFiles\n              ? true\n              : false\n          }\n          handleFiles={this.props.uploadNewFiles}\n        >\n          <div className=\"str-chat__small-message-input\">\n            {this.renderUploads()}\n            {this.renderEmojiPicker()}\n            <ChatAutoComplete\n              users={this.props.getUsers()}\n              commands={this.props.getCommands()}\n              innerRef={this.props.textareaRef}\n              handleSubmit={this.props.handleSubmit}\n              onChange={this.props.handleChange}\n              value={this.props.text}\n              rows={1}\n              onSelectItem={this.props.onSelectItem}\n              placeholder=\"Type your message\"\n              onPaste={this.props.onPaste}\n              grow={this.props.grow}\n              disabled={this.props.disabled}\n            />\n\n            <span\n              className=\"str-chat__small-message-input-emojiselect\"\n              onClick={this.props.openEmojiPicker}\n            >\n              <svg width=\"14\" height=\"14\" xmlns=\"http://www.w3.org/2000/svg\">\n                <path\n                  d=\"M11.108 8.05a.496.496 0 0 1 .212.667C10.581 10.147 8.886 11 7 11c-1.933 0-3.673-.882-4.33-2.302a.497.497 0 0 1 .9-.417C4.068 9.357 5.446 10 7 10c1.519 0 2.869-.633 3.44-1.738a.495.495 0 0 1 .668-.212zm.792-1.826a.477.477 0 0 1-.119.692.541.541 0 0 1-.31.084.534.534 0 0 1-.428-.194c-.106-.138-.238-.306-.539-.306-.298 0-.431.168-.54.307A.534.534 0 0 1 9.538 7a.544.544 0 0 1-.31-.084.463.463 0 0 1-.117-.694c.33-.423.742-.722 1.394-.722.653 0 1.068.3 1.396.724zm-7 0a.477.477 0 0 1-.119.692.541.541 0 0 1-.31.084.534.534 0 0 1-.428-.194c-.106-.138-.238-.306-.539-.306-.299 0-.432.168-.54.307A.533.533 0 0 1 2.538 7a.544.544 0 0 1-.31-.084.463.463 0 0 1-.117-.694c.33-.423.742-.722 1.394-.722.653 0 1.068.3 1.396.724zM7 0a7 7 0 1 1 0 14A7 7 0 0 1 7 0zm4.243 11.243A5.96 5.96 0 0 0 13 7a5.96 5.96 0 0 0-1.757-4.243A5.96 5.96 0 0 0 7 1a5.96 5.96 0 0 0-4.243 1.757A5.96 5.96 0 0 0 1 7a5.96 5.96 0 0 0 1.757 4.243A5.96 5.96 0 0 0 7 13a5.96 5.96 0 0 0 4.243-1.757z\"\n                  fillRule=\"evenodd\"\n                />\n              </svg>\n            </span>\n            <FileUploadButton\n              multiple={this.props.multipleUploads}\n              disabled={\n                this.props.numberOfUploads >= this.props.maxNumberOfFiles\n                  ? true\n                  : false\n              }\n              accepts={this.props.acceptedFiles}\n              handleFiles={this.props.uploadNewFiles}\n            >\n              <span\n                className=\"str-chat__small-message-input-fileupload\"\n                onClick={this.props.openFilePanel}\n              >\n                <svg width=\"14\" height=\"14\" xmlns=\"http://www.w3.org/2000/svg\">\n                  <path\n                    d=\"M7 .5c3.59 0 6.5 2.91 6.5 6.5s-2.91 6.5-6.5 6.5S.5 10.59.5 7 3.41.5 7 .5zm0 12c3.031 0 5.5-2.469 5.5-5.5S10.031 1.5 7 1.5A5.506 5.506 0 0 0 1.5 7c0 3.034 2.469 5.5 5.5 5.5zM7.506 3v3.494H11v1.05H7.506V11h-1.05V7.544H3v-1.05h3.456V3h1.05z\"\n                    fillRule=\"nonzero\"\n                  />\n                </svg>\n              </span>\n            </FileUploadButton>\n          </div>\n        </ImageDropzone>\n      </div>\n    );\n  }\n}\n","import React, { PureComponent } from 'react';\nimport { Avatar } from './Avatar';\n\nexport class ChannelPreviewLastMessage extends PureComponent {\n  channelPreviewButton = React.createRef();\n\n  onSelectChannel = () => {\n    this.props.setActiveChannel(this.props.channel);\n    this.channelPreviewButton.current.blur();\n  };\n\n  render() {\n    const unreadClass =\n      this.props.unread_count >= 1 ? 'str-chat__channel-preview--unread' : '';\n    const activeClass = this.props.active\n      ? 'str-chat__channel-preview--active'\n      : '';\n    const name = this.props.channel.data.name || this.props.channel.cid;\n    return (\n      <div\n        className={`str-chat__channel-preview ${unreadClass} ${activeClass}`}\n      >\n        <button onClick={this.onSelectChannel} ref={this.channelPreviewButton}>\n          {this.props.unread_count >= 1 && (\n            <div className=\"str-chat__channel-preview--dot\" />\n          )}\n          <Avatar image={this.props.channel.data.image} />\n          <div className=\"str-chat__channel-preview-info\">\n            <span className=\"str-chat__channel-preview-title\">{name}</span>\n            <span className=\"str-chat__channel-preview-last-message\">\n              {!this.props.channel.state.messages[0]\n                ? 'Nothing yet...'\n                : this.props.latestMessage}\n            </span>\n            {this.props.unread_count >= 1 && (\n              <span className=\"str-chat__channel-preview-unread-count\">\n                {this.props.unread_count}\n              </span>\n            )}\n          </div>\n        </button>\n      </div>\n    );\n  }\n}\n","import React, { PureComponent } from 'react';\n\nexport class ChannelPreviewCountOnly extends PureComponent {\n  render() {\n    const unreadClass = this.props.unread_count >= 1 ? 'unread' : '';\n    const name = this.props.channel.data.name || this.props.channel.cid;\n\n    return (\n      <div className={unreadClass}>\n        <button\n          onClick={this.props.setActiveChannel.bind(this, this.props.channel)}\n        >\n          {' '}\n          {name} <span>{this.props.unread_count}</span>\n        </button>\n      </div>\n    );\n  }\n}\n","import React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { ChannelPreviewCountOnly } from './ChannelPreviewCountOnly';\n\nexport class ChannelPreview extends PureComponent {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      // unread: 0,\n      lastMessage: {},\n      lastRead: new Date(),\n    };\n  }\n\n  static propTypes = {\n    channel: PropTypes.object.isRequired,\n    activeChannel: PropTypes.object.isRequired,\n    setActiveChannel: PropTypes.func.isRequired,\n    Preview: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n  };\n\n  static defaultProps = {\n    Preview: ChannelPreviewCountOnly,\n  };\n\n  componentDidMount() {\n    // listen to change...\n    const channel = this.props.channel;\n    channel.on('message.new', this.handleEvent);\n  }\n\n  componentWillUnmount() {\n    const channel = this.props.channel;\n    channel.off('message.new', this.handleEvent);\n  }\n\n  handleEvent = (event) => {\n    const channel = this.props.channel;\n    const isActive = this.props.activeChannel.cid === channel.cid;\n    if (!isActive) {\n      const unread = channel.countUnread(this.state.lastRead);\n      this.setState({ lastMessage: event.message, unread });\n    } else {\n      this.setState({ lastMessage: event.message, unread: 0 });\n    }\n  };\n\n  componentDidUpdate(prevProps) {\n    if (this.props.activeChannel.cid !== prevProps.activeChannel.cid) {\n      const isActive = this.props.activeChannel.cid === this.props.channel.cid;\n      if (isActive) {\n        this.setState({ unread: 0, lastRead: new Date() });\n      }\n    }\n  }\n\n  getLatestMessage = () => {\n    const { channel } = this.props;\n\n    const latestMessage =\n      channel.state.messages[channel.state.messages.length - 1];\n\n    if (!latestMessage) {\n      return 'Nothing yet...';\n    }\n    if (latestMessage.deleted_at) {\n      return 'Message deleted';\n    }\n    if (latestMessage.text) {\n      return latestMessage.text.slice(0, 20);\n    } else {\n      if (latestMessage.command) {\n        return '/' + latestMessage.command;\n      }\n      if (latestMessage.attachments.length) {\n        return '🏙 Attachment...';\n      }\n      return 'Empty message...';\n    }\n  };\n\n  render() {\n    const props = { ...this.state, ...this.props };\n\n    const { Preview } = this.props;\n    return (\n      <Preview\n        {...props}\n        latestMessage={this.getLatestMessage()}\n        active={this.props.activeChannel.cid === this.props.channel.cid}\n      />\n    );\n  }\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { LoadingIndicator } from 'react-file-utils';\n\nexport class LoadMoreButton extends React.PureComponent {\n  static propTypes = {\n    onClick: PropTypes.func,\n  };\n\n  static defaultProps = {\n    children: 'Load more',\n  };\n\n  render() {\n    return (\n      <div className=\"str-chat__load-more-button\">\n        <button\n          className=\"str-chat__load-more-button__button\"\n          onClick={this.props.onClick}\n          disabled={this.props.refreshing}\n        >\n          {this.props.refreshing ? <LoadingIndicator /> : this.props.children}\n        </button>\n      </div>\n    );\n  }\n}\n","import * as React from 'react';\nimport { LoadMoreButton } from './LoadMoreButton';\nimport PropTypes from 'prop-types';\nimport { smartRender } from '../utils';\n\nexport class LoadMorePaginator extends React.PureComponent {\n  static propTypes = {\n    LoadMoreButton: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n  };\n  static defaultProps = {\n    LoadMoreButton,\n  };\n  render() {\n    return (\n      <React.Fragment>\n        {!this.props.reverse && this.props.children}\n        {this.props.hasNextPage\n          ? smartRender(this.props.LoadMoreButton, {\n              refreshing: this.props.refreshing,\n              onClick: this.props.loadNextPage,\n            })\n          : null}\n        {this.props.reverse && this.props.children}\n      </React.Fragment>\n    );\n  }\n}\n","import React from 'react';\n\n/**\n * LoadingChannels - Fancy loading indicator for the channel list\n *\n * @example ./docs/LoadingChannels.md\n */\nexport const LoadingChannels = () => (\n  <div className=\"str-chat__loading-channels\">\n    <div className=\"str-chat__loading-channels-item\">\n      <div className=\"str-chat__loading-channels-avatar\" />\n      <div className=\"str-chat__loading-channels-meta\">\n        <div className=\"str-chat__loading-channels-username\" />\n        <div className=\"str-chat__loading-channels-status\" />\n      </div>\n    </div>\n    <div className=\"str-chat__loading-channels-item\">\n      <div className=\"str-chat__loading-channels-avatar\" />\n      <div className=\"str-chat__loading-channels-meta\">\n        <div className=\"str-chat__loading-channels-username\" />\n        <div className=\"str-chat__loading-channels-status\" />\n      </div>\n    </div>\n    <div className=\"str-chat__loading-channels-item\">\n      <div className=\"str-chat__loading-channels-avatar\" />\n      <div className=\"str-chat__loading-channels-meta\">\n        <div className=\"str-chat__loading-channels-username\" />\n        <div className=\"str-chat__loading-channels-status\" />\n      </div>\n    </div>\n  </div>\n);\n","export default \"data:image/svg+xml,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%3F%3E%3Csvg%20width%3D%2278px%22%20height%3D%2278px%22%20viewBox%3D%220%200%2078%2078%22%20version%3D%221.1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%20%20%20%20%20%20%20%20%3Ctitle%3ECombined%20Shape%3C%2Ftitle%3E%20%20%20%20%3Cdesc%3ECreated%20with%20Sketch.%3C%2Fdesc%3E%20%20%20%20%3Cg%20id%3D%22Interactions%22%20stroke%3D%22none%22%20stroke-width%3D%221%22%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%3E%20%20%20%20%20%20%20%20%3Cg%20id%3D%22Connection-Error-_-Connectivity%22%20transform%3D%22translate%28-270.000000%2C%20-30.000000%29%22%20fill%3D%22%23CF1F25%22%3E%20%20%20%20%20%20%20%20%20%20%20%20%3Cg%20id%3D%22109-network-connection%22%20transform%3D%22translate%28270.000000%2C%2030.000000%29%22%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cpath%20d%3D%22M66.4609744%2C11.414231%20C81.6225232%2C26.5757798%2081.6225232%2C51.157545%2066.4609744%2C66.3188467%20C51.2994256%2C81.4803954%2026.7176604%2C81.4803954%2011.5563587%2C66.3188467%20C-3.60519004%2C51.1572979%20-3.60519004%2C26.5755327%2011.5563587%2C11.414231%20C26.7179075%2C-3.74731776%2051.2996727%2C-3.74731776%2066.4609744%2C11.414231%20Z%20M54.7853215%2C45.8823776%20L54.7853215%2C40.5882574%20C54.7853215%2C39.613638%2053.9952341%2C38.8235506%2053.0206147%2C38.8235506%20L44.9576695%2C38.8235506%20L41.428256%2C42.3529641%20L51.255555%2C42.3529641%20L51.255555%2C45.8823776%20L54.7853215%2C45.8823776%20Z%20M40.6659027%2C43.1153174%20L37.8988425%2C45.8823776%20L40.6659027%2C45.8823776%20L40.6659027%2C43.1153174%20Z%20M51.1764962%2C56.4702653%20L58.2353232%2C56.4702653%20C59.2099355%2C56.4702653%2060.00003%2C55.6801708%2060.00003%2C54.7055585%20L60.00003%2C51.176145%20C60.00003%2C50.2015327%2059.2099355%2C49.4114382%2058.2353232%2C49.4114382%20L51.1764962%2C49.4114382%20C50.2018839%2C49.4114382%2049.4117894%2C50.2015327%2049.4117894%2C51.176145%20L49.4117894%2C54.7055585%20C49.4117894%2C55.6801708%2050.2018839%2C56.4702653%2051.1764962%2C56.4702653%20Z%20M35.2941353%2C56.4702653%20L42.3529624%2C56.4702653%20C43.3275746%2C56.4702653%2044.1176691%2C55.6801708%2044.1176691%2C54.7055585%20L44.1176691%2C51.176145%20C44.1176691%2C50.2015327%2043.3275746%2C49.4114382%2042.3529624%2C49.4114382%20L35.2941353%2C49.4114382%20C34.319523%2C49.4114382%2033.5294285%2C50.2015327%2033.5294285%2C51.176145%20L33.5294285%2C54.7055585%20C33.5294285%2C55.6801708%2034.319523%2C56.4702653%2035.2941353%2C56.4702653%20Z%20M56.6964989%2C19.0874231%20C56.007381%2C18.3985134%2054.8903216%2C18.3985134%2054.2012036%2C19.087423%20L45.882376%2C27.4062507%20L45.882376%2C19.4117761%20C45.882376%2C18.4371568%2045.0922885%2C17.6470693%2044.1176692%2C17.6470693%20L33.5294286%2C17.6470693%20C32.5548092%2C17.6470694%2031.7647218%2C18.4371568%2031.7647218%2C19.4117761%20L31.7647218%2C30.0000167%20C31.7647219%2C30.9746363%2032.5548092%2C31.7647237%2033.5294285%2C31.7647237%20L41.5239031%2C31.7647237%20L34.4650761%2C38.8235508%20L24.7058947%2C38.8235508%20C23.7312753%2C38.8235508%2022.9411879%2C39.6136382%2022.9411879%2C40.5882575%20L22.9411879%2C45.8823778%20L26.4706014%2C45.8823778%20L26.4706014%2C42.3529643%20L30.9356624%2C42.3529643%20L23.8768354%2C49.4117914%20L19.4117743%2C49.4117914%20C18.4371549%2C49.4117914%2017.6470675%2C50.2018788%2017.6470675%2C51.1764981%20L17.6470675%2C54.7059117%20C17.6504049%2C54.9674302%2017.7129076%2C55.2248042%2017.8298886%2C55.4587302%20L16.4456526%2C56.8429662%20C15.7446193%2C57.5200453%2015.7252005%2C58.6372282%2016.4022825%2C59.3382615%20C17.0793616%2C60.0392948%2018.1965445%2C60.0587136%2018.8975778%2C59.3816316%20C18.9122847%2C59.3674273%2018.9267436%2C59.3529684%2018.940948%2C59.3382615%20L56.6964963%2C21.5830662%20C57.3856425%2C20.8939094%2057.3856425%2C19.7765747%2056.6964963%2C19.0874179%20Z%22%20id%3D%22Combined-Shape%22%3E%3C%2Fpath%3E%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fg%3E%20%20%20%20%20%20%20%20%3C%2Fg%3E%20%20%20%20%3C%2Fg%3E%3C%2Fsvg%3E\"","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { LoadingChannels } from './LoadingChannels';\n\nimport placeholder from '../assets/str-chat__connection-error.svg';\n\n/**\n * ChatDown - Indicator that chat is down or your network isn't working\n *\n * @example ./docs/ChatDown.md\n * @extends PureComponent\n */\nexport class ChatDown extends React.PureComponent {\n  static propTypes = {\n    /** The image url for this error */\n    image: PropTypes.string,\n    /** The type of error */\n    type: PropTypes.string,\n    /** The error message to show */\n    text: PropTypes.string,\n  };\n\n  static defaultProps = {\n    image: placeholder,\n    type: 'Error',\n    text: 'Error connecting to chat, refresh the page to try again.',\n  };\n\n  render() {\n    const { image, type, text } = this.props;\n\n    return (\n      <div className=\"str-chat__down\">\n        <LoadingChannels />\n        <div className=\"str-chat__down-main\">\n          <img src={image} />\n          <h1>{type}</h1>\n          <h3>{text}</h3>\n        </div>\n      </div>\n    );\n  }\n}\n","export default \"data:image/svg+xml,%3Csvg%20width%3D%228%22%20height%3D%225%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Cdefs%3E%3Cpath%20id%3D%22b%22%20d%3D%22M.667.667L4%204%207.333.667z%22%2F%3E%3Cfilter%20x%3D%22-7.5%25%22%20y%3D%22-15%25%22%20width%3D%22115%25%22%20height%3D%22160%25%22%20filterUnits%3D%22objectBoundingBox%22%20id%3D%22a%22%3E%3CfeOffset%20dy%3D%221%22%20in%3D%22SourceAlpha%22%20result%3D%22shadowOffsetOuter1%22%2F%3E%3CfeComposite%20in%3D%22shadowOffsetOuter1%22%20in2%3D%22SourceAlpha%22%20operator%3D%22out%22%20result%3D%22shadowOffsetOuter1%22%2F%3E%3CfeColorMatrix%20values%3D%220%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200.685858243%200%22%20in%3D%22shadowOffsetOuter1%22%2F%3E%3C%2Ffilter%3E%3C%2Fdefs%3E%3Cg%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%3E%3Cuse%20fill%3D%22%23000%22%20filter%3D%22url%28%23a%29%22%20xlink%3Ahref%3D%22%23b%22%2F%3E%3Cuse%20fill-opacity%3D%22.7%22%20fill%3D%22%23FFF%22%20xlink%3Ahref%3D%22%23b%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E\"","import React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\nimport { ChannelPreview } from './ChannelPreview';\nimport { ChannelPreviewLastMessage } from './ChannelPreviewLastMessage';\nimport { LoadingChannels } from './LoadingChannels';\nimport { Avatar } from './Avatar';\nimport { ChatDown } from './ChatDown';\nimport { withChatContext } from '../context';\n\nimport chevrondown from '../assets/str-chat__icon-chevron-down.svg';\n\n/**\n * ChannelList - A preview list of channels, allowing you to select the channel you want to open\n * @example ./examples/ChannelList.md\n */\nclass ChannelListTeam extends PureComponent {\n  static propTypes = {\n    /** The Preview to use, defaults to ChannelPreviewLastMessage */\n    Preview: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n\n    /** The loading indicator to use */\n    LoadingIndicator: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n  };\n\n  static defaultProps = {\n    Preview: ChannelPreviewLastMessage,\n    LoadingIndicator: LoadingChannels,\n  };\n\n  renderChannels = () =>\n    this.props.channels.map((c) => (\n      <ChannelPreview\n        {...this.props}\n        activeChannel={this.props.channel}\n        key={c.cid}\n        channel={c}\n        Preview={this.props.Preview}\n      />\n    ));\n\n  render() {\n    const { showSidebar } = this.props;\n    if (this.props.error) {\n      return <ChatDown type=\"Connection Error\" />;\n    } else if (this.props.loading) {\n      return <LoadingChannels />;\n    } else {\n      return (\n        <div className=\"str-chat__channel-list-team\">\n          {showSidebar && (\n            <div className=\"str-chat__channel-list-team__sidebar\">\n              <div className=\"str-chat__channel-list-team__sidebar--top\">\n                <Avatar\n                  image=\"https://cdn.dribbble.com/users/610788/screenshots/5157282/spacex.png\"\n                  size={50}\n                />\n              </div>\n            </div>\n          )}\n          <div className=\"str-chat__channel-list-team__main\">\n            <div className=\"str-chat__channel-list-team__header\">\n              <div className=\"str-chat__channel-list-team__header--left\">\n                <Avatar\n                  source={this.props.client.user.image}\n                  name={\n                    this.props.client.user.name || this.props.client.user.id\n                  }\n                  size={40}\n                />\n              </div>\n              <div className=\"str-chat__channel-list-team__header--middle\">\n                <div className=\"str-chat__channel-list-team__header--title\">\n                  {this.props.client.user.name || this.props.client.user.id}\n                </div>\n                <div\n                  className={`str-chat__channel-list-team__header--status ${this.props.client.user.status}`}\n                >\n                  {this.props.client.user.status}\n                </div>\n              </div>\n              <div className=\"str-chat__channel-list-team__header--right\">\n                <button className=\"str-chat__channel-list-team__header--button\">\n                  <img src={chevrondown} />\n                </button>\n              </div>\n            </div>\n            {this.props.children}\n          </div>\n        </div>\n      );\n    }\n  }\n}\n\nChannelListTeam = withChatContext(ChannelListTeam);\nexport { ChannelListTeam };\n","import React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\nimport Immutable from 'seamless-immutable';\nimport { isPromise } from '../utils';\n\nimport { ChannelPreviewLastMessage } from './ChannelPreviewLastMessage';\nimport { ChannelPreview } from './ChannelPreview';\nimport { LoadingIndicator } from './LoadingIndicator';\nimport { LoadMorePaginator } from './LoadMorePaginator';\nimport { withChatContext } from '../context';\nimport { ChannelListTeam } from './ChannelListTeam';\nimport { smartRender } from '../utils';\nimport uniqBy from 'lodash.uniqby';\n\n/**\n * ChannelList - A preview list of channels, allowing you to select the channel you want to open\n * @extends PureComponent\n * @example ./docs/ChannelList.md\n */\n\nclass ChannelList extends PureComponent {\n  static propTypes = {\n    /** The Preview to use, defaults to ChannelPreviewLastMessage */\n    Preview: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n\n    /** The loading indicator to use */\n    LoadingIndicator: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n    List: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n    Paginator: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n    /** Function that overrides default behaviour when new message is received on channel that is not being watched */\n    onMessageNew: PropTypes.func,\n    /** Function that overrides default behaviour when users gets added to a channel */\n    onAddedToChannel: PropTypes.func,\n    /** Function that overrides default behaviour when users gets removed from a channel */\n    onRemovedFromChannel: PropTypes.func,\n    /** Function that overrides default behaviour when channel gets updated */\n    onChannelUpdated: PropTypes.func,\n    /** Object containing query filters */\n    filters: PropTypes.object,\n    /** Object containing query options */\n    options: PropTypes.object,\n    /** Object containing sort parameters */\n    sort: PropTypes.object,\n  };\n\n  static defaultProps = {\n    Preview: ChannelPreviewLastMessage,\n    LoadingIndicator,\n    List: ChannelListTeam,\n    Paginator: LoadMorePaginator,\n\n    filters: {},\n    options: {},\n    sort: {},\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      // list of channels\n      channels: Immutable([]),\n      // loading channels\n      loadingChannels: true,\n      // error loading channels\n      refreshing: false,\n      hasNextPage: false,\n      offset: 0,\n      error: false,\n      connectionRecoveredCount: 0,\n      channelUpdateCount: 0,\n    };\n\n    this.menuButton = React.createRef();\n  }\n\n  static getDerivedStateFromError() {\n    return { error: true };\n  }\n\n  componentDidCatch(error, info) {\n    console.warn(error, info);\n  }\n\n  async componentDidMount() {\n    await this.queryChannels();\n    this.listenToChanges();\n  }\n\n  componentWillUnmount() {\n    this.props.client.off(this.handleEvent);\n  }\n\n  queryChannels = async () => {\n    const { options, filters, sort } = this.props;\n    const { offset } = this.state;\n\n    this.setState({ refreshing: true });\n\n    const newOptions = {\n      ...options,\n    };\n    if (!options.limit) newOptions.limit = 30;\n\n    const channelPromise = this.props.client.queryChannels(filters, sort, {\n      ...newOptions,\n      offset,\n    });\n\n    try {\n      let channelQueryResponse = channelPromise;\n      if (isPromise(channelQueryResponse)) {\n        channelQueryResponse = await channelPromise;\n        if (offset === 0 && channelQueryResponse.length >= 1) {\n          this.props.setActiveChannel(channelQueryResponse[0]);\n        }\n      }\n      this.setState((prevState) => {\n        const channels = [...prevState.channels, ...channelQueryResponse];\n        return {\n          channels, // not unique somehow needs more checking\n          loadingChannels: false,\n          offset: channels.length,\n          hasNextPage:\n            channelQueryResponse.length >= newOptions.limit ? true : false,\n          refreshing: false,\n        };\n      });\n    } catch (e) {\n      console.warn(e);\n      this.setState({ error: true, refreshing: false });\n    }\n  };\n\n  listenToChanges() {\n    this.props.client.on(this.handleEvent);\n  }\n\n  handleEvent = async (e) => {\n    if (e.type === 'user.presence.changed') {\n      let newChannels = this.state.channels;\n\n      newChannels = newChannels.map((channel) => {\n        if (!channel.state.members[e.user.id]) return channel;\n\n        channel.state.members.setIn([e.user.id, 'user'], e.user);\n\n        return channel;\n      });\n\n      this.setState({ channels: [...newChannels] });\n    }\n\n    if (e.type === 'message.new') {\n      this.moveChannelUp(e.cid);\n    }\n\n    // make sure to re-render the channel list after connection is recovered\n    if (e.type === 'connection.recovered') {\n      this.setState((prevState) => ({\n        connectionRecoveredCount: prevState.connectionRecoveredCount + 1,\n      }));\n    }\n\n    // move channel to start\n    if (e.type === 'notification.message_new') {\n      // if new message, put move channel up\n      // get channel if not in state currently\n      if (\n        this.props.onMessageNew &&\n        typeof this.props.onMessageNew === 'function'\n      ) {\n        this.props.onMessageNew(this, e);\n      } else {\n        const channel = await this.getChannel(e.channel.type, e.channel.id);\n        // move channel to starting position\n        this.setState((prevState) => ({\n          channels: uniqBy([channel, ...prevState.channels], 'cid'),\n        }));\n      }\n    }\n\n    // add to channel\n    if (e.type === 'notification.added_to_channel') {\n      if (\n        this.props.onAddedToChannel &&\n        typeof this.props.onAddedToChannel === 'function'\n      ) {\n        this.props.onAddedToChannel(this, e);\n      } else {\n        const channel = await this.getChannel(e.channel.type, e.channel.id);\n        this.setState((prevState) => ({\n          channels: uniqBy([channel, ...prevState.channels], 'cid'),\n        }));\n      }\n    }\n\n    // remove from channel\n    if (e.type === 'notification.removed_from_channel') {\n      if (\n        this.props.onRemovedFromChannel &&\n        typeof this.props.onRemovedFromChannel === 'function'\n      ) {\n        this.props.onRemovedFromChannel(this, e);\n      } else {\n        this.setState((prevState) => {\n          const channels = prevState.channels.filter(\n            (channel) => channel.cid !== e.channel.cid,\n          );\n          return {\n            channels,\n          };\n        });\n      }\n    }\n\n    // Update the channel with data\n    if (e.type === 'channel.updated') {\n      const channels = this.state.channels;\n      const channelIndex = channels.findIndex(\n        (channel) => channel.cid === e.channel.cid,\n      );\n      channels[channelIndex].data = Immutable(e.channel);\n\n      this.setState({\n        channels: [...channels],\n        channelUpdateCount: this.state.channelUpdateCount + 1,\n      });\n\n      if (\n        this.props.onChannelUpdated &&\n        typeof this.props.onChannelUpdated === 'function'\n      ) {\n        this.props.onChannelUpdated(this, e);\n      }\n    }\n\n    return null;\n  };\n\n  getChannel = async (type, id) => {\n    const channel = this.props.client.channel(type, id);\n    await channel.watch();\n    return channel;\n  };\n\n  moveChannelUp = (cid) => {\n    const channels = this.state.channels;\n\n    // get channel index\n    const channelIndex = this.state.channels.findIndex(\n      (channel) => channel.cid === cid,\n    );\n    if (channelIndex <= 0) return;\n\n    // get channel from channels\n    const channel = channels[channelIndex];\n\n    //remove channel from current position\n    channels.splice(channelIndex, 1);\n    //add channel at the start\n    channels.unshift(channel);\n\n    // set new channel state\n    this.setState({\n      channels: [...channels],\n    });\n  };\n\n  loadNextPage = () => {\n    this.queryChannels();\n  };\n\n  closeMenu = () => {\n    this.menuButton.current.checked = false;\n  };\n\n  // new channel list // *********************************\n\n  _renderChannel = (item) => {\n    const { Preview, setActiveChannel, channel } = this.props;\n    if (!item) return;\n    const props = {\n      channel: item,\n      activeChannel: channel,\n      closeMenu: this.closeMenu,\n      Preview,\n      setActiveChannel,\n      key: item.id,\n      // To force the update of preview component upon channel update.\n      channelUpdateCount: this.state.channelUpdateCount,\n      connectionRecoveredCount: this.state.connectionRecoveredCount,\n    };\n    return smartRender(ChannelPreview, { ...props });\n  };\n\n  render() {\n    const { List, Paginator } = this.props;\n    const { channels, loadingChannels, refreshing, hasNextPage } = this.state;\n    return (\n      <React.Fragment>\n        <input\n          type=\"checkbox\"\n          id=\"str-chat-channel-checkbox\"\n          ref={this.menuButton}\n          className=\"str-chat-channel-checkbox\"\n        />\n        <label\n          htmlFor=\"str-chat-channel-checkbox\"\n          className=\"str-chat-channel-list-burger\"\n        >\n          <div />\n        </label>\n        <div\n          className={`str-chat str-chat-channel-list ${this.props.theme} ${\n            this.props.open ? 'str-chat-channel-list--open' : ''\n          }`}\n          ref={this.channelList}\n        >\n          <List\n            loading={loadingChannels}\n            error={this.state.error}\n            channels={channels}\n            setActiveChannel={this.props.setActiveChannel}\n            activeChannel={this.props.channel}\n          >\n            {smartRender(Paginator, {\n              loadNextPage: this.loadNextPage,\n              hasNextPage,\n              refreshing,\n              children: channels.map((item) => this._renderChannel(item)),\n            })}\n          </List>\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nChannelList = withChatContext(ChannelList);\nexport { ChannelList };\n","import React, { PureComponent } from 'react';\nimport { Avatar } from './Avatar';\n\nimport truncate from 'lodash/truncate';\n\nexport class ChannelPreviewMessenger extends PureComponent {\n  channelPreviewButton = React.createRef();\n\n  onSelectChannel = () => {\n    this.props.setActiveChannel(this.props.channel);\n    this.channelPreviewButton.current.blur();\n    this.props.closeMenu();\n  };\n  render() {\n    const unreadClass =\n      this.props.unread >= 1\n        ? 'str-chat__channel-preview-messenger--unread'\n        : '';\n    const activeClass = this.props.active\n      ? 'str-chat__channel-preview-messenger--active'\n      : '';\n\n    const { channel } = this.props;\n\n    return (\n      <button\n        onClick={this.onSelectChannel}\n        ref={this.channelPreviewButton}\n        className={`str-chat__channel-preview-messenger ${unreadClass} ${activeClass}`}\n      >\n        <div className=\"str-chat__channel-preview-messenger--left\">\n          {<Avatar image={channel.data.image} size={40} />}\n        </div>\n        <div className=\"str-chat__channel-preview-messenger--right\">\n          <div className=\"str-chat__channel-preview-messenger--name\">\n            <span>{channel.data.name}</span>\n          </div>\n          <div className=\"str-chat__channel-preview-messenger--last-message\">\n            {!channel.state.messages[0]\n              ? 'Nothing yet...'\n              : truncate(this.props.latestMessage, 14)}\n          </div>\n        </div>\n      </button>\n    );\n  }\n}\n","import React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\nimport { ChannelPreview } from './ChannelPreview';\nimport { ChannelPreviewMessenger } from './ChannelPreviewMessenger';\nimport { LoadingChannels } from './LoadingChannels';\nimport { ChatDown } from './ChatDown';\nimport { withChatContext } from '../context';\n\n/**\n * ChannelList - A preview list of channels, allowing you to select the channel you want to open\n * @example ./examples/ChannelList.md\n */\nclass ChannelListMessenger extends PureComponent {\n  static propTypes = {\n    /** The Preview to use, defaults to ChannelPreviewMessenger */\n    Preview: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n\n    /** The loading indicator to use */\n    LoadingIndicator: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n  };\n\n  static defaultProps = {\n    Preview: ChannelPreviewMessenger,\n    LoadingIndicator: LoadingChannels,\n  };\n\n  renderLoading = () => {\n    const Loader = this.props.LoadingIndicator;\n    return <Loader isLoading={true} />;\n  };\n\n  renderChannels = () =>\n    this.props.channels.map((c) => (\n      <ChannelPreview\n        {...this.props}\n        activeChannel={this.props.channel}\n        key={c.cid}\n        channel={c}\n        closeMenu={this.props.closeMenu}\n        Preview={this.props.Preview}\n      />\n    ));\n\n  render() {\n    if (this.props.error) {\n      return <ChatDown type=\"Connection Error\" />;\n    } else if (this.props.loading) {\n      return <LoadingChannels />;\n    } else {\n      return (\n        <div className=\"str-chat__channel-list-messenger\">\n          <div className=\"str-chat__channel-list-messenger__main\">\n            {this.props.children}\n          </div>\n        </div>\n      );\n    }\n  }\n}\n\nChannelListMessenger = withChatContext(ChannelListMessenger);\nexport { ChannelListMessenger };\n","import React from 'react';\nimport { Avatar } from './Avatar';\n\nexport class ChannelPreviewCompact extends React.PureComponent {\n  channelPreviewButton = React.createRef();\n\n  onSelectChannel = () => {\n    this.props.setActiveChannel(this.props.channel);\n    this.channelPreviewButton.current.blur();\n  };\n  render() {\n    const unreadClass =\n      this.props.unread_count >= 1\n        ? 'str-chat__channel-preview-compact--unread'\n        : '';\n    const activeClass = this.props.active\n      ? 'str-chat__channel-preview-compact--active'\n      : '';\n    const name = this.props.channel.data.name || this.props.channel.cid;\n    return (\n      <button\n        onClick={this.onSelectChannel}\n        ref={this.channelPreviewButton}\n        className={`str-chat__channel-preview-compact ${unreadClass} ${activeClass}`}\n      >\n        <div className=\"str-chat__channel-preview-compact--left\">\n          {true && <Avatar image={this.props.channel.data.image} size={20} />}\n        </div>\n        <div className=\"str-chat__channel-preview-compact--right\">{name}</div>\n      </button>\n    );\n  }\n}\n","/* eslint-disable */\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nexport default class InfiniteScroll extends Component {\n  static propTypes = {\n    children: PropTypes.node.isRequired,\n    element: PropTypes.node,\n    hasMore: PropTypes.bool,\n    initialLoad: PropTypes.bool,\n    isReverse: PropTypes.bool,\n    loader: PropTypes.node,\n    loadMore: PropTypes.func.isRequired,\n    pageStart: PropTypes.number,\n    ref: PropTypes.func,\n    threshold: PropTypes.number,\n    useCapture: PropTypes.bool,\n    useWindow: PropTypes.bool,\n  };\n\n  static defaultProps = {\n    element: 'div',\n    hasMore: false,\n    initialLoad: true,\n    pageStart: 0,\n    ref: null,\n    threshold: 250,\n    useWindow: true,\n    isReverse: false,\n    useCapture: false,\n    loader: null,\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.scrollListener = this.scrollListener.bind(this);\n  }\n\n  componentDidMount() {\n    this.pageLoaded = this.props.pageStart;\n    this.attachScrollListener();\n  }\n\n  componentDidUpdate() {\n    this.attachScrollListener();\n  }\n\n  componentWillUnmount() {\n    this.detachScrollListener();\n    this.detachMousewheelListener();\n  }\n\n  // Set a defaut loader for all your `InfiniteScroll` components\n  setDefaultLoader(loader) {\n    this.defaultLoader = loader;\n  }\n\n  detachMousewheelListener() {\n    let scrollEl = window;\n    if (this.props.useWindow === false) {\n      scrollEl = this.scrollComponent.parentNode;\n    }\n\n    scrollEl.removeEventListener(\n      'mousewheel',\n      this.mousewheelListener,\n      this.props.useCapture,\n    );\n  }\n\n  detachScrollListener() {\n    let scrollEl = window;\n    if (this.props.useWindow === false) {\n      scrollEl = this.getParentElement(this.scrollComponent);\n    }\n\n    scrollEl.removeEventListener(\n      'scroll',\n      this.scrollListener,\n      this.props.useCapture,\n    );\n    scrollEl.removeEventListener(\n      'resize',\n      this.scrollListener,\n      this.props.useCapture,\n    );\n  }\n\n  getParentElement(el) {\n    return el && el.parentNode;\n  }\n\n  filterProps(props) {\n    return props;\n  }\n\n  attachScrollListener() {\n    if (\n      !this.props.hasMore ||\n      this.props.isLoading ||\n      !this.getParentElement(this.scrollComponent)\n    ) {\n      return;\n    }\n\n    let scrollEl = window;\n    if (this.props.useWindow === false) {\n      scrollEl = this.getParentElement(this.scrollComponent);\n    }\n\n    scrollEl.addEventListener(\n      'mousewheel',\n      this.mousewheelListener,\n      this.props.useCapture,\n    );\n    scrollEl.addEventListener(\n      'scroll',\n      this.scrollListener,\n      this.props.useCapture,\n    );\n    scrollEl.addEventListener(\n      'resize',\n      this.scrollListener,\n      this.props.useCapture,\n    );\n\n    if (this.props.initialLoad) {\n      this.scrollListener();\n    }\n  }\n\n  mousewheelListener(e) {\n    // Prevents Chrome hangups\n    // See: https://stackoverflow.com/questions/47524205/random-high-content-download-time-in-chrome/47684257#47684257\n    if (e.deltaY === 1) {\n      e.preventDefault();\n    }\n  }\n\n  scrollListener() {\n    const el = this.scrollComponent;\n    const scrollEl = window;\n    const parentNode = this.getParentElement(el);\n\n    let offset;\n    if (this.props.useWindow) {\n      const doc =\n        document.documentElement || document.body.parentNode || document.body;\n      const scrollTop =\n        scrollEl.pageYOffset !== undefined\n          ? scrollEl.pageYOffset\n          : doc.scrollTop;\n      if (this.props.isReverse) {\n        offset = scrollTop;\n      } else {\n        offset = this.calculateOffset(el, scrollTop);\n      }\n    } else if (this.props.isReverse) {\n      offset = parentNode.scrollTop;\n    } else {\n      offset = el.scrollHeight - parentNode.scrollTop - parentNode.clientHeight;\n    }\n\n    // Here we make sure the element is visible as well as checking the offset\n    if (\n      offset < Number(this.props.threshold) &&\n      (el && el.offsetParent !== null)\n    ) {\n      this.detachScrollListener();\n      // Call loadMore after detachScrollListener to allow for non-async loadMore functions\n      if (typeof this.props.loadMore === 'function') {\n        this.props.loadMore((this.pageLoaded += 1));\n      }\n    }\n  }\n\n  calculateOffset(el, scrollTop) {\n    if (!el) {\n      return 0;\n    }\n\n    return (\n      this.calculateTopPosition(el) +\n      (el.offsetHeight - scrollTop - window.innerHeight)\n    );\n  }\n\n  calculateTopPosition(el) {\n    if (!el) {\n      return 0;\n    }\n    return el.offsetTop + this.calculateTopPosition(el.offsetParent);\n  }\n\n  render() {\n    const renderProps = this.filterProps(this.props);\n    const {\n      children,\n      element,\n      hasMore,\n      initialLoad,\n      isReverse,\n      loader,\n      loadMore,\n      pageStart,\n      ref,\n      threshold,\n      useCapture,\n      useWindow,\n      isLoading,\n      ...props\n    } = renderProps;\n\n    props.ref = (node) => {\n      this.scrollComponent = node;\n      if (ref) {\n        ref(node);\n      }\n    };\n\n    const childrenArray = [children];\n    if (isLoading) {\n      if (loader) {\n        isReverse ? childrenArray.unshift(loader) : childrenArray.push(loader);\n      } else if (this.defaultLoader) {\n        isReverse\n          ? childrenArray.unshift(this.defaultLoader)\n          : childrenArray.push(this.defaultLoader);\n      }\n    }\n    return React.createElement(element, props, childrenArray);\n  }\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { LoadingIndicator } from 'react-file-utils';\n\nimport InfiniteScroll from './InfiniteScroll';\n\nexport class InfiniteScrollPaginator extends React.Component {\n  static propTypes = {\n    /** callback to load the next page */\n    loadNextPage: PropTypes.func,\n    /** indicates if there is a next page to load */\n    hasNextPage: PropTypes.bool,\n    /** indicates if there there's currently any refreshing taking place */\n    refreshing: PropTypes.bool,\n    /** display the items in opposite order */\n    reverse: PropTypes.bool,\n    /** Offset from when to start the loadNextPage call */\n    threshold: PropTypes.number,\n    /** The loading indicator to use */\n    LoadingIndicator: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n  };\n\n  static defaultProps = {\n    LoadingIndicator: <LoadingIndicator />,\n  };\n\n  render() {\n    return (\n      <InfiniteScroll\n        loadMore={this.props.loadNextPage}\n        hasMore={this.props.hasNextPage}\n        isLoading={this.props.refreshing}\n        isReverse={this.props.reverse}\n        threshold={this.props.threshold}\n        useWindow={false}\n        loader={\n          <div\n            style={{\n              display: 'flex',\n              alignItems: 'center',\n              justifyContent: 'center',\n              padding: 10,\n            }}\n            key=\"loadingindicator\"\n          >\n            <LoadingIndicator />\n          </div>\n        }\n      >\n        {this.props.children}\n      </InfiniteScroll>\n    );\n  }\n}\n","import React, { PureComponent } from 'react';\nimport { Attachment } from './Attachment';\nimport { ReactionsList } from './ReactionsList';\nimport { Avatar } from './Avatar';\nimport { Gallery } from './Gallery';\nimport { ReactionSelector } from './ReactionSelector';\nimport { MessageRepliesCountButton } from './MessageRepliesCountButton';\n\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\n\nimport { isOnlyEmojis, renderText } from '../utils';\n\n/**\n * MessageCommerce - Render component, should be used together with the Message component\n *\n * @example ./docs/MessageSimple.md\n * @extends PureComponent\n */\nexport class MessageCommerce extends PureComponent {\n  static propTypes = {\n    /** The message object */\n    message: PropTypes.object,\n    /** The attachment component */\n    Attachment: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n  };\n\n  static defaultProps = {\n    Attachment,\n  };\n\n  state = {\n    isFocused: false,\n    actionsBoxOpen: false,\n    showDetailedReactions: false,\n  };\n\n  messageActionsRef = React.createRef();\n  reactionSelectorRef = React.createRef();\n\n  _onClickOptionsAction = () => {\n    this.setState(\n      {\n        actionsBoxOpen: true,\n      },\n      () => document.addEventListener('click', this.hideOptions, false),\n    );\n  };\n\n  _hideOptions = () => {\n    this.setState({\n      actionsBoxOpen: false,\n    });\n    document.removeEventListener('click', this.hideOptions, false);\n  };\n\n  _clickReactionList = () => {\n    this.setState(\n      () => ({\n        showDetailedReactions: true,\n      }),\n      () => {\n        document.addEventListener('click', this._closeDetailedReactions);\n      },\n    );\n  };\n\n  _closeDetailedReactions = (e) => {\n    if (\n      !this.reactionSelectorRef.current.reactionSelector.current.contains(\n        e.target,\n      )\n    ) {\n      this.setState(\n        () => ({\n          showDetailedReactions: false,\n        }),\n        () => {\n          document.removeEventListener('click', this._closeDetailedReactions);\n        },\n      );\n    } else {\n      return {};\n    }\n  };\n\n  componentWillUnmount() {\n    if (!this.props.message.deleted_at) {\n      document.removeEventListener('click', this._closeDetailedReactions);\n    }\n  }\n\n  isMine() {\n    return !this.props.Message.isMyMessage(this.props.message);\n  }\n\n  renderOptions() {\n    if (\n      this.props.message.type === 'error' ||\n      this.props.message.type === 'system' ||\n      this.props.message.type === 'ephemeral' ||\n      this.props.message.status === 'sending' ||\n      this.props.message.status === 'failed' ||\n      !this.props.channelConfig.reactions ||\n      this.props.initialMessage\n    ) {\n      return;\n    }\n\n    return (\n      <div className=\"str-chat__message-commerce__actions\">\n        <div\n          className=\"str-chat__message-commerce__actions__action str-chat__message-commerce__actions__action--reactions\"\n          onClick={this._clickReactionList}\n        >\n          <svg width=\"14\" height=\"14\" xmlns=\"http://www.w3.org/2000/svg\">\n            <path\n              d=\"M11.108 8.05a.496.496 0 0 1 .212.667C10.581 10.147 8.886 11 7 11c-1.933 0-3.673-.882-4.33-2.302a.497.497 0 0 1 .9-.417C4.068 9.357 5.446 10 7 10c1.519 0 2.869-.633 3.44-1.738a.495.495 0 0 1 .668-.212zm.792-1.826a.477.477 0 0 1-.119.692.541.541 0 0 1-.31.084.534.534 0 0 1-.428-.194c-.106-.138-.238-.306-.539-.306-.298 0-.431.168-.54.307A.534.534 0 0 1 9.538 7a.544.544 0 0 1-.31-.084.463.463 0 0 1-.117-.694c.33-.423.742-.722 1.394-.722.653 0 1.068.3 1.396.724zm-7 0a.477.477 0 0 1-.119.692.541.541 0 0 1-.31.084.534.534 0 0 1-.428-.194c-.106-.138-.238-.306-.539-.306-.299 0-.432.168-.54.307A.533.533 0 0 1 2.538 7a.544.544 0 0 1-.31-.084.463.463 0 0 1-.117-.694c.33-.423.742-.722 1.394-.722.653 0 1.068.3 1.396.724zM7 0a7 7 0 1 1 0 14A7 7 0 0 1 7 0zm4.243 11.243A5.96 5.96 0 0 0 13 7a5.96 5.96 0 0 0-1.757-4.243A5.96 5.96 0 0 0 7 1a5.96 5.96 0 0 0-4.243 1.757A5.96 5.96 0 0 0 1 7a5.96 5.96 0 0 0 1.757 4.243A5.96 5.96 0 0 0 7 13a5.96 5.96 0 0 0 4.243-1.757z\"\n              fillRule=\"evenodd\"\n            />\n          </svg>\n        </div>\n      </div>\n    );\n  }\n\n  render() {\n    const { message, groupStyles } = this.props;\n    const Attachment = this.props.Attachment;\n    const when = moment(message.created_at).format('LT');\n\n    const messageClasses = this.isMine()\n      ? 'str-chat__message-commerce str-chat__message-commerce--left'\n      : 'str-chat__message-commerce str-chat__message-commerce--right';\n\n    const hasAttachment = Boolean(\n      message.attachments && message.attachments.length,\n    );\n    const images =\n      hasAttachment &&\n      message.attachments.filter((item) => item.type === 'image');\n    const hasReactions = Boolean(\n      message.latest_reactions && message.latest_reactions.length,\n    );\n\n    if (\n      message.type === 'message.read' ||\n      message.deleted_at ||\n      message.type === 'message.date'\n    ) {\n      return null;\n    }\n\n    if (message.deleted_at) {\n      return (\n        <React.Fragment>\n          <span\n            key={message.id}\n            className={`${messageClasses} str-chat__message--deleted`}\n          >\n            This message was deleted...\n          </span>\n          <div className=\"clearfix\" />\n        </React.Fragment>\n      );\n    }\n    return (\n      <React.Fragment>\n        <div\n          key={message.id}\n          className={`\n\t\t\t\t\t\t${messageClasses}\n\t\t\t\t\t\tstr-chat__message-commerce--${message.type}\n\t\t\t\t\t\t${\n              message.text\n                ? 'str-chat__message-commerce--has-text'\n                : 'str-chat__message-commerce--has-no-text'\n            }\n\t\t\t\t\t\t${hasAttachment ? 'str-chat__message-commerce--has-attachment' : ''}\n\t\t\t\t\t\t${hasReactions ? 'str-chat__message-commerce--with-reactions' : ''}\n\t\t\t\t\t\t${`str-chat__message-commerce--${groupStyles[0]}`}\n\t\t\t\t\t`.trim()}\n          onMouseLeave={this._hideOptions}\n          ref={this.messageRef}\n        >\n          {(groupStyles[0] === 'bottom' || groupStyles[0] === 'single') && (\n            <Avatar\n              image={message.user.image}\n              size={32}\n              name={message.user.name || message.user.id}\n            />\n          )}\n          <div className=\"str-chat__message-commerce-inner\">\n            {!message.text && (\n              <React.Fragment>\n                {this.renderOptions()}\n                {/* if reactions show them */}\n                {hasReactions > 0 && !this.state.showDetailedReactions && (\n                  <ReactionsList\n                    reactions={message.latest_reactions}\n                    reaction_counts={message.reaction_counts}\n                    onClick={this._clickReactionList}\n                  />\n                )}\n                {this.state.showDetailedReactions && (\n                  <ReactionSelector\n                    reverse={false}\n                    handleReaction={this.props.handleReaction}\n                    actionsEnabled={this.props.actionsEnabled}\n                    detailedView\n                    reaction_counts={message.reaction_counts}\n                    latest_reactions={message.latest_reactions}\n                    ref={this.reactionSelectorRef}\n                  />\n                )}\n              </React.Fragment>\n            )}\n\n            {hasAttachment &&\n              images.length <= 1 &&\n              message.attachments.map((attachment, index) => (\n                <Attachment\n                  key={`${message.id}-${index}`}\n                  attachment={attachment}\n                  actionHandler={this.props.handleAction}\n                />\n              ))}\n            {images.length > 1 && <Gallery images={images} />}\n\n            {message.text && (\n              <div className=\"str-chat__message-commerce-text\">\n                <div\n                  className={`str-chat__message-commerce-text-inner\n\t\t\t\t\t\t\t\t\t${hasAttachment ? 'str-chat__message-commerce-text-inner--has-attachment' : ''}\n\t\t\t\t\t\t\t\t\t${\n                    isOnlyEmojis(message.text)\n                      ? 'str-chat__message-commerce-text-inner--is-emoji'\n                      : ''\n                  }\n                `.trim()}\n                  onMouseOver={this.props.onMentionsHoverMessage}\n                  onClick={this.props.onMentionsClickMessage}\n                >\n                  {message.type === 'error' && (\n                    <div className=\"str-chat__commerce-message--error-message\">\n                      Error · Unsent\n                    </div>\n                  )}\n\n                  {this.props.unsafeHTML ? (\n                    <div dangerouslySetInnerHTML={{ __html: message.html }} />\n                  ) : (\n                    renderText(message)\n                  )}\n\n                  {/* if reactions show them */}\n                  {hasReactions > 0 && !this.state.showDetailedReactions && (\n                    <ReactionsList\n                      reverse\n                      reactions={message.latest_reactions}\n                      reaction_counts={message.reaction_counts}\n                      onClick={this._clickReactionList}\n                    />\n                  )}\n                  {this.state.showDetailedReactions && (\n                    <ReactionSelector\n                      reverse={false}\n                      handleReaction={this.props.handleReaction}\n                      actionsEnabled={this.props.actionsEnabled}\n                      detailedView\n                      reaction_counts={message.reaction_counts}\n                      latest_reactions={message.latest_reactions}\n                      ref={this.reactionSelectorRef}\n                    />\n                  )}\n                </div>\n\n                {message.text && this.renderOptions()}\n              </div>\n            )}\n            {!this.props.threadList && (\n              <div className=\"str-chat__message-commerce-reply-button\">\n                <MessageRepliesCountButton\n                  onClick={this.props.openThread}\n                  reply_count={message.reply_count}\n                />\n              </div>\n            )}\n            <div className={`str-chat__message-commerce-data`}>\n              {this.isMine() ? (\n                <span className=\"str-chat__message-commerce-name\">\n                  {message.user.name || message.user.id}\n                </span>\n              ) : null}\n              <span className=\"str-chat__message-commerce-timestamp\">\n                {when}\n              </span>\n            </div>\n          </div>\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { NimbleEmoji } from 'emoji-mart';\n\nimport { defaultMinimalEmojis, emojiSetDef, emojiData } from '../utils';\n\nexport class SimpleReactionsList extends React.PureComponent {\n  static propTypes = {\n    reactions: PropTypes.array,\n    reaction_coutns: PropTypes.object,\n    renderReactions: PropTypes.func,\n    showTooltip: PropTypes.bool,\n    /** Provide a list of reaction options [{name: 'angry', emoji: 'angry'}] */\n    reactionOptions: PropTypes.array,\n  };\n\n  static defaultProps = {\n    showTooltip: true,\n    reactionOptions: defaultMinimalEmojis,\n    emojiSetDef,\n  };\n\n  state = {\n    showTooltip: false,\n    users: [],\n  };\n\n  showTooltip = () => {\n    this.setState({\n      showTooltip: true,\n    });\n  };\n\n  hideTooltip = () => {\n    this.setState({\n      showTooltip: false,\n    });\n  };\n\n  handleReaction = (e, type) => {\n    if (e !== undefined && e.preventDefault) {\n      e.preventDefault();\n    }\n    this.props.handleReaction(type);\n    this.setUsernames(type);\n  };\n\n  getReactionCount = () => {\n    const reaction_counts = this.props.reaction_counts;\n    let count = null;\n    if (\n      reaction_counts !== null &&\n      reaction_counts !== undefined &&\n      Object.keys(reaction_counts).length > 0\n    ) {\n      count = 0;\n      Object.keys(reaction_counts).map(\n        (key) => (count += reaction_counts[key]),\n      );\n    }\n    return count;\n  };\n\n  renderUsers = (users) =>\n    users.map((user, i) => {\n      let text = user;\n      if (i + 1 < users.length) {\n        text += ', ';\n      }\n      return (\n        <span className=\"latest-user-username\" key={`key-${i}-${user}`}>\n          {text}\n        </span>\n      );\n    });\n\n  getReactionsByType = (reactions) => {\n    const reactionsByType = {};\n    reactions.map((item) => {\n      if (reactionsByType[item.type] === undefined) {\n        return (reactionsByType[item.type] = [item]);\n      } else {\n        return (reactionsByType[item.type] = [\n          ...reactionsByType[item.type],\n          item,\n        ]);\n      }\n    });\n    return reactionsByType;\n  };\n\n  renderReactions = (reactions) => {\n    const reactionsByType = this.getReactionsByType(reactions);\n    const reactionsEmojis = this.props.reactionOptions.reduce(\n      (acc, cur) => ({ ...acc, [cur.id]: cur }),\n      {},\n    );\n    return Object.keys(reactionsByType).map((type, i) => (\n      <li\n        className=\"str-chat__simple-reactions-list-item\"\n        key={`${reactionsByType[type][0].id}-${i}`}\n        onClick={(e) => this.handleReaction(e, type)}\n      >\n        <span onMouseEnter={() => this.setUsernames(type)}>\n          <NimbleEmoji\n            emoji={reactionsEmojis[type]}\n            {...emojiSetDef}\n            size={13}\n            data={emojiData}\n          />\n          &nbsp;\n        </span>\n      </li>\n    ));\n  };\n\n  getUsernames = (reactions) => {\n    const usernames = reactions.map((item) =>\n      item.user !== null ? item.user.name || item.user.id : 'null',\n    );\n    return usernames;\n  };\n\n  setUsernames = (type) => {\n    const reactionsByType = this.getReactionsByType(this.props.reactions);\n\n    const reactions = reactionsByType[type];\n    const users = this.getUsernames(reactions);\n\n    this.setState(\n      {\n        users,\n      },\n      () => this.showTooltip(),\n    );\n  };\n\n  renderUsernames = (users) => {\n    const str = users.join(', ');\n    return str;\n  };\n\n  render() {\n    const { reactions } = this.props;\n    if (!reactions || reactions.length === 0) {\n      return null;\n    }\n    return (\n      <ul\n        className=\"str-chat__simple-reactions-list\"\n        onMouseLeave={this.hideTooltip}\n      >\n        {this.state.showTooltip && (\n          <div\n            className=\"str-chat__simple-reactions-list-tooltip\"\n            ref={this.reactionSelectorTooltip}\n          >\n            <div className=\"arrow\" />\n            {this.renderUsernames(this.state.users)}\n          </div>\n        )}\n        {this.renderReactions(reactions)}\n        {reactions.length !== 0 && (\n          <li className=\"str-chat__simple-reactions-list-item--last-number\">\n            {this.getReactionCount()}\n          </li>\n        )}\n      </ul>\n    );\n  }\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\n\nimport { Avatar } from './Avatar';\nimport { Attachment } from './Attachment';\nimport { MessageActionsBox } from './MessageActionsBox';\nimport { ReactionSelector } from './ReactionSelector';\nimport { SimpleReactionsList } from './SimpleReactionsList';\nimport { MessageInput } from './MessageInput';\nimport { EditMessageForm } from './EditMessageForm';\nimport { Gallery } from './Gallery';\nimport { MessageRepliesCountButton } from './MessageRepliesCountButton';\n\nimport { isOnlyEmojis, renderText } from '../utils';\n\nconst reactionSvg =\n  '<svg width=\"14\" height=\"14\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M11.108 8.05a.496.496 0 0 1 .212.667C10.581 10.147 8.886 11 7 11c-1.933 0-3.673-.882-4.33-2.302a.497.497 0 0 1 .9-.417C4.068 9.357 5.446 10 7 10c1.519 0 2.869-.633 3.44-1.738a.495.495 0 0 1 .668-.212zm.792-1.826a.477.477 0 0 1-.119.692.541.541 0 0 1-.31.084.534.534 0 0 1-.428-.194c-.106-.138-.238-.306-.539-.306-.298 0-.431.168-.54.307A.534.534 0 0 1 9.538 7a.544.544 0 0 1-.31-.084.463.463 0 0 1-.117-.694c.33-.423.742-.722 1.394-.722.653 0 1.068.3 1.396.724zm-7 0a.477.477 0 0 1-.119.692.541.541 0 0 1-.31.084.534.534 0 0 1-.428-.194c-.106-.138-.238-.306-.539-.306-.299 0-.432.168-.54.307A.533.533 0 0 1 2.538 7a.544.544 0 0 1-.31-.084.463.463 0 0 1-.117-.694c.33-.423.742-.722 1.394-.722.653 0 1.068.3 1.396.724zM7 0a7 7 0 1 1 0 14A7 7 0 0 1 7 0zm4.243 11.243A5.96 5.96 0 0 0 13 7a5.96 5.96 0 0 0-1.757-4.243A5.96 5.96 0 0 0 7 1a5.96 5.96 0 0 0-4.243 1.757A5.96 5.96 0 0 0 1 7a5.96 5.96 0 0 0 1.757 4.243A5.96 5.96 0 0 0 7 13a5.96 5.96 0 0 0 4.243-1.757z\" fillRule=\"evenodd\"/></svg>';\nconst threadSvg =\n  '<svg width=\"14\" height=\"10\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M8.516 3c4.78 0 4.972 6.5 4.972 6.5-1.6-2.906-2.847-3.184-4.972-3.184v2.872L3.772 4.994 8.516.5V3zM.484 5l4.5-4.237v1.78L2.416 5l2.568 2.125v1.828L.484 5z\" fillRule=\"evenodd\" /></svg>';\nconst optionsSvg =\n  '<svg width=\"11\" height=\"3\" viewBox=\"0 0 11 3\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M1.5 3a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm4 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm4 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z\" fillRule=\"nonzero\" /></svg>';\n\n/**\n * MessageLivestream - Render component, should be used together with the Message component\n * Implements the look and feel for a livestream use case.\n *\n * @example ./docs/MessageLivestream.md\n * @extends PureComponent\n */\nexport class MessageLivestream extends React.PureComponent {\n  static propTypes = {\n    /** The message object */\n    message: PropTypes.object,\n    /** The attachment component */\n    Attachment: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n    /** The message component, most logic is delegated to this component */\n    Message: PropTypes.oneOfType([\n      PropTypes.node,\n      PropTypes.func,\n      PropTypes.object,\n    ]).isRequired,\n  };\n\n  static defaultProps = {\n    Attachment,\n  };\n\n  state = {\n    actionsBoxOpen: false,\n    reactionSelectorOpen: false,\n  };\n\n  reactionSelectorRef = React.createRef();\n  editMessageFormRef = React.createRef();\n\n  isMine() {\n    return this.props.Message.isMyMessage(this.props.message);\n  }\n\n  onClickReactionsAction = () => {\n    this.setState(\n      {\n        reactionSelectorOpen: true,\n      },\n      () => document.addEventListener('click', this.hideReactions, false),\n    );\n  };\n\n  onClickOptionsAction = () => {\n    this.setState(\n      {\n        actionsBoxOpen: true,\n      },\n      () => document.addEventListener('click', this.hideOptions, false),\n    );\n  };\n\n  hideOptions = () => {\n    this.setState({\n      actionsBoxOpen: false,\n    });\n    document.removeEventListener('click', this.hideOptions, false);\n  };\n\n  hideReactions = (e) => {\n    if (\n      !this.reactionSelectorRef.current.reactionSelector.current.contains(\n        e.target,\n      )\n    ) {\n      this.setState({\n        reactionSelectorOpen: false,\n      });\n      document.removeEventListener('click', this.hideReactions, false);\n    }\n  };\n\n  onMouseLeaveMessage = () => {\n    this.hideOptions();\n    this.setState(\n      {\n        reactionSelectorOpen: false,\n      },\n      () => document.removeEventListener('click', this.hideReactions, false),\n    );\n  };\n\n  componentWillUnmount() {\n    document.removeEventListener('click', this.hideOptions, false);\n    document.removeEventListener('click', this.hideReactions, false);\n  }\n\n  render() {\n    const { Attachment, message, groupStyles } = this.props;\n    const hasAttachment = Boolean(\n      message.attachments && message.attachments.length,\n    );\n\n    let galleryImages = message.attachments.filter(\n      (item) => item.type === 'image',\n    );\n    let attachments = message.attachments;\n    if (galleryImages.length > 1) {\n      attachments = message.attachments.filter((item) => item.type !== 'image');\n    } else {\n      galleryImages = [];\n    }\n\n    if (message.type === 'message.read') {\n      return null;\n    }\n\n    if (message.type === 'message.date') {\n      return null;\n    }\n\n    if (message.deleted_at) {\n      return null;\n    }\n\n    if (this.props.editing) {\n      return (\n        <div\n          className={`str-chat__message-team str-chat__message-team--${\n            groupStyles[0]\n          } str-chat__message-team--editing`}\n          onMouseLeave={this.onMouseLeaveMessage}\n        >\n          {(groupStyles[0] === 'top' || groupStyles[0] === 'single') && (\n            <div className=\"str-chat__message-team-meta\">\n              <Avatar\n                image={message.user.image}\n                name={message.user.name || message.user.id}\n                size={40}\n              />\n            </div>\n          )}\n          <MessageInput\n            Input={EditMessageForm}\n            message={this.props.message}\n            clearEditingState={this.props.clearEditingState}\n            updateMessage={this.props.updateMessage}\n          />\n        </div>\n      );\n    }\n\n    return (\n      <React.Fragment>\n        <div\n          className={`str-chat__message-livestream str-chat__message-livestream--${\n            groupStyles[0]\n          } str-chat__message-livestream--${\n            message.type\n          } str-chat__message-livestream--${message.status} ${\n            this.props.initialMessage\n              ? 'str-chat__message-livestream--initial-message'\n              : ''\n          }`}\n          onMouseLeave={this.onMouseLeaveMessage}\n        >\n          {this.state.reactionSelectorOpen && (\n            <ReactionSelector\n              mine={this.props.mine}\n              reverse={false}\n              handleReaction={this.props.handleReaction}\n              actionsEnabled={this.props.actionsEnabled}\n              detailedView\n              latest_reactions={message.latest_reactions}\n              reaction_counts={message.reaction_counts}\n              messageList={this.props.messageListRect}\n              ref={this.reactionSelectorRef}\n            />\n          )}\n          {!this.props.initialMessage &&\n            message.type !== 'error' &&\n            message.type !== 'system' &&\n            message.type !== 'ephemeral' &&\n            message.status !== 'failed' &&\n            message.status !== 'sending' && (\n              <div className={`str-chat__message-livestream-actions`}>\n                <span className={`str-chat__message-livestream-time`}>\n                  {moment(message.created_at).format('h:mmA')}\n                </span>\n                {this.props.channelConfig &&\n                  this.props.channelConfig.reactions && (\n                    <span onClick={this.onClickReactionsAction}>\n                      <span\n                        dangerouslySetInnerHTML={{\n                          __html: reactionSvg,\n                        }}\n                      />\n                    </span>\n                  )}\n                {!this.props.threadList &&\n                  this.props.channelConfig &&\n                  this.props.channelConfig.replies && (\n                    <span\n                      dangerouslySetInnerHTML={{\n                        __html: threadSvg,\n                      }}\n                      onClick={(e) => this.props.openThread(e, message)}\n                    />\n                  )}\n                {this.props.Message.getMessageActions().length > 0 && (\n                  <span onClick={this.onClickOptionsAction}>\n                    <span\n                      dangerouslySetInnerHTML={{\n                        __html: optionsSvg,\n                      }}\n                    />\n                    <MessageActionsBox\n                      open={this.state.actionsBoxOpen}\n                      Message={this.props.Message}\n                      message={this.props.message}\n                      messageListRect={this.props.messageListRect}\n                      mine={this.props.Message.isMyMessage(this.props.message)}\n                    />\n                  </span>\n                )}\n              </div>\n            )}\n\n          <div className={`str-chat__message-livestream-left`}>\n            <Avatar\n              image={message.user.image}\n              name={message.user.name || message.user.id}\n              size={30}\n            />\n          </div>\n          <div className={`str-chat__message-livestream-right`}>\n            <div className={`str-chat__message-livestream-content`}>\n              <div className=\"str-chat__message-livestream-author\">\n                <strong>{message.user.name || message.user.id}</strong>\n                {message.type === 'error' && (\n                  <div className=\"str-chat__message-team-error-header\">\n                    Only visible to you\n                  </div>\n                )}\n              </div>\n\n              <div\n                className={\n                  isOnlyEmojis(message.text)\n                    ? 'str-chat__message-livestream-text--is-emoji'\n                    : ''\n                }\n                onMouseOver={this.props.onMentionsHoverMessage}\n                onClick={this.props.onMentionsClickMessage}\n              >\n                {message.type !== 'error' &&\n                  message.status !== 'failed' &&\n                  !this.props.unsafeHTML &&\n                  renderText(message)}\n\n                {message.type !== 'error' &&\n                  message.status !== 'failed' &&\n                  this.props.unsafeHTML && (\n                    <div dangerouslySetInnerHTML={{ __html: message.html }} />\n                  )}\n\n                {message.type === 'error' && !message.command && (\n                  <p>\n                    <svg\n                      width=\"14\"\n                      height=\"14\"\n                      xmlns=\"http://www.w3.org/2000/svg\"\n                    >\n                      <path\n                        d=\"M7 0a7 7 0 1 0 0 14A7 7 0 0 0 7 0zm.875 10.938a.438.438 0 0 1-.438.437h-.875a.438.438 0 0 1-.437-.438v-.874c0-.242.196-.438.438-.438h.875c.241 0 .437.196.437.438v.874zm0-2.626a.438.438 0 0 1-.438.438h-.875a.438.438 0 0 1-.437-.438v-5.25c0-.241.196-.437.438-.437h.875c.241 0 .437.196.437.438v5.25z\"\n                        fill=\"#EA152F\"\n                        fillRule=\"evenodd\"\n                      />\n                    </svg>\n                    {message.text}\n                  </p>\n                )}\n\n                {message.type === 'error' && message.command && (\n                  <p>\n                    <svg\n                      width=\"14\"\n                      height=\"14\"\n                      xmlns=\"http://www.w3.org/2000/svg\"\n                    >\n                      <path\n                        d=\"M7 0a7 7 0 1 0 0 14A7 7 0 0 0 7 0zm.875 10.938a.438.438 0 0 1-.438.437h-.875a.438.438 0 0 1-.437-.438v-.874c0-.242.196-.438.438-.438h.875c.241 0 .437.196.437.438v.874zm0-2.626a.438.438 0 0 1-.438.438h-.875a.438.438 0 0 1-.437-.438v-5.25c0-.241.196-.437.438-.437h.875c.241 0 .437.196.437.438v5.25z\"\n                        fill=\"#EA152F\"\n                        fillRule=\"evenodd\"\n                      />\n                    </svg>\n                    <strong>/{message.command}</strong> is not a valid command\n                  </p>\n                )}\n                {message.status === 'failed' && (\n                  <p\n                    onClick={this.props.handleRetry.bind(\n                      this,\n                      this.props.message,\n                    )}\n                  >\n                    <svg\n                      width=\"14\"\n                      height=\"14\"\n                      xmlns=\"http://www.w3.org/2000/svg\"\n                    >\n                      <path\n                        d=\"M7 0a7 7 0 1 0 0 14A7 7 0 0 0 7 0zm.875 10.938a.438.438 0 0 1-.438.437h-.875a.438.438 0 0 1-.437-.438v-.874c0-.242.196-.438.438-.438h.875c.241 0 .437.196.437.438v.874zm0-2.626a.438.438 0 0 1-.438.438h-.875a.438.438 0 0 1-.437-.438v-5.25c0-.241.196-.437.438-.437h.875c.241 0 .437.196.437.438v5.25z\"\n                        fill=\"#EA152F\"\n                        fillRule=\"evenodd\"\n                      />\n                    </svg>\n                    Message failed. Click to try again.\n                  </p>\n                )}\n              </div>\n\n              {hasAttachment &&\n                attachments.map((attachment, index) => (\n                  <Attachment\n                    key={`${message.id}-${index}`}\n                    attachment={attachment}\n                    actionHandler={this.props.handleAction}\n                  />\n                ))}\n\n              {galleryImages.length !== 0 && <Gallery images={galleryImages} />}\n\n              <SimpleReactionsList\n                reaction_counts={message.reaction_counts}\n                reactions={this.props.message.latest_reactions}\n                handleReaction={this.props.handleReaction}\n              />\n\n              {!this.props.initialMessage && (\n                <MessageRepliesCountButton\n                  onClick={this.props.openThread}\n                  reply_count={message.reply_count}\n                />\n              )}\n            </div>\n          </div>\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n","import React, { PureComponent } from 'react';\nimport { Attachment } from './Attachment';\nimport { Avatar } from './Avatar';\nimport { MessageActionsBox } from './MessageActionsBox';\nimport { ReactionSelector } from './ReactionSelector';\nimport { EditMessageForm } from './EditMessageForm';\nimport { SimpleReactionsList } from './SimpleReactionsList';\nimport { MessageRepliesCountButton } from './MessageRepliesCountButton';\nimport { LoadingIndicator } from './LoadingIndicator';\nimport { Tooltip } from './Tooltip';\nimport { Gallery } from './Gallery';\nimport { MessageInput } from './MessageInput';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\n\nimport { isOnlyEmojis, renderText } from '../utils';\n\nconst reactionSvg =\n  '<svg width=\"14\" height=\"14\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M11.108 8.05a.496.496 0 0 1 .212.667C10.581 10.147 8.886 11 7 11c-1.933 0-3.673-.882-4.33-2.302a.497.497 0 0 1 .9-.417C4.068 9.357 5.446 10 7 10c1.519 0 2.869-.633 3.44-1.738a.495.495 0 0 1 .668-.212zm.792-1.826a.477.477 0 0 1-.119.692.541.541 0 0 1-.31.084.534.534 0 0 1-.428-.194c-.106-.138-.238-.306-.539-.306-.298 0-.431.168-.54.307A.534.534 0 0 1 9.538 7a.544.544 0 0 1-.31-.084.463.463 0 0 1-.117-.694c.33-.423.742-.722 1.394-.722.653 0 1.068.3 1.396.724zm-7 0a.477.477 0 0 1-.119.692.541.541 0 0 1-.31.084.534.534 0 0 1-.428-.194c-.106-.138-.238-.306-.539-.306-.299 0-.432.168-.54.307A.533.533 0 0 1 2.538 7a.544.544 0 0 1-.31-.084.463.463 0 0 1-.117-.694c.33-.423.742-.722 1.394-.722.653 0 1.068.3 1.396.724zM7 0a7 7 0 1 1 0 14A7 7 0 0 1 7 0zm4.243 11.243A5.96 5.96 0 0 0 13 7a5.96 5.96 0 0 0-1.757-4.243A5.96 5.96 0 0 0 7 1a5.96 5.96 0 0 0-4.243 1.757A5.96 5.96 0 0 0 1 7a5.96 5.96 0 0 0 1.757 4.243A5.96 5.96 0 0 0 7 13a5.96 5.96 0 0 0 4.243-1.757z\" fillRule=\"evenodd\"/></svg>';\nconst threadSvg =\n  '<svg width=\"14\" height=\"10\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M8.516 3c4.78 0 4.972 6.5 4.972 6.5-1.6-2.906-2.847-3.184-4.972-3.184v2.872L3.772 4.994 8.516.5V3zM.484 5l4.5-4.237v1.78L2.416 5l2.568 2.125v1.828L.484 5z\" fillRule=\"evenodd\" /></svg>';\nconst optionsSvg =\n  '<svg width=\"11\" height=\"3\" viewBox=\"0 0 11 3\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M1.5 3a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm4 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm4 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z\" fillRule=\"nonzero\" /></svg>';\n\n/**\n * MessageTeam - Render component, should be used together with the Message component\n * Implements the look and feel for a team style collaboration environment\n *\n * @example ./docs/MessageTeam.md\n * @extends PureComponent\n */\nexport class MessageTeam extends PureComponent {\n  static propTypes = {\n    /** The message object */\n    message: PropTypes.object,\n    /** The attachment component */\n    Attachment: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n    /** The message component, most logic is delegated to this component */\n    Message: PropTypes.oneOfType([\n      PropTypes.node,\n      PropTypes.func,\n      PropTypes.object,\n    ]).isRequired,\n    groupStyles: PropTypes.array,\n  };\n\n  static defaultProps = {\n    Attachment,\n    groupStyles: ['single'],\n  };\n\n  state = {\n    actionsBoxOpen: false,\n    reactionSelectorOpen: false,\n  };\n\n  reactionSelectorRef = React.createRef();\n  editMessageFormRef = React.createRef();\n\n  onClickReactionsAction = () => {\n    this.setState(\n      {\n        reactionSelectorOpen: true,\n      },\n      () => document.addEventListener('click', this.hideReactions, false),\n    );\n  };\n\n  onClickOptionsAction = () => {\n    this.setState(\n      {\n        actionsBoxOpen: true,\n      },\n      () => document.addEventListener('click', this.hideOptions, false),\n    );\n  };\n\n  hideOptions = () => {\n    this.setState({\n      actionsBoxOpen: false,\n    });\n    document.removeEventListener('click', this.hideOptions, false);\n  };\n\n  hideReactions = (e) => {\n    if (\n      !this.reactionSelectorRef.current.reactionSelector.current.contains(\n        e.target,\n      )\n    ) {\n      this.setState({\n        reactionSelectorOpen: false,\n      });\n      document.removeEventListener('click', this.hideReactions, false);\n    }\n  };\n\n  onMouseLeaveMessage = () => {\n    this.hideOptions();\n    this.setState(\n      {\n        reactionSelectorOpen: false,\n      },\n      () => document.removeEventListener('click', this.hideReactions, false),\n    );\n  };\n\n  // https://stackoverflow.com/a/29234240/7625485\n  formatArray = (arr) => {\n    let outStr = '';\n    const slicedArr = arr\n      .filter((item) => item.id !== this.props.client.user.id)\n      .map((item) => item.name || item.id)\n      .slice(0, 5);\n    const restLength = arr.length - slicedArr.length;\n    const lastStr = restLength > 0 ? ' and ' + restLength + ' more' : '';\n\n    if (slicedArr.length === 1) {\n      outStr = slicedArr[0] + ' ';\n    } else if (slicedArr.length === 2) {\n      //joins all with \"and\" but =no commas\n      //example: \"bob and sam\"\n      outStr = slicedArr.join(' and ') + ' ';\n    } else if (slicedArr.length > 2) {\n      //joins all with commas, but last one gets \", and\" (oxford comma!)\n      //example: \"bob, joe, and sam\"\n      outStr = slicedArr.join(', ') + lastStr;\n    }\n\n    return outStr;\n  };\n\n  isMine() {\n    return this.props.Message.isMyMessage(this.props.message);\n  }\n\n  renderStatus = () => {\n    const message = this.props;\n    if (!this.isMine() || message.type === 'error') {\n      return null;\n    }\n    const justReadByMe =\n      message.readBy.length === 1 &&\n      message.readBy[0].id === this.props.client.user.id;\n    if (this.props.message.status === 'sending') {\n      return (\n        <span className=\"str-chat__message-team-status\">\n          <Tooltip>Sending...</Tooltip>\n          <LoadingIndicator isLoading />\n        </span>\n      );\n    } else if (\n      message.readBy.length !== 0 &&\n      !this.props.threadList &&\n      !justReadByMe\n    ) {\n      const lastReadUser = this.props.readBy.filter(\n        (item) => item.id !== this.props.client.user.id,\n      )[0];\n      return (\n        <span className=\"str-chat__message-team-status\">\n          <Tooltip>{this.formatArray(message.readBy)}</Tooltip>\n          <Avatar\n            name={lastReadUser.name || lastReadUser.id}\n            image={lastReadUser.image}\n            size={15}\n          />\n          {message.readBy.length - 1 > 1 && (\n            <span className=\"str-chat__message-team-status-number\">\n              {message.readBy.length - 1}\n            </span>\n          )}\n        </span>\n      );\n    } else if (\n      this.props.message.status === 'received' &&\n      this.props.message.id === this.props.lastReceivedId &&\n      !this.props.threadList\n    ) {\n      return (\n        <span className=\"str-chat__message-team-status\">\n          <Tooltip>Delivered</Tooltip>\n          <svg width=\"16\" height=\"16\" xmlns=\"http://www.w3.org/2000/svg\">\n            <path\n              d=\"M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0zm3.72 6.633a.955.955 0 1 0-1.352-1.352L6.986 8.663 5.633 7.31A.956.956 0 1 0 4.28 8.663l2.029 2.028a.956.956 0 0 0 1.353 0l4.058-4.058z\"\n              fill=\"#006CFF\"\n              fillRule=\"evenodd\"\n            />\n          </svg>\n        </span>\n      );\n    } else {\n      return null;\n    }\n  };\n  componentWillUnmount() {\n    document.removeEventListener('click', this.hideOptions, false);\n    document.removeEventListener('click', this.hideReactions, false);\n  }\n\n  render() {\n    const { message, groupStyles } = this.props;\n    if (message.type === 'message.read') {\n      return null;\n    }\n    const hasAttachment = Boolean(\n      message.attachments && message.attachments.length,\n    );\n    const Attachment = this.props.Attachment;\n\n    if (message.deleted_at) {\n      return null;\n    }\n\n    let galleryImages =\n      message.attachments &&\n      message.attachments.filter((item) => item.type === 'image');\n    let attachments = message.attachments;\n    if (galleryImages && galleryImages.length > 1) {\n      attachments = message.attachments.filter((item) => item.type !== 'image');\n    } else {\n      galleryImages = [];\n    }\n\n    // determine reaction selector alignment\n    const reactionDirection = 'left';\n\n    if (this.props.editing) {\n      return (\n        <div\n          className={`str-chat__message-team str-chat__message-team--${\n            groupStyles[0]\n          } str-chat__message-team--editing`}\n          onMouseLeave={this.onMouseLeaveMessage}\n        >\n          {(groupStyles[0] === 'top' || groupStyles[0] === 'single') && (\n            <div className=\"str-chat__message-team-meta\">\n              <Avatar\n                image={message.user.image}\n                name={message.user.name || message.user.id}\n                size={40}\n              />\n            </div>\n          )}\n          <MessageInput\n            Input={EditMessageForm}\n            message={this.props.message}\n            clearEditingState={this.props.clearEditingState}\n            updateMessage={this.props.updateMessage}\n          />\n        </div>\n      );\n    }\n\n    return (\n      <React.Fragment>\n        <div\n          className={`str-chat__message-team str-chat__message-team--${\n            groupStyles[0]\n          } str-chat__message-team--${message.type} ${\n            this.props.threadList ? 'thread-list' : ''\n          } str-chat__message-team--${message.status}`}\n          onMouseLeave={this.onMouseLeaveMessage}\n        >\n          <div className=\"str-chat__message-team-meta\">\n            {groupStyles[0] === 'top' ||\n            groupStyles[0] === 'single' ||\n            this.props.initialMessage ? (\n              <Avatar\n                image={message.user.image}\n                name={message.user.name || message.user.id}\n                size={40}\n              />\n            ) : (\n              <div style={{ width: 40, marginRight: 0 }} />\n            )}\n\n            <time dateTime={message.created_at} title={message.created_at}>\n              {Boolean(Date.parse(message.created_at)) &&\n                moment(message.created_at).format('h:mmA')}\n            </time>\n          </div>\n          <div className=\"str-chat__message-team-group\">\n            {(groupStyles[0] === 'top' ||\n              groupStyles[0] === 'single' ||\n              this.props.initialMessage) && (\n              <div className=\"str-chat__message-team-author\">\n                <strong>{message.user.name || message.user.id}</strong>\n                {message.type === 'error' && (\n                  <div className=\"str-chat__message-team-error-header\">\n                    Only visible to you\n                  </div>\n                )}\n              </div>\n            )}\n            <div\n              className={`str-chat__message-team-content str-chat__message-team-content--${\n                groupStyles[0]\n              } str-chat__message-team-content--${\n                message.text === '' ? 'image' : 'text'\n              }`}\n            >\n              {!this.props.initialMessage &&\n                message.status !== 'sending' &&\n                message.status !== 'failed' &&\n                message.type !== 'system' &&\n                message.type !== 'ephemeral' &&\n                message.type !== 'error' && (\n                  <div className={`str-chat__message-team-actions`}>\n                    {this.state.reactionSelectorOpen && (\n                      <ReactionSelector\n                        handleReaction={this.props.handleReaction}\n                        latest_reactions={message.latest_reactions}\n                        reaction_counts={message.reaction_counts}\n                        detailedView={true}\n                        direction={reactionDirection}\n                        ref={this.reactionSelectorRef}\n                      />\n                    )}\n\n                    {this.props.channelConfig &&\n                      this.props.channelConfig.reactions && (\n                        <span\n                          title=\"Reactions\"\n                          dangerouslySetInnerHTML={{\n                            __html: reactionSvg,\n                          }}\n                          onClick={this.onClickReactionsAction}\n                        />\n                      )}\n                    {!this.props.threadList &&\n                      this.props.channelConfig &&\n                      this.props.channelConfig.replies && (\n                        <span\n                          title=\"Start a thread\"\n                          dangerouslySetInnerHTML={{\n                            __html: threadSvg,\n                          }}\n                          onClick={(e) => this.props.openThread(e, message)}\n                        />\n                      )}\n                    {this.props.Message.getMessageActions().length > 0 && (\n                      <span onClick={this.onClickOptionsAction}>\n                        <span\n                          title=\"Message actions\"\n                          dangerouslySetInnerHTML={{\n                            __html: optionsSvg,\n                          }}\n                        />\n                        <MessageActionsBox\n                          Message={this.props.Message}\n                          open={this.state.actionsBoxOpen}\n                          message={this.props.message}\n                          messageListRect={this.props.messageListRect}\n                          mine={this.props.Message.isMyMessage(\n                            this.props.message,\n                          )}\n                        />\n                      </span>\n                    )}\n                  </div>\n                )}\n              <span\n                className={\n                  isOnlyEmojis(message.text)\n                    ? 'str-chat__message-team-text--is-emoji'\n                    : ''\n                }\n                onMouseOver={this.props.onMentionsHoverMessage}\n                onClick={this.props.onMentionsClickMessage}\n              >\n                {this.props.unsafeHTML ? (\n                  <div dangerouslySetInnerHTML={{ __html: message.html }} />\n                ) : (\n                  renderText(message)\n                )}\n              </span>\n\n              {galleryImages.length !== 0 && <Gallery images={galleryImages} />}\n\n              {message.text === '' &&\n                attachments.map((attachment, index) => (\n                  <Attachment\n                    key={`${message.id}-${index}`}\n                    attachment={attachment}\n                    actionHandler={this.props.handleAction}\n                  />\n                ))}\n\n              {message.latest_reactions &&\n                message.latest_reactions.length !== 0 &&\n                message.text !== '' && (\n                  <SimpleReactionsList\n                    reaction_counts={message.reaction_counts}\n                    handleReaction={this.props.handleReaction}\n                    reactions={message.latest_reactions}\n                  />\n                )}\n              {message.status === 'failed' && (\n                <button\n                  className=\"str-chat__message-team-failed\"\n                  onClick={this.props.handleRetry.bind(\n                    this,\n                    this.props.message,\n                  )}\n                >\n                  <svg\n                    width=\"14\"\n                    height=\"14\"\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                  >\n                    <path\n                      d=\"M7 0a7 7 0 1 0 0 14A7 7 0 0 0 7 0zm.875 10.938a.438.438 0 0 1-.438.437h-.875a.438.438 0 0 1-.437-.438v-.874c0-.242.196-.438.438-.438h.875c.241 0 .437.196.437.438v.874zm0-2.626a.438.438 0 0 1-.438.438h-.875a.438.438 0 0 1-.437-.438v-5.25c0-.241.196-.437.438-.437h.875c.241 0 .437.196.437.438v5.25z\"\n                      fill=\"#EA152F\"\n                      fillRule=\"evenodd\"\n                    />\n                  </svg>\n                  Message failed. Click to try again.\n                </button>\n              )}\n            </div>\n            {this.renderStatus()}\n            {message.text !== '' &&\n              hasAttachment &&\n              attachments.map((attachment, index) => (\n                <Attachment\n                  key={`${message.id}-${index}`}\n                  attachment={attachment}\n                  actionHandler={this.props.handleAction}\n                />\n              ))}\n            {message.latest_reactions &&\n              message.latest_reactions.length !== 0 &&\n              message.text === '' && (\n                <SimpleReactionsList\n                  reaction_counts={message.reaction_counts}\n                  handleReaction={this.props.handleReaction}\n                  reactions={message.latest_reactions}\n                />\n              )}\n            {!this.props.threadList && (\n              <MessageRepliesCountButton\n                onClick={this.props.openThread}\n                reply_count={message.reply_count}\n              />\n            )}\n          </div>\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n","import React from 'react';\n\nimport { withChannelContext } from '../context';\nimport { MessageList } from './MessageList';\nimport { MessageInput } from './MessageInput';\nimport PropTypes from 'prop-types';\n\nimport { Message } from './Message';\nimport { MessageInputSmall } from './MessageInputSmall';\n\n/**\n * Thread - The Thread renders a parent message with a list of replies. Use the stnadard message list of the main channel's messages.\n * The thread is only used for the list of replies to a message.\n *\n * @example ./docs/Thread.md\n * @extends Component\n */\nclass Thread extends React.PureComponent {\n  static propTypes = {\n    /** Channel is passed via the Channel Context */\n    channel: PropTypes.object.isRequired,\n    /** the thread (the parent message object) */\n    thread: PropTypes.oneOfType([PropTypes.object, PropTypes.bool]),\n\n    /** The message component to use for rendering messages */\n    Message: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n\n    /** The list of messages to render, state is handled by the parent channel component */\n    threadMessages: PropTypes.array.isRequired,\n\n    /** loadMoreThread iss called when infinite scroll wants to load more messages */\n    loadMoreThread: PropTypes.func.isRequired,\n\n    /** If there are more messages available, set to false when the end of pagination is reached */\n    threadHasMore: PropTypes.bool,\n    /** If the thread is currently loading more messages */\n    threadLoadingMore: PropTypes.bool,\n    /** Display the thread on 100% width of it's container. Useful for mobile style view */\n    fullWidth: PropTypes.bool,\n    /** Make input focus on mounting thread */\n    autoFocus: PropTypes.bool,\n  };\n\n  static defaultProps = {\n    threadHasMore: true,\n    threadLoadingMore: true,\n    fullWidth: false,\n    autoFocus: true,\n  };\n\n  render() {\n    if (!this.props.thread) {\n      return null;\n    }\n    const parentID = this.props.thread.id;\n    const cid = this.props.channel.cid;\n\n    const key = `thread-${parentID}-${cid}`;\n    // We use a wrapper to make sure the key variable is set.\n    // this ensures that if you switch thread the component is recreated\n    return <ThreadInner {...this.props} key={key} />;\n  }\n}\n\nclass ThreadInner extends React.PureComponent {\n  static propTypes = {\n    /** Channel is passed via the Channel Context */\n    channel: PropTypes.object.isRequired,\n    /** the thread (just a message) that we're rendering */\n    thread: PropTypes.object.isRequired,\n  };\n\n  constructor(props) {\n    super(props);\n    this.messageList = React.createRef();\n  }\n\n  async componentDidMount() {\n    const parentID = this.props.thread.id;\n    if (parentID && this.props.thread.reply_count) {\n      await this.props.loadMoreThread();\n    }\n  }\n  getSnapshotBeforeUpdate(prevProps) {\n    // Are we adding new items to the list?\n    // Capture the scroll position so we can adjust scroll later.\n    if (prevProps.threadMessages.length < this.props.threadMessages.length) {\n      const list = this.messageList.current;\n      const pos = list.scrollHeight - list.scrollTop;\n      return pos;\n    }\n    return null;\n  }\n\n  componentDidUpdate(prevProps, prevState, snapshot) {\n    // If we have a snapshot value, we've just added new items.\n    // Adjust scroll so these new items don't push the old ones out of view.\n    // (snapshot here is the value returned from getSnapshotBeforeUpdate)\n    if (snapshot !== null) {\n      const list = this.messageList.current;\n\n      const scrollDown = () => {\n        list.scrollTop = list.scrollHeight - snapshot;\n      };\n      scrollDown();\n      // scroll down after images load again\n      setTimeout(scrollDown, 100);\n    }\n  }\n\n  render() {\n    if (!this.props.thread) {\n      return null;\n    }\n\n    const read = {};\n    return (\n      <div\n        className={`str-chat__thread ${\n          this.props.fullWidth ? 'str-chat__thread--full' : ''\n        }`}\n      >\n        <div className=\"str-chat__thread-header\">\n          <div className=\"str-chat__thread-header-details\">\n            <strong>Thread</strong>\n            <small>{this.props.thread.reply_count} replies</small>\n          </div>\n          <button\n            onClick={(e) => this.props.closeThread(e)}\n            className=\"str-chat__square-button\"\n          >\n            <svg width=\"10\" height=\"10\" xmlns=\"http://www.w3.org/2000/svg\">\n              <path\n                d=\"M9.916 1.027L8.973.084 5 4.058 1.027.084l-.943.943L4.058 5 .084 8.973l.943.943L5 5.942l3.973 3.974.943-.943L5.942 5z\"\n                fillRule=\"evenodd\"\n              />\n            </svg>\n          </button>\n        </div>\n        <div className=\"str-chat__thread-list\" ref={this.messageList}>\n          <Message\n            message={this.props.thread}\n            initialMessage\n            threadList\n            Message={this.props.Message}\n            {...this.props}\n          />\n          <div className=\"str-chat__thread-start\">Start of a new thread</div>\n          <MessageList\n            messages={this.props.threadMessages}\n            read={read}\n            threadList\n            loadMore={this.props.loadMoreThread}\n            hasMore={this.props.threadHasMore}\n            loadingMore={this.props.threadLoadingMore}\n            Message={this.props.Message}\n          />\n          <MessageInput\n            Input={MessageInputSmall}\n            parent={this.props.thread}\n            focus={this.props.autoFocus}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n\nThread = withChannelContext(Thread);\nexport { Thread };\n","import React from 'react';\n\nimport { Avatar } from './Avatar';\n\nexport class TypingIndicator extends React.PureComponent {\n  render() {\n    // if (Object.keys(this.props.typing).length <= 0) {\n    //   return null;\n    // }\n\n    const typing = Object.values(this.props.typing);\n    let show;\n    if (\n      typing.length === 0 ||\n      (typing.length === 1 && typing[0].user.id === this.props.client.user.id)\n    ) {\n      show = false;\n    } else {\n      show = true;\n    }\n    return (\n      <div\n        className={`str-chat__typing-indicator ${\n          show ? 'str-chat__typing-indicator--typing' : ''\n        }`}\n      >\n        <div className=\"str-chat__typing-indicator__avatars\">\n          {typing\n            .filter(({ user }) => user.id !== this.props.client.user.id)\n            .map(({ user }) => (\n              <Avatar\n                image={user.image}\n                size={32}\n                name={user.name || user.id}\n                key={user.id}\n              />\n            ))}\n        </div>\n        <div className=\"str-chat__typing-indicator__dots\">\n          <span className=\"str-chat__typing-indicator__dot\" />\n          <span className=\"str-chat__typing-indicator__dot\" />\n          <span className=\"str-chat__typing-indicator__dot\" />\n        </div>\n      </div>\n    );\n  }\n}\n","import React from 'react';\n\nimport PropTypes from 'prop-types';\n\nimport { withChannelContext } from '../context';\n\n/**\n * Window - A UI component for conditionally displaying thread or channel.\n *\n * @example ./docs/Window.md\n * @extends PureComponent\n */\nclass Window extends React.PureComponent {\n  static propTypes = {\n    /** show or hide the window when a thread is active */\n    hideOnThread: PropTypes.bool,\n    /** Flag if thread is open or not */\n    thread: PropTypes.oneOfType([PropTypes.bool, PropTypes.object]),\n  };\n\n  static defaultProps = {\n    hideOnThread: false,\n  };\n\n  render() {\n    // If thread is active and window should hide on thread. Return null\n    if (this.props.thread && this.props.hideOnThread) {\n      return null;\n    }\n    return <div className={`str-chat__main-panel`}>{this.props.children}</div>;\n  }\n}\n\nWindow = withChannelContext(Window);\nexport { Window };\n","// Setup\nimport './styles/_variables.scss';\nimport './styles/_base.scss';\n\n// Components\n\nimport './styles/vendor/react-file-utils.scss';\nimport './styles/vendor/emoji-mart.scss';\n\nimport './styles/ActionsBox.scss';\nimport './styles/AttachmentActions.scss';\nimport './styles/Attachment.scss';\nimport './styles/Avatar.scss';\nimport './styles/Audio.scss';\nimport './styles/Card.scss';\nimport './styles/ChannelHeader.scss';\nimport './styles/ChannelList.scss';\nimport './styles/ChannelListMessenger.scss';\nimport './styles/ChannelListTeam.scss';\nimport './styles/ChannelPreview.scss';\nimport './styles/ChannelSearch.scss';\nimport './styles/ChatDown.scss';\nimport './styles/EventComponent.scss';\nimport './styles/DateSeparator.scss';\nimport './styles/EditMessageForm.scss';\nimport './styles/Gallery.scss';\nimport './styles/LoadingChannels.scss';\nimport './styles/LoadingIndicator.scss';\nimport './styles/LoadMoreButton.scss';\nimport './styles/Message.scss';\nimport './styles/MessageActions.scss';\nimport './styles/MessageCommerce.scss';\nimport './styles/MessageInput.scss';\nimport './styles/MessageInputFlat.scss';\nimport './styles/MessageNotification.scss';\nimport './styles/MessageList.scss';\nimport './styles/MessageTeam.scss';\nimport './styles/MessageLivestream.scss';\nimport './styles/MessageRepliesCountButton.scss';\nimport './styles/Modal.scss';\nimport './styles/NewChannel.scss';\nimport './styles/ReactionList.scss';\nimport './styles/ReactionSelector.scss';\nimport './styles/ReadState.scss';\nimport './styles/SimpleReactionsList.scss';\nimport './styles/SmallMessageInput.scss';\nimport './styles/Thread.scss';\nimport './styles/TypingIndicator.scss';\nimport './styles/Tooltip.scss';\n\n//\nexport * from './components';\n"],"names":["Avatar","errored","loaded","name","split","slice","map","charAt","setState","prevProps","image","props","size","shape","initials","getInitials","React","width","height","flexBasis","lineHeight","fontSize","state","objectFit","onLoad","onError","PureComponent","PropTypes","string","oneOf","number","SafeAnchor","href","sanitizeUrl","children","Card","url","trimmedUrl","undefined","replace","title","title_link","text","type","image_url","thumb_url","og_scrape_url","trimUrl","giphyLogo","isRequired","Image","isOpen","fallback","openLightbox","closeLightbox","src","AttachmentActions","id","actions","actionHandler","action","style","value","bind","array","func","Audio","audioRef","current","pause","updateProgress","playing","setInterval","play","window","clearInterval","position","currentTime","duration","progress","pauseAudio","e","handleClose","open","og","audio","asset_url","React.createElement","playAudio","description","Attachment","createRef","a","attachment","extra","length","results","push","maxWidth","FileIcon","mime_type","file_size","prettybytes","attachmentRef","object","propTypes","emojiSetDef","spriteUrl","sheetColumns","sheetRows","sheetSize","commonEmoji","emoticons","short_names","custom","defaultMinimalEmojis","colons","sheet_x","sheet_y","d","Object","assign","data","emojis","emojiData","isOnlyEmojis","noEmojis","emojiRegex","noSpace","isPromise","thing","promise","then","byDate","b","created_at","formatArray","dict","arr2","keys","arr3","forEach","item","i","user","outStr","join","renderText","message","mentioned_users","allowed","urls","anchorme","list","urlInfo","displayLink","truncate","encoded","omission","mkdown","protocol","raw","newText","username","re","RegExp","generateRandomId","S4","Math","random","toString","substring","smartRender","ElementOrComponentOrLiteral","isValidElement","element","ComponentOrLiteral","MESSAGE_ACTIONS","edit","delete","flag","mute","MessageActionsBox","reverse","rect","actionsBoxRef","getBoundingClientRect","ml","messageListRect","mine","left","right","Message","messageActions","getMessageActions","indexOf","handleFlag","handleMute","handleEdit","handleDelete","Component","bool","oneOfType","node","ReactionsList","reactions","reactionsByType","reactionsEmojis","reactionOptions","reduce","acc","cur","NimbleEmoji","reaction_counts","count","key","onClick","reactionList","_renderReactions","_getReactionCount","Tooltip","LoadingIndicator","color","stopRef","stopColor","Gallery","lightboxIsOpen","imageIndex","images","formattedArray","background","backgroundSize","gotoPrevLightboxImage","gotoNextLightboxImage","ReactionSelector","users","target","showTooltip","setTooltipPosition","setArrowPosition","arrowPosition","positionCaculated","filtered","filter","getUsersPerReaction","reactionSelector","reactionSelectorTooltip","getContainerDimensions","container","getToolTipDimensions","tooltip","x","latest_reactions","lis","reaction","getUserNames","latestUser","getLatestUser","handleReaction","Boolean","detailedView","hideTooltip","positionCalculated","reactionSelectorInner","visibility","opacity","renderUsers","renderReactionItems","direction","MessageRepliesCountButton","reply_count","labelSingle","labelPlural","Modal","innerRef","contains","onClose","document","removeEventListener","handleEscKey","addEventListener","keyCode","openClasses","handleClick","ChatContext","createContext","client","withChatContext","OriginalComponent","ContextAwareComponent","ContextComponent","context","mergedProps","displayName","ChannelContext","withChannelContext","channelContext","KEY_CODES","ESC","UP","DOWN","ENTER","TAB","SPACE","Listener","refCount","f","keyCodes","fn","listeners","index","code","which","values","includes","Item","onSelectHandler","component","onClickHandler","selected","className","selectItem","List","selectedItem","preventDefault","modifyText","getPositionInList","findIndex","getId","textToReplace","getTextToReplace","onSelect","getSelectedItem","keyboard","dropdownScroll","itemsRef","oldPosition","newPosition","Listeners","add","scroll","onPressEnter","newValues","val","cachedValues","listener","pop","remove","itemClassName","itemStyle","__html","renderHeader","ref","isSelected","defaultScrollToItem","itemHeight","parseInt","getComputedStyle","getPropertyValue","containerHight","itemOffsetTop","offsetTop","actualScrollTop","scrollTop","DEFAULT_CARET_POSITION","errorMessage","console","error","ReactTextareaAutocomplete","textareaRef","selectionStart","selectionEnd","substr","focus","setSelectionRange","event","trigger","currentTrigger","hasFocus","matches","shiftKey","_replaceWord","handleSubmit","replaceWord","lastWordRegex","match","exec","getCaretPosition","lastWord","spaces","newWord","textBeforeWord","textAfterCaret","CustomEvent","bubbles","dispatchEvent","onChange","newToken","textareaValue","computeCaretPosition","token","startToken","Number","isInteger","Error","textToModify","startOfTokenPosition","search","allowWhitespace","newTokenString","caretPosition","newCaretPosition","modifiedText","dataLoading","setCaretPosition","_closeAutocomplete","triggerSettings","_getCurrentTriggerSettings","callback","actualToken","output","String","dataProvider","providedData","Promise","resolve","Array","isArray","catch","tokenRegExp","top","notSafe","prop","minChar","onCaretPositionChange","movePopupAsYouType","textarea","persist","tokenMatch","lastToken","find","afterWhitespace","getCaretCoordinates","newTop","newLeft","_getValuesFromProvider","err","closeOnClickOutside","onBlur","el","relatedTarget","dropdownRef","Node","scrollToItem","loadingComponent","_createRegExp","listenerIndex","_onSpace","_onEnter","startListen","nextProps","_update","stopListen","oldValue","oldTrigger","Loader","listClassName","dropdownClassName","dropdownStyle","containerStyle","containerClassName","loaderStyle","loaderClassName","suggestionData","_getSuggestions","_getTextToReplace","_getItemOnSelect","maxRows","grow","_onSelect","_dropdownScroll","_cleanUpProps","_changeHandler","_selectHandler","_onScrollHandler","_onClickAndBlurHandler","onFocus","triggerPropsCheck","triggers","entries","triggerChar","settings","triggerSetting","listStyle","EmoticonItem","entity","native","char","UserItem","u","CommandItem","c","args","ChatAutoComplete","q","emojiIndex","matchingUsers","toLowerCase","onSelectItem","selectedCommands","commands","sort","nameA","nameB","word","found","emoji","AutoCompleteTextarea","getTriggers","emojiReplace","rows","placeholder","onPaste","disabled","MessageInputLarge","imageOrder","ImagePreviewer","imageUploads","removeImage","uploadImage","uploadNewFiles","multipleUploads","numberOfUploads","maxNumberOfFiles","fileOrder","FilePreviewer","fileUploads","removeFile","uploadFile","emojiPickerIsOpen","emojiPickerRef","Picker","onSelectEmoji","zIndex","ImageDropzone","acceptedFiles","renderUploads","renderEmojiPicker","getUsers","getCommands","handleChange","openEmojiPicker","FileUploadButton","watcher_count","typing","MessageInput","showEmojiPicker","closeEmojiPicker","insertText","textToInsert","prevState","prevText","textareaElement","newCursorPosition","config","channel","getConfig","allCommands","members","watchers","member","userMap","usersArray","logChatPromiseExecution","keystroke","editing","trimmedMessage","trim","isEmptyMessage","hasFiles","attachments","file","upload","updatedMessage","clearEditingState","updateMessagePromise","updateMessage","sendMessagePromise","sendMessage","uniq","parent","Immutable","stopTyping","files","startsWith","_uploadNewImage","File","noFiles","_uploadNewFile","concat","setIn","FileReader","reader","onload","result","readAsDataURL","_uploadImage","_uploadFile","img","response","doImageUploadRequest","sendImage","warn","alreadyRemoved","errorHandler","feedGroup","userId","doFileUploadRequest","sendFile","set","_id","items","clipboardData","dataTransferItemsHaveFiles","kind","plainTextPromise","getAsString","s","dataTransferItemsToFiles","fileLikes","_uploadNewFiles","attach","mention","filePanelIsOpen","panelRef","hideFilePanel","Input","handlers","_removeImage","_removeFile","_onPaste","_onSelectItem","EditMessageForm","MessageSimple","isFocused","actionsBoxOpen","showDetailedReactions","hideOptions","_closeDetailedReactions","reactionSelectorRef","arr","slicedArr","restLength","lastStr","isMine","justReadByMe","readBy","status","threadList","lastReadUser","lastReceivedId","_onClickOptionsAction","deleted_at","isMyMessage","initialMessage","renderMessageActions","channelConfig","replies","openThread","_clickReactionList","when","moment","calendar","messageClasses","hasAttachment","hasReactions","_hideOptions","messageRef","renderStatus","retrySendMessage","renderOptions","actionsEnabled","handleAction","onMentionsHoverMessage","onMentionsClickMessage","unsafeHTML","html","role","isAdmin","returnValue","apply","getFlagMessageSuccessNotification","getFlagMessageErrorNotification","flagMessage","successMessage","validateAndGetNotificationMessage","addNotification","getMuteUserSuccessNotification","getMuteUserErrorNotification","muteUser","setEditingState","deleteMessage","reactionType","userExistingReaction","currentUser","userID","own_reactions","originalMessage","reactionChangePromise","deleteReaction","messageID","sendReaction","formData","sendAction","removeMessage","onMentionsClick","onMentionsHover","messageActionsProps","messageActionsAfterPermission","canEditMessage","canDeleteMessage","loading","shouldUpdate","deepequal","reason","groupStyles","handleRetry","ReverseInfiniteScroll","scrollListener","scrollEventCount","pageLoaded","pageStart","attachScrollListener","detachScrollListener","detachMousewheelListener","loader","defaultLoader","scrollEl","useWindow","scrollComponent","parentNode","mousewheelListener","useCapture","getParentElement","hasMore","isLoading","initialLoad","deltaY","offset","reverseOffset","standardOffset","scrollHeight","clientHeight","isReverse","listenToScroll","threshold","offsetParent","loadMore","calculateTopPosition","offsetHeight","innerHeight","renderProps","filterProps","childrenArray","unshift","createElement","MessageNotification","showNotification","DateSeparator","Date","parse","date","formatDate","Moment","toISOString","lastDay","sameDay","nextDay","lastWeek","nextWeek","sameElse","instanceOf","EventComponent","format","sentence","MessageList","online","_scrollToRef","bottomRef","messageList","scrollDown","scrollToTarget","call","setTimeout","containerEl","isElement","nodeType","isNumber","prototype","messages","newMessages","messageDate","getDay","prevMessageDate","eventsNextToMessage","eventHistory","scrollToBottom","newMessagesNotification","readData","read","readState","last_read","userLastReadMsgId","msg","updated_at","scrollOffset","userScrolledUp","l","m","messageGroupStyles","previousMessage","nextMessage","isTopMessage","isBottomMessage","splice","noGroupByUser","tagName","textContent","innerHTML","userName","notificationText","nextIndex","newNotifications","notifications","ct","notification","notificationTimeouts","messageRefs","on","connectionChanged","keypress","off","clearTimeout","pos","snapshot","currentLastMessage","previousLastMessage","hasNewMessage","isOwner","allMessages","insertDates","getGroupStyles","TypingIndicator","dateSeparator","getReadStates","getLastReceived","elements","log","loadingMore","goToNewMessages","Center","display","justifyContent","Notification","active","colors","baseUseCases","themes","useCase","Chat","setActiveChannel","theme","getContext","Channel","cid","watch","ChannelInner","threadMessages","threads","thread","threadLoadingMore","parentID","oldMessages","oldestMessageID","limit","getReplies","id_lt","queryResponse","_loadMoreThreadFinishedDebounced","threadHasMore","extraState","addMessageSorted","parent_id","clientSideID","uuidv4","messageData","messageResponse","filterErrorMessages","messagePreview","createMessagePreview","messageInput","userAutocomplete","_sendMessage","asMutable","threadState","messageToImmutable","mainChannelUpdated","show_in_channel","Visibility","_markReadThrottled","unread","countUnread","lastRead","originalTitle","addToEventHistory","_setStateThrottled","lastMessageId","read_events","markRead","oldestID","perPage","query","_loadMoreFinishedDebounced","resetNotification","closeThread","loadMoreThread","_onMentionsHoverOrClick","debounce","loadMoreFinished","leading","trailing","loadMoreThreadFinished","throttle","initialized","copyChannelState","listenToChanges","handleEvent","cancel","visibilityListener","unbind","selectRegularMessages","boundMarkRead","change","core","renderComponent","ChannelHeader","live","subtitle","member_count","MessageInputFlat","MessageInputSmall","openFilePanel","ChannelPreviewLastMessage","channelPreviewButton","blur","unreadClass","unread_count","activeClass","onSelectChannel","latestMessage","ChannelPreviewCountOnly","ChannelPreview","isActive","activeChannel","lastMessage","command","Preview","getLatestMessage","LoadMoreButton","refreshing","LoadMorePaginator","React.Fragment","hasNextPage","loadNextPage","LoadingChannels","ChatDown","ChannelListTeam","channels","showSidebar","chevrondown","ChannelList","options","filters","newOptions","channelPromise","queryChannels","channelQueryResponse","loadingChannels","newChannels","moveChannelUp","connectionRecoveredCount","onMessageNew","getChannel","uniqBy","onAddedToChannel","onRemovedFromChannel","channelIndex","channelUpdateCount","onChannelUpdated","menuButton","checked","closeMenu","info","Paginator","channelList","_renderChannel","ChannelPreviewMessenger","ChannelListMessenger","ChannelPreviewCompact","InfiniteScroll","doc","documentElement","body","pageYOffset","calculateOffset","InfiniteScrollPaginator","alignItems","padding","MessageCommerce","SimpleReactionsList","setUsernames","getReactionsByType","usernames","getUsernames","str","renderUsernames","renderReactions","getReactionCount","reaction_coutns","reactionSvg","threadSvg","optionsSvg","MessageLivestream","reactionSelectorOpen","hideReactions","galleryImages","onMouseLeaveMessage","onClickReactionsAction","onClickOptionsAction","MessageTeam","reactionDirection","marginRight","Thread","fullWidth","autoFocus","ThreadInner","show","Window","hideOnThread"],"mappings":"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"}